module.exports=function(n){var o={};function a(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}return a.m=n,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=6)}([function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("jsonfile")},function(e,t,n){function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,r=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){r=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(r)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/** @license Anzii 
 * anzii.production.js
 *
 * Copyright (c) IIprodakts PTY (LTD), and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c=n(3),l=n(9),p=n(10),a=n(11),d=n(1),h=n(0),i=n(12);e.exports={EMAIL:"",PASSWORD:"",PROMPT:process.argv||[],p_getWorkingFolder:function(){return process.cwd()},p_o_freeze:function(e){return e instanceof Object?Object.freeze(e):null},p_clone:function(e){return e instanceof Object?JSON.parse(JSON.stringify(e)):null},p_deepMerge:function(e,t){return a(!0,t,e)},p_ane:function(e){if(l.isError(e))throw e},p_initArray:function(e,t){for(var n=[],o=this.p_isFunction(t),a=0;a<e;a++)n.push(o?t(a):t);return n},p_escapeRegExp:function(e){return RegExpUtils.escape(e)},p_merge:function(e,n){return p_forEach(e,function(e,t){n[t]=e}),n},p_union:function(e,t){var n={};return p_merge(e,n),p_merge(t,n),n},p_getTasks:function(e,t){for(var n=[],o=0;o<e.length;o++)n.push(t(e,o));return n},p_wrapTask:function(t,n,o){return l.isArray(o)||(o=[]),function(e){o.push(e),n.apply(t,o)}},p_wrapTimedTask:function(e,t,a,n){p_isString(n)&&(a=n,n=[]);var i=p_wrapTask(e,t,n);return function(n){var o=Date.now();i(function(e,t){n(e,{result:t,time:Date.now()-o,start:o,name:a})})}},p_forEach:function(n,o){var e,t;if(l.isArray(n))e=o,t=n;else{if(!p_isObject(n))return!1;t=Object.getOwnPropertyNames(n),e=function(e,t){o(n[e],e,n,t)}}t.forEach(e)},p_arrayToHash:function(e,t){if(!l.isArray(e))return null;p_isNullOrUndefined(t)&&(t=!0);for(var n={},o=0;o<e.length;o++)this.p_isFunction(t)?n[t(e,o)]=e[o]:n[e[o]]=t;return n},p_unikify:function(e){for(var t=e.concat(),n=0;n<t.length;++n)for(var o=n+1;o<t.length;++o)t[n]===t[o]&&t.splice(o--,1);return t},p_arrayToObj:function(e,t,n){if(!l.isArray(e))return null;var o=p_isString(t),a=this.p_isFunction(t);if(!o&&!a)return null;var i=p_isString(n),r=this.p_isFunction(n);i||r||(n=null);for(var s={},c=0;c<e.length;c++){var u=e[c],p=o?u[t]:t(e,c);s[p]=i?u[n]:r?n(e,c):u}return s},p_objArrayToHash:function(e,t){if(!l.isArray(e))return null;for(var n={},o=0;o<e.length;o++)n[e[o][t]]=e[o];return n},p_hashToArray:function(n,o){if(!p_isObject(n))return null;var a=p_isString(o);return Object.keys(n).reduce(function(e,t){return e.push(n[t]),a&&(n[t][o]=t),e},[])},p_invertHash:function(e){if(!p_isObject(e))return null;var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n},p_copyArray:function(e){if(!l.isArray(e))return null;for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},p_dedupeArray:function(e){e=p_arrayToHash(e);return Object.keys(e)},p_arrayPushAll:function(e,t){if(!l.isArray(e)||!l.isArray(t))return!1;for(var n=0;n<e.length;n++)t.push(e[n])},p_generateUniqueID:function(){return i.v4()},p_isObject:function(e){return!this.p_isNullOrUndefined(e)&&"object"===o(e)},p_isString:function(e){return!this.p_isNullOrUndefined(e)&&"string"==typeof e},p_isFunction:function(e){return!this.p_isNullOrUndefined(e)&&"function"==typeof e},p_isNullOrUndefined:function(e){return null==e},p_isBoolean:function(e){return!0===e||!1===e},p_getDirectories:function(r){var s=this;return new Promise(function(n,a){var i=[];d.readdir(r,function(e,t){if(l.isError(e))return a(e);t=s.p_getTasks(t,function(e,t){return function(n){var o=h.join(r,e[t]);d.stat(o,function(e,t){return l.isError(e)?a(e):(s.p_isNullOrUndefined(t)?this.p_wiLog("WARN: Util: unstatable file encountered: %s",o):t.isDirectory()&&i.push(o),void n(e))})}});p.parallel(t,function(e){n(i)})})})},p_getFiles:function(r,s,c){var e=this,u=this;return new Promise(function(o,n){s=s||{recursive:!1,filter:function(){return!0}},e.p_wiLog("The directory path"),e.p_wiLog(r),e.p_wiLog(c),d.readdir(r,function(e,a){if(l.isError(e))return n(e);this.p_wiLog("The readdir results q"),this.p_wiLog(a);for(var t=0;t<a.length;t++)this.p_wiLog(),a[t]=h.join(r,a[t]);var i=[];p.whilst(function(){return 0<a.length},function(n){var o=a.shift();d.stat(o,function(e,t){if(l.isError(e))return n(e);e=!0;if(u.p_isFunction(s.filter)&&(e=s.filter(o,t)),e&&i.push(o),!s.recursive||!t.isDirectory())return n(null);d.readdir(o,function(e,t){return l.isError(e)?n(e):(t.forEach(function(e){a.push(h.join(o,e))}),void n(null))})})},function(e){this.p_wiLog("THE FILES ARRay");var t,n=r+h.sep+c;this.p_wiLog(n),-1!==i.indexOf(n)?(this.p_wiLog("THE IS A NEED FOR A SPECIFIC FILE"),n=(t=i[i.indexOf(n)]).substr(n.indexOf(c),t.length-1),this.p_wiLog(t),this.p_wiLog(n),o(n)):o(i)})})})},p_getFile:function(o){var a=this;return new Promise(function(e,t){a.p_wiLog("The directory path"),a.p_wiLog(o);var n=d.createReadStream(o);n&&e(n)})},p_isExistingDir:function(e){return d.existsSync(e)},p_makeFolderSync:function(e){return d.mkdirSync(e)},p_createFolderContent:function(a,i){var r=this,s=r.p_getWorkingFolder();d.readdirSync(a).forEach(function(e){var t,n="".concat(a,"/").concat(e),o=d.statSync(n);o.isFile()?(t=d.readFileSync(n,"utf8"),n="".concat(s,"/").concat(i,"/").concat(e),d.writeFileSync(n,t,"utf8")):o.isDirectory()&&(d.mkdirSync("".concat(s,"/").concat(i,"/").concat(e)),r.p_createFolderContent("".concat(a,"/").concat(e),"".concat(i,"/").concat(e)))})},p_loadFile:function(e){return require.main.require(e)},p_wiLog:function(e){process.env.SHOW_WILD_LOGS&&"false"!==process.env.SHOW_WILD_LOGS.trim().toLowerCase()&&console.log(e)},p_getMainFileName:function(){return null},p_getRootDir:function(){var e=require.main.filename;return dir=h.dirname(e),dir},p_mkdirs:function(o,r){var s=this;return new Promise(function(t,n){if(s.p_isFunction(r)&&(r=!1),!s.p_isString(o))return n(new Error("absoluteDirPath must be a valid file path"));var e=o.split(h.sep),a="",i=-1!==c.type().toLowerCase().indexOf("windows"),e=s.p_getTasks(e,function(n,o){return function(t){var e=n[o];if(0===e.length||r&&o>=n.length-1)return t();a+=(i&&0===o?"":h.sep)+e,d.exists(a,function(e){return e?t():void d.mkdir(a,t)})}});p.series(e,function(e){return e?n(e):void t(!0)})})},p_mkdirsSync:function(e,n){if(!this.p_isString(e))throw new Error("absoluteDirPath must be a valid file path");var o=e.split(h.sep),a="",i=-1!==c.type().toLowerCase().indexOf("windows");o.forEach(function(e,t){0===e.length||n&&t>=o.length-1||(a+=(i&&0===t?"":h.sep)+e,d.existsSync(a)||d.mkdirSync(a))})},p_getExtension:function(e,t){if(!this.p_isString(e)||e.length<=0)return null;this.p_isObject(t)||(t={});var n=e.lastIndexOf(t.sep||h.sep)||0;-1<n&&(e=e.substr(n));var o=null,n=e.lastIndexOf(".");return 0<=n&&(o=e.substring(n+1),t.lower&&(o=o.toLowerCase())),o},p_getFileExtensionFilter:function(e){var t="."+e;return function(e){return e.lastIndexOf(t)===e.length-t.length}},p_inherits:function(e,t){if(p_isNullOrUndefined(e)||p_isNullOrUndefined(t))throw new Error("The type parameters must be objects or prototypes");l.inherits(e,t),p_merge(t,e)},js_to_json:function(e){return JSON.stringify(e)},json_to_js:function(e){return JSON.parse(e)},clone:function(e){var t=this;if(e instanceof Array){var n=[];return e.forEach(function(e){e instanceof Array||e instanceof Object?n.push(t.clone(e)):n.push(e)}),n}if(e instanceof Object&&"function"!=typeof e){var o,a={};for(o in e)e[o]instanceof Array||e[o]instanceof Object&&"function"!=typeof e[o]?a[o]=this.clone(e[o]):("callback"===o&&this.p_wiLog("The current property is callback"),a[o]=e[o]);return a}},object_to_array:function(e,t){if(e instanceof Object){if(e instanceof Array)return e;var n=[],o=0;if(1<arguments.length&&void 0!==t&&t)for(var a in e)n[o]={key:a,value:e[a]},++o;else for(var i in e)n[o]=e[i],++o;return n}this.throwErrors("Argument 1 of object_to_array() must be an object")},array_to_object:function(e){if(e instanceof Array){for(var t={},n=0;n<e.length;n++){t["property_"+(n+1)]=e[n]}return t}this.throwErrors("Argument 1 of array_to_object() must be an array")},string_to_array:function(e,t){if(this.is_string(e))return e.split(t)},set_deeply:function(e,t,n,o){var a=2<arguments.length&&void 0!==n?n:null,i=3<arguments.length&&void 0!==o?o:null;return 1===e.length?(this.p_wiLog("ABOUT TO SET DEEPLY NESTED PROP"),this.p_wiLog("THE DEEP"),this.p_wiLog(t),a?t[e[0]]=a:(this.p_wiLog("THIS DEEP ARRAY"),this.p_wiLog(this.js_to_json(t)),this.p_wiLog("THE DEEP I,i"),t.splice(e[0],1),this.p_wiLog(t)),this.p_wiLog(e),this.p_wiLog(e[0]),this.p_wiLog(t[e]),!0):t[e[0]]?this.set_deeply(e.slice(1),t[e[0]],a,i):(this.p_wiLog("THE PROPERTY BELOW DOES NOT EXIST"),this.p_wiLog(e),this.p_wiLog(e[0]),!1)},get_deeply:function(){},is_function:function(e){return"[object Function]"===Object.prototype.toString.call(e)},is_array:function(e){return"[object Array]"===Object.prototype.toString.call(e)},is_date:function(e){return"[object Date]"===Object.prototype.toString.call(e)},is_object:function(e){return"[object Object]"===Object.prototype.toString.call(e)},is_string:function(e){return"[object String]"===Object.prototype.toString.call(e)},is_value:function(e){return!this.isObject(e)&&!this.isArray(e)},is_not_falsey:function(e){return!!this.trim_spaces(e)},trim_spaces:function(e){return e instanceof String?e.trim():e},compare_values:function(e,t){e!==t&&(this.is_date(e)&&this.is_date(t)&&e.getTime()===t.getTime()||e!==t&&(e=t))},is_equal_ab:function(e,t,n){var o=2<arguments.length&&void 0!==n?n:"values";if(!this.is_object(e)||!this.is_object(t))return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;if("keys"!==o.trim())return this.js_to_json(e)===this.js_to_json(t);Object.keys(e).sort();o=Object.keys(t).sort();return JSON.stringify(aKeys)===JSON.stringify(o)},is_valid_email:function(){return!0},is_valid_password:function(){return!0},is_same_value:function(e,t){return this.isBrowserSupported("Object","is")?Object.is(e,t):this.polyFills().objectIs(e,t)},unlike_props:function(e,t){var n=Object.keys(e),o=Object.keys(t);if(e.length>t.length){var a=null,i=u(n);try{for(i.s();!(r=i.n()).done;){var r=r.value;e[r]!==t[r]&&(a?a.a.push(r):a={a:[r]})}}catch(e){i.e(e)}finally{i.f()}return a}var s=u(o);try{for(s.s();!(c=s.n()).done;){var c=c.value;t[c]!==e[c]&&(unlike?unlike.b.push(c):unlike={b:[c]})}}catch(e){s.e(e)}finally{s.f()}return unlike},throwErrors:function(e){throw new Error(e)},contains:function(e,t){if(this.is_array(e))return-1<e.indexOf(t);if(this.is_object(e)){if(this.is_array(t)){this.p_wiLog("THE SPECIFED VALUE TO CHECK IS AN ARRAY"),this.p_wiLog(t);for(var n="",o=0;o<t.length;o++){if(!e.hasOwnProperty(t[o])){n=!1;break}o===t.length-1&&(n=!0)}return this.p_wiLog("THE OUTCOME"),this.p_wiLog(n),n}return!!e.hasOwnProperty(t)}this.throwErrors("Contains() requires either an array pure js object")},for_of:function(e,t,n){var o=2<arguments.length&&void 0!==n?n:null;if(e=this.clone(e),this.is_array(e))e.forEach(t);else if(this.is_object(e)){if(!o){var a,i={};for(a in e){var r=t(a,e[a]);i[r.p]=r.v}return i}for(var s in e)t(s,e[s])}else this.throwErrors("Object of for_of() must be an Array or pure object")},add_values_to:function(o,e,a){if(this.is_array(o))o.forEach(action);else{if(this.is_object(o))return e.forEach(function(t,e){var n=Object.keys(a[t]);o[t]?n.forEach(function(e){o[t][e]=a[e]}):(o[t]={},n.forEach(function(e){o[t][e]=a[e]}))}),o;this.throwErrors("Object of for_of() must be an Array or pure object")}},find_in:function(e,t,n){if(this.is_array(e)){if(this.is_value(e[0]))return-1<e.indexOf(n)&&e[n];if(this.is_object(e[0]))for(var o=0;o<e.length;o++)if(sb.sb_contains(e[o],t)&&e[o][t]===n)return e[o]}}}},function(e,t,n){n(7),e.exports=n(8)},function(e,t){e.exports=require("@babel/polyfill")},function(e,t,n){var o=n(22).default;e.exports=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;e?o.Activate([e]):o.Activate()}},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("async")},function(e,t){e.exports=require("node.extend")},function(e,t){e.exports=require("uuid")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("config")},function(e,t){e.exports=require("supports-color")},function(e,t){e.exports=require("winston")},function(e,t){e.exports=require("debug")},function(e,t){e.exports=require("cluster")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("mysql")},function(e,t,n){"use strict";n.r(t);var o=n(5),a=n.n(o);function i(e){this.PILLAR=e,this.modules={},this.globalModules=[],this.PROMPT=this.PILLAR.PROMPT}i.prototype.createModule=function(e,t,n,o){var a=this.modules;if(this.sanna().runForModules(e,o),0<Object.keys(a).length)for(var i in a)i===t||(this.modules[t]={}),this.modules[t][n]=e;else this.modules[t]={},this.modules[t][n]=e},i.prototype.events=function(){var o=this.PILLAR;return{addEventHandler:function(e,t,n){if("undefined"==typeof window)return o.ev_addHandler(e,t,n);o.ev_addHandler(e,t,n)},removeEventHandler:function(e,t,n){o.ev_removeHandler(e,t,n)},getEvent:function(e){return o.getEvent(e)},getTarget:function(e){return o.getTarget(e)},preventNormal:function(e){o.preventDefault(e)},stopEventBubble:function(e){o.stopPropagation(e)}}},i.prototype.ajax=function(){var i=this.PILLAR;return{get:function(e,t,n,o,a){i.ajax_get(e,t,n,o,a)},post:function(e,t,n,o,a){i.ajax_post(e,t,n,o,a)}}},i.prototype.validators=function(){var o=this.PILLAR;return{isFunction:function(e){return o.is_function(e)},isArray:function(e){return o.is_array(e)},isDate:function(e){return o.is_date(e)},isObject:function(e){return o.is_object(e)},isString:function(e){return o.is_string(e)},isValue:function(e){return o.is_value(e)},isNotFalsey:function(e){return o.is_not_falsey(e)},trimSpaces:function(e){return o.trim_spaces(e)},isEqualab:function(e,t,n){n=2<arguments.length&&void 0!==n?n:null;return o.is_equal_ab(e,t,n)},isSameValue:function(e,t){return o.is_same_value(e,t)},isValidEmail:function(e){return o.is_valid_email(e)},isValidPassword:function(e){return o.is_valid_password(e)},unlikeProps:function(e,t){return o.unlike_props(e,t)},contains:function(e,t){return o.contains(e,t)},forOf:function(e,t,n){return o.for_of(e,t,n)},addValuesTo:function(e,t,n){return o.add_values_to(e,t,n)},findIn:function(e,t,n){return o.find_in(e,t,n)}}},i.prototype.util=function(){var o=this.PILLAR;return{makeDirs:function(e,t,n){return o.p_mkdirs(e,t,n)},mkdirsSync:function(e,t,n){return o.p_mkdirs(e,t,n)},getFiles:function(e,t,n){return o.p_getFiles(e,t,n)},getFile:function(e){return o.p_getFile(e)},getDirectories:function(e){return o.p_getDirectories(e)},getExtension:function(e,t){return o.p_getExtension(e,t)},generateUniqueID:function(){return o.p_generateUniqueID()},unikify:function(e){return o.p_unikify(e)},getWorkingFolder:function(){return o.p_getWorkingFolder()},makeFolderSync:function(e){return o.p_makeFolderSync(e)},createFolderContent:function(e,t){return o.p_createFolderContent(e,t)},loadFile:function(e){return o.p_loadFile(e)},getMainFileName:function(){return o.p_getMainFileName()},getRootDir:function(){return o.p_getRootDir()},isExistingDir:function(e){return o.p_isExistingDir(e)},wiLog:function(e){e=0<arguments.length&&void 0!==e?e:"";return o.p_wiLog(e)}}},i.prototype.registerEvents=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";e&&t&&n&&this.modules[t][n]&&(this.modules[t][n].events=e)},i.prototype.triggerEvent=function(e){if(e)for(var t in this.modules)if(this.modules.hasOwnProperty(t))for(var n in t=this.modules[t])t[n].events&&t[n].events[e.type]&&t[n].events[e.type](e.data)},i.prototype.startModule=function(e,t){this.modules[e][t]&&("anziiloger"!==e&&this.modules.anziiloger.anziiloger.setDebugger(this.modules[e][t].getClassName()),this.modules[e][t].init(),"global"===e&&(this.modules[e][t].globals=Object.keys(this.modules)))},i.prototype.startAllModules=function(){for(var e in this.modules){var t,n=this.modules[mod];for(t in n)try{this.modules[n][t].init()}catch(e){}}},i.prototype.stopModule=function(e,t){this.modules[e][t]&&this.modules[e][t].destroy()},i.prototype.stopAllModules=function(){for(var e in this.modules){var t,n=this.modules[mod];for(t in n)try{this.modules[n][t].destroy()}catch(e){}}},i.prototype.converts=function(){var n=this.PILLAR;return{jsToJson:function(e){return n.js_to_json(e)},jsonToJs:function(e){return n.json_to_js(e)},clone:function(e){return n.clone(e)},objectToArray:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t&&t;return n.object_to_array(e,t)},stringToArray:function(e,t){return n.string_to_array(e,t)}}},i.prototype.sanna=function(){var n=this;return{modules:{validators:{emit:function(e){if(e.hasOwnProperty("emit")){if("function"!=typeof e.emit)throw new Error("Emit is a reserved Akii method")}else e.emit=n.sanna().modules.addiks.emit.bind(e)},listens:function(e){if(e.hasOwnProperty("listens")){if("function"!=typeof e.listens)throw new Error("Listens is a reserved ANZii method")}else e.listens=n.sanna().modules.addiks.listens.bind(e)},log:function(e){e.log=n.sanna().modules.addiks.log.bind(e)},logSync:function(e){e.logSync=n.sanna().modules.addiks.logSync.bind(e)},info:function(e,t){t=1<arguments.length&&void 0!==t?t:"";t&&"anziiloger"===t.toLowerCase()||(e.info=n.sanna().modules.addiks.info.bind(e))},infoSync:function(e){e.infoSync=n.sanna().modules.addiks.infoSync.bind(e)},debug:function(e,t){t=1<arguments.length&&void 0!==t?t:"";t&&"anziiloger"===t.toLowerCase()||(e.debug=n.sanna().modules.addiks.debug.bind(e))},warn:function(e,t){t=1<arguments.length&&void 0!==t?t:"";t&&"anziiloger"===t.toLowerCase()||(e.warn=n.sanna().modules.addiks.warn.bind(e))},error:function(e,t){t=1<arguments.length&&void 0!==t?t:"";t&&"anziiloger"===t.toLowerCase()||(e.error=n.sanna().modules.addiks.error.bind(e))},adLog:function(e){e.adLog=n.sanna().modules.addiks.adLog.bind(e)},wiLog:function(e){e.wiLog=n.sanna().modules.addiks.wiLog.bind(e)},getClassName:function(e){e.getClassName=n.sanna().modules.addiks.getClassName.bind(e)},query:function(e){e.query=n.sanna().modules.addiks.query.bind(e)}},addiks:{emit:function(e){this.pao.pa_notifyEvent({type:e.type,data:e.data})},listens:function(e){var t=this.pao,n=t.moduleMeta.moduleId,o=t.moduleMeta.modInstId;t.pa_notifyListen(e,n,o)},log:function(e,t){e=0<arguments.length&&void 0!==e?e:"No message provided",t=1<arguments.length&&void 0!==t?t:"console",this.pao,t={message:e,type:t};t.source=this.getClassName(),this.emit({type:"anziiloger-log",data:t})},logSync:function(e,t){e=0<arguments.length&&void 0!==e?e:"No message provided",t=1<arguments.length&&void 0!==t?t:"console",this.pao,t={message:e,type:t};t.source=this.getClassName(),t.sync=!0,this.emit({type:"anziiloger-log",data:t})},info:function(e){e=0<arguments.length&&void 0!==e?e:"No message provided",this.pao,e={message:e,type:"info"};e.source=this.getClassName(),this.emit({type:"anziiloger-log",data:e})},infoSync:function(e){e=0<arguments.length&&void 0!==e?e:"No message provided",this.pao,e={message:e,type:"info"};e.source=this.getClassName(),e.sync=!0,this.emit({type:"anziiloger-log",data:e})},debug:function(e){e=0<arguments.length&&void 0!==e?e:"No message provided",this.pao,e={message:e,type:"debug"};e.source=this.getClassName(),this.emit({type:"anziiloger-log",data:e})},warn:function(e){e=0<arguments.length&&void 0!==e?e:"No message provided",this.pao,e={message:e,type:"warn"};e.source=this.getClassName(),this.emit({type:"anziiloger-log",data:e})},error:function(e){e=0<arguments.length&&void 0!==e?e:"No message provided",this.pao,e={message:e,type:"error"};e.source=this.getClassName(),this.emit({type:"anziiloger-log",data:e})},adLog:function(e){e=0<arguments.length&&void 0!==e?e:"No message provided",this.pao,e={message:e,type:"adLog"};e.source=this.getClassName(),this.emit({type:"anziiloger-log",data:e})},wiLog:function(e){e=0<arguments.length&&void 0!==e?e:"No message provided",this.pao,e={message:e,type:"wiLog"};e.source=this.getClassName(),this.emit({type:"anziiloger-log",data:e})},getClassName:function(){return this.pao.moduleMeta.className},query:function(e,t,n){var o=0<arguments.length&&void 0!==e?e:null,a=1<arguments.length&&void 0!==t?t:null,e=2<arguments.length&&void 0!==n?n:null,t=this.pao;if(!o||!a)throw new Error("Query method missing required parameters");n=t.pa_isString(o)?t.pa_stringToArray(o,"."):o;3===n.length?(t={vendor:n[0],table:n[1],operation:n[2]},this.emit({type:"data-hive-request",data:{model:t,document:a,handler:e}})):(o[1].trim(),n={vendor:n[0],table:n[1].toLowerCase(),operation:n[1].toLowerCase()},this.emit({type:"data-hive-request",data:{model:n,document:a,handler:e}}))}}},runForModules:function(e,t){var n,o=this.modules.validators;for(n in o)o[n](e,t)}}};var r=i;function s(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function c(o){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach(function(e){var t,n;t=o,e=a[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})}return o}function u(e){this.core=e,this.PROMPT=e.PROMPT}u.prototype.create=function(e,t,n){var o=this.core,a=this.PROMPT,i=o.validators().forOf(o.util(),function(e,t){return{p:["pa_".concat(e)],v:t}}),r=o.validators().forOf(o.converts(),function(e,t){return{p:["pa_".concat(e)],v:t}}),s=o.validators().forOf(o.validators(),function(e,t){return{p:["pa_".concat(e)],v:t}});return c(c(c(c({moduleMeta:t?{moduleId:e,modInstId:t,className:n}:{moduleId:e,modInstId:e,className:n},PROMPT:a},i),s),r),{},{pa_notifyListen:function(e,t,n){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",n=2<arguments.length&&void 0!==n?n:"";o.registerEvents(e,t,n)},pa_notifyEvent:function(e){e=0<arguments.length&&void 0!==e?e:{};o.triggerEvent(e)}})};var p=u;var l=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CORE=r,this.PAO=p,this.PILLAR=a.a};function d(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function h(o){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach(function(e){var t,n;t=o,e=a[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})}return o}function f(){this.adLog("Middleware has been initialised"),this.listens({"config-middleware":this.handleConfigMiddleware.bind(this),"add-ext-middleware":this.handleAddExternalMiddleware.bind(this),"attach-middleware":this.handleAttachMiddleware.bind(this)})}function g(e){this.attachMiddleware(e)}function w(e){var t,o=this,a=e;for(t in a)!function(n){o.middlewares[n]?a[n].addMiddleware&&a[n].addMiddleware.forEach(function(e,t){o.middlewares[n].push(e)}):a[n].addMiddleware&&(o.middlewares[n]=h({},a[n].addMiddleware))}(t)}function m(e){var n=this,t=n.pao;n.pao.pa_wiLog("ADD EXTERNAL MIDDLEWARE EVENT HAS OCCURED"),e.type&&("private"===e.type?"top"===e.level&&(t.pa_isArray(e.middleware.funk)?e.middleware.forEach(function(e,t){n.middleware.unshift({type:"function",value:e.funk,ext:!0})}):(n.pao.pa_wiLog("THE MIDDLEWARES BEFORE"),n.pao.pa_wiLog(n.middlewares),n.middlewares.pprivate&&(t=Object.keys(n.middlewares.pprivate).length,n.middlewares.pprivate[t]={type:"function",value:e.middleware.funk,ext:!0},n.pao.pa_wiLog("Middlewares"),n.pao.pa_wiLog(n.middlewares)))):"public"===e.type||"all"===e.type&&e.level)}function E(n){var e=this;n.app&&(0<e.all.length&&(e.pao.pa_wiLog("THE Allwares is greater than zero"),n.xpress&&e.allWares(n.app,n.xpress)),e.middlewares.pprivate&&e.middlewares.ppublic?e.emit({type:"router-middleware",data:{middleware:{public:e.middlewares.ppublic,private:e.middlewares.pprivate}}}):e.middlewares.private?e.emit({type:"router-middleware",data:{middleware:{private:e.middlewares.pprivate}}}):e.middlewares.public&&e.emit({type:"router-middleware",data:{middleware:{public:e.middlewares.ppublic}}}),e.middlewares.all&&e.middlewares.all.forEach(function(e,t){"function"===e.type?n.app.use(e.value):e.type}))}function L(n,o){var a=this,i=a.pao;a.all.forEach(function(e,t){i.pa_isObject(e)?(a.pao.pa_wiLog("Executing allwares"),e.use?(a.pao.pa_wiLog("The public:",e.call),n.use(o[e.call]("public"))):(a.pao.pa_wiLog("The none-public:",e.call),n.use(o[e.call]()))):(a.pao.pa_wiLog("middleware is string"),n.use(o[e]()))})}function v(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),this.pao=e,this.all=[{call:"static",use:"public"},"json"],this.middlewares={all:[{type:"function",value:function(e,t,n){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),n()}}]},this.init=f,this.handleAttachMiddleware=g,this.attachMiddleware=E,this.handleConfigMiddleware=w,this.handleAddExternalMiddleware=m,this.allWares=L}function _(){this.adLog("Parsers has been initialised"),this.listens({"share-middleware":this.handleShareMiddleware.bind(this)})}function O(){this.pao.pa_wiLog("HANLDE SHARE MIDDLEWARE EVENT HAS OCCURED"),this.emit({type:"add-ext-middleware",data:{type:"all",level:"top",middleware:{funk:[{body:this.dependiks.bodyParser,call:"json"}]}}})}n(2);function b(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),this.pao=e,this.path=T,this.dependiks={jsonfile:y,bodyParser:S},this.init=_,this.handleShareMiddleware=O}var y=n(4),T=n(0),S=n(2);function R(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function N(s){return function(){var e=this,r=arguments;return new Promise(function(t,n){var o=s.apply(e,r);function a(e){R(o,t,n,a,i,"next",e)}function i(e){R(o,t,n,a,i,"throw",e)}a(void 0)})}}function I(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function k(o){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?I(Object(a),!0).forEach(function(e){var t,n;t=o,e=a[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})}return o}function C(){this.adLog("Router has been initialised"),this.listens({"config-router":this.handleConfigRouter.bind(this),"router-middleware":this.handleRouterMiddleware.bind(this),"attach-routes":this.handleAttachRoutes.bind(this)})}function A(e){this.pao.pa_wiLog("THE HANDLE CONFIG ROUTER MODULE"),this.pao.pa_wiLog(e),this.routes=e}function D(e){this.pao.pa_wiLog("THE ROUTER MIDDLEWARE"),this.pao.pa_wiLog(e),this.routerMiddleware=e.middleware}function x(e){this.attachRoutes(e)}function H(n){var o=this;if(n.app){var a=[],i=[];if(n.app.use(o.cors()),n.app.use("/",n.router),!o.routes){o.warn("NO_CONFIGURED_ROUTES, ANZII WILL RESOLVE TO DEFAULT ROUTES");return[{path:"/greeting/:name/:surname",alias:"hello",method:"GET",type:"public"}].forEach(function(e,t){e.alias&&(a.push(e.path.split("/")[1]),i.push(e.alias)),e.router=n.router,o.renderRoute(e)}),void(0<a.length&&o.emit({type:"router-alias-list",data:{aliasList:a,handlers:i}}))}o.routes.forEach(function(e,t){e.alias&&(a.push(e.path.split("/")[1]),i.push(e.alias)),e.router=n.router,o.renderRoute(e)}),n.router.use("*.js",function(e,t,n){t.set("Content-Type","text/javascript"),n()}),n.router.use(o.outOfRouterContext.bind(this)),0<a.length&&o.emit({type:"router-alias-list",data:{aliasList:a,handlers:i}})}}function P(e){var t=this,n=this.pao,o={router:e.router,method:e.method,path:e.path,handOver:t.handOver};e.middlewares?(t.routerMiddleware&&t.routerMiddleware[e.type]?(t.middlewareType(e.type,e.middlewares),t.middlewareType(e.type,n.pa_objectToArray(t.routerMiddleware[e.type]))):t.middlewareType(e.type,e.middlewares),t.appendRouter(k({middleware:t["filtered".concat(e.type,"Middlewares")]},o))):t.routerMiddleware&&t.routerMiddleware[e.type]?(t.middlewareType(e.type,n.pa_objectToArray(t.routerMiddleware[e.type])),t.appendRouter(k({middleware:t["filtered".concat(e.type,"Middlewares")]},o))):t.appendRouter(o)}function F(e){e.middleware?e.router[e.method.toLowerCase()](e.path,e.middleware,e.handOver.bind(this)):e.router[e.method.toLowerCase()](e.path,e.handOver.bind(this))}function j(n,e){var o=this;e.forEach(function(e,t){"function"===e.type?o["filtered".concat(n,"Middlewares")].push(e.value):"module"===e.type&&o.emit({type:"add-".concat(e.value,"-middleware"),data:{type:n,filterCallback:o.filterCallback.bind(o)}})})}var q=function(){var e=N(regeneratorRuntime.mark(function e(t,n){var o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,i=(o=this).pao.pa_generateUniqueID(),t.R_ID=i,n.R_ID=i,o.adLog("THE OUTOFROUTERCONTEXT REQUESTS"),o.adLog(t.accepts(["html","json"])),a="json"===t.accepts(["html","json"])?{error:!0,accepts:"json",type:"NotFound",code:404,message:"Resource was not found: OutOfContext"}:"html"===t.accepts(["html","json"])?{error:!0,accepts:"html",type:"NotFound",code:404,message:"Resource was not found: OutOfContext"}:{error:!0,accepts:"txt",type:"NotFound",code:404,message:"Resource was not found: OutOfContext"},e.abrupt("return",o.emit({type:"write-server-request-response",data:{data:a,res:n}}));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();function M(e,t){return U.apply(this,arguments)}function U(){return(U=N(regeneratorRuntime.mark(function e(t,n){var o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=this,e.next=3,o.pao.pa_wiLog("THE CAUGHT REQUEST INSIDE ROUTER::END POINT HIT");case 3:return a=o.pao.pa_generateUniqueID(),t.R_ID=a,n.R_ID=a,o.infoSync("HANDLING REQUEST OF ID: ".concat(t.R_ID.split("-")[0]," WITH METHOD: ").concat(t.method," AND URL OF: ").concat(t.originalUrl)),e.next=9,o.pao.pa_wiLog(t.originalUrl);case 9:return e.next=11,o.pao.pa_wiLog(t.params);case 11:return e.next=13,o.pao.pa_wiLog(t.body);case 13:return e.abrupt("return",o.emit({type:"request-handover",data:{req:t,res:n}}));case 14:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function B(e,t){("public"===e?this.filteredpublicMiddlewares:this.filteredprivateMiddlewares).push(t)}function W(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,W),this.pao=e,this.routes=null,this.routerMiddleware=null,this.filteredpublicMiddlewares=[],this.filteredprivateMiddlewares=[],this.cors=se,this.init=C,this.handleConfigRouter=A,this.handleAttachRoutes=x,this.handleRouterMiddleware=D,this.attachRoutes=H,this.renderRoute=P,this.appendRouter=F,this.middlewareType=j,this.outOfRouterContext=q,this.handOver=M,this.filterCallback=B}function G(){this.adLog("Request has been initialised"),this.listens({"config-request":this.handleConfigRequest.bind(this),"request-handover":this.handleRequestHandOver.bind(this),"request-global-request-response":this.handleRequestGlobalResponse.bind(this),"request-global-request-error":this.handleRequestGlobalError.bind(this),"request-handler-error":this.handleHandlerError.bind(this),"router-alias-list":this.handleRouterAliasList.bind(this)})}function V(e){var t=this;e.forEach(function(e){e.view&&t.views.push(e.path)})}function J(e){var t=this;t.adLog("Handling Handed Request"),t.request.res=e.res;var n=t.routesAliasList,o=t.aliatikHandlers,a=t.parseRequest(e.req);t.pao.pa_wiLog("THE ALIATIKS"),t.pao.pa_wiLog(a),t.pao.pa_wiLog(n),t.pao.pa_wiLog(o),e.req.uploads&&(a.user?a.user.uploads=e.req.uploads:a.user={uploads:e.req.uploads});var i=a.handler;if(0<=n.indexOf(i)&&(i=o[n.indexOf(i)]),(t.handler=i)&&""!==i.trim()){t.pao.pa_wiLog("THERES A VALID HANDLE"),t.pao.pa_wiLog(t.handler);var r=a.user||null;return(t.requestData={parsed:a,handler:i,request:{req:e.req,res:e.res}},r&&(t.requestData.user=r),t.pao.pa_wiLog(t.views),t.pao.pa_wiLog(!t.views||0===t.views.length),t.pao.pa_wiLog(t.isView(e.req.originalUrl,r)),t.views&&0!==t.views.length)?t.isView(e.req.originalUrl,r)?t.emit({type:"do-view-task",data:{payload:t.requestData,callback:t.taskerHandler.bind(t)}}):(t.pao.pa_wiLog("none view should be rendered"),t.emit({type:"request-global-request",data:i})):t.emit({type:"request-global-request",data:i})}return t.pao.pa_wiLog("THEre is no handler"),t.pao.pa_wiLog(t.handler),t.views&&0!==t.views.length?(r=a.user||null,t.requestData={parsed:a,handler:i,request:{req:e.req,res:e.res}},r&&(t.requestData.user=r),t.isView("/home")?t.emit({type:"do-view-task",data:{payload:t.requestData,callback:t.taskerHandler.bind(t)}}):t.handlePathError()):t.handlePathError()}function K(e){var t=this;t.pao.pa_wiLog("The req"),t.pao.pa_wiLog(e.body),t.pao.pa_wiLog(e.query),t.pao.pa_wiLog(e.params);var n,o,a={url:e.originalUrl},i=0===a.url.indexOf("/")?a.url.slice(1,a.url.length):a.url,r=0<i.indexOf("/");return e.query&&0<Object.keys(e.query).length?(t.pao.pa_wiLog("THE QUERY"),t.pao.pa_wiLog(e.query),a.user=e.query,o=i.split("?"),r?(n=o[0].split("/"),t.pao.pa_wiLog("THE PATH FRAGS"),t.pao.pa_wiLog(n),a.handler=n[0]):(t.pao.pa_wiLog("THE REMAINING CONTENT AFTER SPLIT OF ?"),t.pao.pa_wiLog(o),a.handler=o[0])):e.params&&0<Object.keys(e.params).length?(t.pao.pa_wiLog("THE PARAMS"),t.pao.pa_wiLog(e.params),a.user=e.params,r?(o=i.split("/"),t.pao.pa_wiLog("THE PATH FRAGS"),t.pao.pa_wiLog(o),a.handler=o[0]):a.handler=i):e.body&&0<Object.keys(e.body).length?(t.pao.pa_wiLog("THE REQUEST BODY"),t.pao.pa_wiLog(e.body),a.user=e.body,r?(e=i.split("/"),t.pao.pa_wiLog("THE PATH FRAGS"),t.pao.pa_wiLog(e),a.handler=e[0]):a.handler=i):(a.user={},r?(r=i.split("/"),t.pao.pa_wiLog("THE PATH FRAGS"),t.pao.pa_wiLog(r),a.handler=r[0]):a.handler=i,delete a.user),a}function z(){this.writeResponse({error:!0,type:"serverError",code:502,message:"The server error"})}function Q(){this.writeResponse({error:!0,type:"ServerError",code:502,message:"The requested task[handler] could not be completed"})}function Y(e){this.pao.pa_wiLog("Router ALIATIKHANDLERS WITH DATA:"),this.pao.pa_wiLog(e),this.routesAliasList=e.aliasList,this.aliatikHandlers=e.handlers}function X(e){var t=this;e?t.emit({type:"handle-".concat(t.requestData.handler,"-task"),data:{payload:t.requestData,callback:t.taskerHandler.bind(t)}}):t.handleByHandlerError()}function Z(e,t){var t=1<arguments.length&&void 0!==t?t:null,n=this,o=n.views;if(n.pao.pa_wiLog("THE VIEW PATH"),n.pao.pa_wiLog(e),n.pao.pa_wiLog(t),n.pao.pa_wiLog(o),!t)return n.pao.pa_wiLog("THE PARSED USsER"),n.pao.pa_wiLog(n.requestData),n.pao.pa_wiLog(e),n.pao.pa_wiLog(0<=o.indexOf(e)),n.requestData.user&&(n.requestData.parsed.derivedUrl="/home"),0<=o.indexOf(e);if(0<=o.indexOf(e))return!0;var t=Object.keys(t),a="";n.pao.pa_wiLog("THE PARALIST"),n.pao.pa_wiLog(t),t.forEach(function(e,t){0===t?a=":".concat(e):a+="/:".concat(e)}),n.pao.pa_wiLog("thE PARARSTRING"),n.pao.pa_wiLog(a);for(var i=0;i<o.length;i++)if(0<o[i].indexOf(a)){var r=o[i].substr(0,o[i].indexOf(a)),s=r+a;return n.pao.pa_wiLog("EXTRACTED VIEW PATH"),n.pao.pa_wiLog(r),n.pao.pa_wiLog(s),n.pao.pa_wiLog(e),n.pao.pa_wiLog(e.indexOf(r)),0<=e.indexOf(r)&&(n.pao.pa_wiLog("Theviewpath matched"),n.requestData.parsed.derivedUrl=s,!0)}return!1}function $(){this.writeResponse({error:!0,type:"BadRequest",code:400,message:"Bad Request"})}function ee(){this.writeResponse({error:!0,type:"NotFound",code:404,message:"The requested task could not be completed"})}function te(){this.writeResponse({error:!0,type:"notFound",code:404,message:"The requested task could not be completed"})}function ne(){this.handleHandlerError()}function oe(e,t){var n=1<arguments.length&&void 0!==t?t:"regular",t=this.pao;"regular"===n&&(e=t.pa_isString()?t.pa_jsToJson({text:e}):t.pa_jsToJson(e)),this.emit({type:"write-server-request-response",data:{data:e,res:this.request.res,method:n}})}function ae(e,t,n){var o=0<arguments.length&&void 0!==e?e:null,e=1<arguments.length&&void 0!==t?t:null,t=2<arguments.length&&void 0!==n?n:null;(n=this).pao,n.pao.pa_wiLog("THE TASKER HANDLER"),n.pao.pa_wiLog(o),n.pao.pa_wiLog(t),o?n.failureHandle({error:!0,message:o}):e&&(t?n.successfullHandle(e,t):n.successfullHandle(e))}function ie(e,t){this.writeResponse(e,t)}function re(e){this.writeResponse(e)}var se=n(13);function ce(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ce),this.pao=e,this.request={},this.routesAliasList=[],this.aliatikHandlers=[],this.requestData=null,this.views=[],this.init=G,this.handleConfigRequest=V,this.handleRequestHandOver=J,this.parseRequest=K,this.handleRequestGlobalError=z,this.handleRequestGlobalResponse=X,this.isView=Z,this.handleBadRequestError=$,this.handleHandlerNotFound=ee,this.handleByHandlerError=te,this.handleHandlerError=ne,this.handlePathError=Q,this.handleRouterAliasList=Y,this.writeResponse=oe,this.taskerHandler=ae,this.successfullHandle=ie,this.failureHandle=re}function ue(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function pe(s){return function(){var e=this,r=arguments;return new Promise(function(t,n){var o=s.apply(e,r);function a(e){ue(o,t,n,a,i,"next",e)}function i(e){ue(o,t,n,a,i,"throw",e)}a(void 0)})}}function le(){this.adLog("Server has been initialised"),this.adLog("SERVER IS STARTING UP"),this.listens({"config-server":this.handleConfigServer.bind(this),"config-domain-resources":this.handleDomainResources.bind(this),"write-server-request-response":this.handleWriteServerRequestResponse.bind(this)})}function de(){var e=this;e.emit({type:"attach-middleware",data:{app:e.http,xpress:e.xpress}}),e.emit({type:"attach-routes",data:{app:e.http,router:e.router}}),e.emit({type:"distribute-system-resources",data:""}),e.startServer()}function he(){this.pao.pa_wiLog("THE server is emitting system defaults event"),this.emit({type:"set-domain-defaults",data:{app:this.http,xpress:this.xpress}})}function fe(){this.runServer()}function ge(){var e=this;e.http.use(e.dependiks.bodyParser.json()),e.http.use("*.js",function(e,t,n){return t.set("content-type","text/javascript"),n()}),e.http.use(e.xpress.static("public"))}function we(){var e=this;e.http.get("/todo",e.renderHtml.bind(e)),e.http.get("/ibr",e.renderHtml.bind(e)),e.http.get("/home",e.renderHtml.bind(e)),e.http.use("/",e.renderHtml.bind(e))}function me(){this.emit({type:"attach-workers-to-server",data:{app:this.http}})}function Ee(e,t){var n=this;n.pao.pa_wiLog("A request has been made to one of the routes"),n.pao.pa_wiLog("The html"),n.pao.pa_wiLog("The request URL"),n.pao.pa_wiLog(e.url),n.request={req:e,res:t},n.emit({type:"address-changed",data:{url:e.url}})}function Le(n){var o=this,t=(o.pao,o.mimeTypes[n.data.ext]),a=n.data.rStream;a.on("open",pe(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.res.set("Content-Type",t),n.res.set("Connection","close"),e.abrupt("return",a.pipe(n.res));case 3:case"end":return e.stop()}},e)}))),a.on("end",pe(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.res.end(),e.abrupt("return",o.infoSync("STREAM REQUEST HAS BEEN SUCCESSFULLY HANDLED WITH RESPONSE ID::".concat(n.res.R_ID.split("-")[0])));case 2:case"end":return e.stop()}},e)}))),a.on("error",function(){var t=pe(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.pao.pa_wiLog("THE ERROR READSTREAM"),o.pao.pa_wiLog(t),n.res.set("Content-Type","application/json"),n.res.set("Connection","close"),e.abrupt("return",n.res.status(404).send({error:!0,message:"Not found"}));case 5:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())}function ve(o,a){var i=this;return i.pao,i.pao.pa_wiLog("THE SET VIEW"),i.pao.pa_wiLog(a),new Promise(function(n,e){var t=null,t=a.viewData?a.viewData:{title:a.title};o.render(a.view,t,function(e,t){return e?(i.pao.pa_wiLog("THE ERROR BELOW OCCURED TRYING TO RENDER VIEW"),i.pao.pa_wiLog(e),void o.render("main/500",{title:"Server error"},function(e,t){return n(e?{html:"<hl>The page could not be found</h1>",success:!1}:{html:t,success:!0})})):n({html:t,success:!0})})})}var _e=function(){var e=pe(regeneratorRuntime.mark(function e(n){var o,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((o=this).pao.pa_wiLog("THE DATA TO BE SENT TO CLIENT"),o.pao.pa_wiLog(n.method),o.pao.pa_wiLog("renderView"===n.method),"stream"===n.method)return e.abrupt("return",o.streamResponse(n));e.next=8;break;case 8:if("renderView"!==n.method){e.next=29;break}if(o.pao.pa_wiLog("THE RENDERVIEW"),o.pao.pa_wiLog(n),t=n.data.data,o.pao.pa_wiLog("MAKING A VIEW request response"),n.res.set("Connection","close"),"template"===t.type.trim())return o.pao.pa_wiLog("Rendering template view"),o.pao.pa_wiLog(n.data.view),o.pao.pa_wiLog("Rendering inside try"),o.getHtml(n.res,t).then(function(){var t=pe(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.success?(n.res.status(200).send(t.html),o.infoSync("SERVER HAS SUCCESSFULLY SENT RESPONSE TO CLIENT WITH RESPONSE ID::".concat(n.res.R_ID.split("-")[0]))):(n.res.status(200).send(t.html),o.infoSync("SERVER HAS SENT A FAILED RESPONSE BACK TO CLIENT WITH RESPONSE ID::".concat(n.res.R_ID.split("-")[0])));case 1:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){n.res.status(200).send(e.html)}),e.abrupt("return");e.next=22;break;case 22:if("modular"===t.type)return o.pao.pa_wiLog("rENDEING MODULAR VIEW"),o.infoSync(t.view),n.res.status(200).send(t.view),e.abrupt("return",o.infoSync("SERVER HAS SUCCESSFULLY SENT RESPONSE TO CLIENT WITH RESPONSE ID::".concat(n.res.R_ID.split("-")[0])));e.next=27;break;case 27:e.next=49;break;case 29:return o.infoSync("SERVER IS ABOUT TO SEND RESPONSE BACK TO CLIENT WITH RESPONSE ID::".concat(n.res.R_ID.split("-")[0])),e.next=32,o.adLog(n.data);case 32:return e.next=34,n.res.set("Connection","close");case 34:if(!n.data.accepts){e.next=45;break}e.t0=n.data.accepts,e.next="json"===e.t0?38:"html"===e.t0?40:42;break;case 38:return n.res.status(200).send(n.data),e.abrupt("break",43);case 40:return o.getHtml(n.res,{view:"main/404",title:"Page could not be found"}).then(function(e){return n.res.status(200).send(e.html)}).catch(function(e){return n.res.status(200).send(e.html)}),e.abrupt("break",43);case 42:n.res.type("txt").status(200).send("Text not found");case 43:e.next=46;break;case 45:n.res.status(200).send(n.data);case 46:return e.next=48,o.log("SERVER HAS SENT A RESPONSE BACK TO CLIENT");case 48:return e.abrupt("return",e.sent);case 49:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();function Oe(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Oe),this.pao=e,this.xpress=Ne,this.http=this.xpress(),this.router=this.xpress.Router(),this.path=ke,this.html=[],this.request=null,this.componentCount=0,this.componentId=[],this.ssrComponentLen=0,this.componentRefLen=0,this.workers=[],this.fixedCompS={before:[],after:[]},this.compData=[],this.dependiks={jsonfile:Ie,bodyParser:Ce},this.mimeTypes={html:"text/html",txt:"text/plain",css:"text/css",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",js:"application/javascript"},this.init=le,this.handleConfigServer=de,this.handleDomainResources=he,this.handleWriteServerRequestResponse=_e,this.startServer=fe,this.startPreRoutes=ge,this.startRouting=we,this.streamResponse=Le,this.runServer=me,this.renderHtml=Ee,this.streamResponse=Le,this.getHtml=ve}function be(){this.adLog("Config has been initialised"),this.setLogNamespaces(),this.getConfigFile(),this.configure()}function ye(){if(!process.env.Debug)return process.env.Debug="anzii:system,anzii:server, anzii:request,anzii:router,anzii:server "}function Te(){try{this.config=this.pao.pa_loadFile("./.config.js")}catch(e){this.warn("THE .config.js CONFIGURATION_FILE_WAS_NOT_FOUND_IN_THE_ROOT"),this.warn("Anzii will use defaults"),this.config=null}}function Se(){var e=this,t=e.config;if(!e.config)return e.emit({type:"config-anziiloger",data:{level:"info"}}),e.emit({type:"config-system",data:{workers:1,spawn:!0}}),void e.emit({type:"config-server",data:"server"});if(e.config)for(var n in e.config.hasOwnProperty("logger")&&e.emit({type:"config-anziiloger",data:e.config.logger}),e.enviroment(),e.config.hasOwnProperty("cluster")&&e.emit({type:"config-system",data:e.config.cluster}),t)"router"===n&&(t.views?(e.emit({type:"config-request",data:t[n]}),e.emit({type:"config-view",data:{routes:t[n],handlers:t.views}})):(e.emit({type:"config-request",data:t[n]}),e.emit({type:"config-view",data:t[n]}))),"logger"===n&&"views"===n||(e.emit({type:"config-".concat(n),data:t[n]}),"domain"===n&&e.emit({type:"config-domain-resources",data:""}))}function Re(){var e=this,t=e.envObserver;if(e.supportsColor,e.envObserver.has("enviroment"))if(e.aliases.hasOwnProperty(t.enviroment)){e.env=e.aliases[t.enviroment];var n=t.get(e.env);if(n.hasOwnProperty("database")){var o,a=[],i=n.database;for(o in i)a.push({name:o,connect:i[o].connect});e.emit({type:"config-dman",data:{clients:a}})}t.has("appOrphic")?e.emit({type:"save-jwt-key",data:{key:t.appOrphic.flaDev}}):e.emit({type:"save-jwt-key",data:{key:"f124sfet48tq3dfmlvoszx1"}})}else e.log("Enviroment config invalid, resorting to default","warn")}var Ne=n(14),Ie=n(4),ke=n(0),Ce=n(2);n(0),n(1);var Ae=null;process.env.SUPPRESS_NO_CONFIG_WARNING||(process.env.SUPPRESS_NO_CONFIG_WARNING="false");function De(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,De),this.pao=e,this.config=Ae,this.envObserver=xe,this.supportsColor=He,this.env="development",this.aliases={development:"dev",production:"prod",staging:"stage"},this.init=be,this.setLogNamespaces=ye,this.getConfigFile=Te,this.configure=Se,this.enviroment=Re}var xe=n(15),He=n(16);function Pe(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function Fe(s){return function(){var e=this,r=arguments;return new Promise(function(t,n){var o=s.apply(e,r);function a(e){Pe(o,t,n,a,i,"next",e)}function i(e){Pe(o,t,n,a,i,"throw",e)}a(void 0)})}}function je(){this.setDebugger(this.constructor.name),this.aLog({message:"Anziilger has been initialised"}),this.listens({"config-anziiloger":this.handleAnziilogerConfig.bind(this),"anziiloger-log":this.handleLogRequest.bind(this)})}function qe(e){var t=this,n=t.pao;if(t.pao.pa_wiLog("HANDLELOGREQUEST"),t.pao.pa_wiLog(e),t.pao.pa_wiLog(e.source),!(0<=n.PROMPT.indexOf("cli")))if(t.logger)switch(e.type){case"info":t.info(e);break;case"warn":t.warn(e);break;case"error":t.error(e);break;case"adLog":t.aLog(e);break;case"wiLog":t.iLog(e);break;default:t.debug(e)}else console.log(e.source,"logged message: ",e.message," of type ",e.type)}function Me(){var e=this;e.pao,new Date,e.logger=new e.winlo.createLogger({transports:[new e.winlo.transports.Console({level:"debug",label:"Anzilloger",timestamp:!0,colorize:!0}),new e.winlo.transports.Console({level:"info",label:"Anzilloger",timestamp:!0,colorize:!0}),new e.winlo.transports.Console({level:"warn",label:"Anzilloger",timestamp:!0,colorize:!0}),new e.winlo.transports.Console({level:"error",label:"Anzilloger",timestamp:!0,colorize:!0})]})}var Ue=function(){var e=Fe(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(n=this).pao,!(0,o.pa_contains)(t,"sync")){e.next=26;break}if(n.debugas.hasOwnProperty(t.source.toLowerCase()))return n.iLog({message:"Logging info sync with debugas"}),n.iLog({message:n.debugas[t.source.toLowerCase()]}),n.debugas[t.source.toLowerCase()].useColors||(n.debugas[t.source.toLowerCase()].useColors=!0),n.debugas[t.source.toLowerCase()].enabled||"production"!==proccess.env.NODE_ENV||(n.debugas[t.source.toLowerCase()].enabled=!0),e.next=11,n.debugas[t.source.toLowerCase()](t.message);e.next=13;break;case 11:e.next=24;break;case 13:return e.prev=13,n.iLog({message:"Logging info sync"}),n.iLog({message:t.source}),e.next=18,n.logger.debug("".concat(t.source,": ").concat(t.message));case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(13),n.iLog({message:"Logging info::WITH ERROR"}),console.log(e.t0);case 24:e.next=27;break;case 26:if(n.debugas.hasOwnProperty(t.source.toLowerCase()))n.iLog({message:"Logging info sync with debugas::NONESYNC"}),n.iLog({message:n.debugas[t.source.toLowerCase()]}),n.debugas[t.source.toLowerCase()].useColors||(n.debugas[t.source.toLowerCase()].useColors=!0),n.debugas[t.source.toLowerCase()](t.message);else try{n.iLog({message:"Logging info sync::noneSync"}),n.iLog({message:t.source}),n.logger.debug("".concat(t.source,": ").concat(t.message))}catch(e){n.iLog({message:"Logging infoNONESYNC::WITH ERROR"}),console.log(e)}case 27:case"end":return e.stop()}},e,this,[[13,20]])}));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Fe(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(n=this).pao,!(0,o.pa_contains)(t,"sync")){e.next=14;break}if(n.debugas.hasOwnProperty(t.source.toLowerCase()))return n.debugas[t.source.toLowerCase()].useColors||(n.debugas[t.source.toLowerCase()].useColors=!0),e.next=8,n.debugas[t.source.toLowerCase()](t.message);e.next=10;break;case 8:e.next=12;break;case 10:return e.next=12,n.logger.debug("".concat(t.source,": ").concat(t.message));case 12:e.next=15;break;case 14:n.debugas.hasOwnProperty(t.source.toLowerCase())?(n.debugas[t.source.toLowerCase()].useColors||(n.debugas[t.source.toLowerCase()].useColors=!0),n.debugas[t.source.toLowerCase()](t.message)):n.logger.debug("".concat(t.source,": ").concat(t.message));case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),We=function(){var e=Fe(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(n=this).pao,!(0,o.pa_contains)(t,"sync")){e.next=18;break}if(n.debugas.hasOwnProperty(t.source.toLowerCase()))return n.iLog({message:"Logging warn sync with debugas"}),n.iLog(n.debugas[t.source.toLowerCase()]),n.debugas[t.source.toLowerCase()].useColors||(n.debugas[t.source.toLowerCase()].useColors=!0),e.next=10,n.debugas[t.source.toLowerCase()](t.message);e.next=12;break;case 10:e.next=16;break;case 12:return n.iLog({message:"Logging warn sync"}),n.iLog({message:t.source}),e.next=16,n.logger.warn("".concat(t.source,": ").concat(t.message));case 16:e.next=19;break;case 18:n.debugas.hasOwnProperty(t.source.toLowerCase())?(n.iLog({message:"Logging warn sync with debugas:NONESYNC"}),n.iLog({message:n.debugas[t.source.toLowerCase()]}),n.debugas[t.source.toLowerCase()].useColors||(n.debugas[t.source.toLowerCase()].useColors=!0),n.debugas[t.source.toLowerCase()](t.message)):(n.iLog({message:"Logging warn NONESYNC"}),n.iLog({message:t.source}),n.logger.warn("".concat(t.source,": ").concat(t.message)));case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Ge=function(){var e=Fe(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(n=this).pao,(0,o.pa_contains)(t,"sync"))return e.next=6,n.logger.error("".concat(t.source,": ").concat(t.message));e.next=8;break;case 6:e.next=9;break;case 8:n.logger.error("".concat(t.source,": ").concat(t.message));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Ve=function(){var e=Fe(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this,process.env.SHOW_ANZII_DEBUG_LOGS){e.next=3;break}return e.abrupt("return");case 3:if("true"!==process.env.SHOW_ANZII_DEBUG_LOGS.trim().toLowerCase())return e.abrupt("return");e.next=5;break;case 5:n.pao.pa_wiLog("aLog:ANZIILOGER"),n.pao.pa_wiLog(process.env.SHOW_ANZII_DEBUG_LOGS),console.log(t.message);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=Fe(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this,process.env.SHOW_ANZII_WI_LOGS){e.next=3;break}return e.abrupt("return");case 3:if("true"!==process.env.SHOW_ANZII_WI_LOGS.trim().toLowerCase())return e.abrupt("return");e.next=5;break;case 5:n.pao.pa_wiLog("iLog:ANZIILOGER"),n.pao.pa_wiLog(process.env.SHOW_ANZII_WI_LOGS),console.log(t.message);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=Fe(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this,o=t.toLowerCase(),n.debugas[o]=n.debugr("anzii:".concat(o));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();function ze(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ze),this.pao=e,this.winlo=Qe,this.debugr=Ye,this.logger={true:!0},this.debugas={},this.defaultTransports=[{trans:"File",level:"info",handleExceptions:!0,json:!0,label:"Anzilloger",maxsize:5242880,maxFiles:5,timestamp:!0,colorize:!1},{trans:"Console",level:"debug",handleExceptions:!0,json:!1,timestamp:!0,colorize:!0}],this.init=je,this.handleLogRequest=qe,this.handleAnziilogerConfig=Me,this.info=Ue,this.warn=We,this.error=Ge,this.debug=Be,this.aLog=Ve,this.iLog=Je,this.setDebugger=Ke}var Qe=n(17),Ye=n(18);function Xe(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function Ze(){this.adLog("System has been initialised"),this.listens({"config-system":this.handleConfigureSystem.bind(this),"register-shutdown-candidate":this.handleRegisterShutDownCandidate.bind(this),"distribute-system-resources":this.handleDistributeSystemResources.bind(this),"attach-workers-to-server":this.handleServerAttachWorkers.bind(this)})}function $e(e){var t=this;t.pao.pa_wiLog("System ENVIROMENT IS: ".concat(t.env)),t.pao.pa_wiLog(t.systemBase.DOCUMENT_ROOT),t.handleShutDowns(),t.clusterCustomConfig=e,t.adLog("The system is about to emit system resources to premier modules"),t.emit({type:"take-premier-system-base",data:{systemBase:t.systemBase}})}function et(e,t){var n=this;n.error("SHUTDOWN TYPE: ".concat(e,",code: ").concat(t)),n.systemIsShuttingDown=!0,0<n.shutDownServices.length&&n.shutDownServices.forEach(function(e,t){"function"!=typeof e?n.error("Service: ".concat(n.shutDownOrder[t]," must be a function,shutdown attempt failed"),"warn"):n.error("Service: ".concat(n.shutDownOrder[t]," is shutting down"),"info")}),n.error("System is shutting down through: ".concat(e,",with code: ").concat(t.stack)),"uncaughtException"===e?n.context.kill(1):n.context[e]()}function tt(e){var o=this;if(o.pao.pa_wiLog("THE STATUS OF isMaster: ".concat(o.cluster.isMaster)),o.cluster.isMaster)if(o.pao.pa_wiLog("Master ".concat(o.context.pid," is running")),o.clusterCustomConfig&&o.clusterCustomConfig.spawn){var t=o.clusterCustomConfig.workers?o.clusterCustomConfig.workers:"auto";if("auto"===t){t=o.os.cpus().length;for(;t<t;0)o.cluster.fork()}else if("number"==typeof t)for(var n=0;n<t;n++)o.pao.pa_wiLog("Forking slave number: ".concat(n)),o.cluster.fork();o.cluster.on("fork",function(e){o.pao.pa_wiLog("cluster forking new worker",e.id)});var a=null;o.cluster.on("listening",function(e,t){o.pao.pa_wiLog("cluster listening new worker",e.id),null===a&&(o.pao.pa_wiLog("Making worker "+e.id+" to main worker"),a=e.id,e.send({singleProcessTasks:"startSingleProcessTasks"}))}),o.cluster.on("exit",function(e,t,n){o.pao.pa_wiLog("worker ".concat(e.process.pid," died")),o.pao.pa_wiLog("FORKING ANOTHER WORK"),o.pao.pa_wiLog("Worker %d died :(",e.id),e.id===a&&(o.pao.pa_wiLog("Main Worker is dead..."),a=null),o.pao.pa_wiLog("I am here"),o.pao.pa_wiLog(e),o.pao.pa_wiLog(t),o.pao.pa_wiLog(n),o.cluster.fork()})}else o.adLog("System is running on a single thread/core"),e.listen(o.context.env.PORT||3e3,function(){o.infoSync("The Server is listening via workers"),o.adLog("THIS WORKER RUNNING IP:")});else o.pao.pa_wiLog("Worker ".concat(process.pid," started")),e.listen(o.context.env.PORT||3e3,function(){var e=o.context.env.PORT||3e3;o.infoSync("The Application is running on PID:: ".concat(process.pid," and listening on port: ").concat(e)),o.adLog("The Application is listening via workers"),o.pao.pa_wiLog("THIS WORKER RUNNING IP:")}),process.on("message",function(e){o.pao.pa_wiLog("Worker "+process.pid+" received message from master.",e),"startSingleProcessTasks"==e.singleProcessTasks&&o.emit({type:"start-single-process-tasks",data:""})})}function nt(){var t=this;t.pao.pa_wiLog("Shutdowns are being handled"),t.context.on("INT",function(e){t.systemIsShuttingDown?t.pao.pa_wiLog("System is already ShuttingDown"):t.shutDown("kill",e)}),t.context.on("SIGTEM",function(e){t.systemIsShuttingDown?t.pao.pa_wiLog("System is already ShuttingDown"):t.shutDown("exit",e)}),t.context.on("uncaughtException",function(e){t.systemIsShuttingDown?t.pao.pa_wiLog("System is already ShuttingDown"):t.shutDown("uncaughtException",e)}),t.context.on("unhandledRejection",function(e){t.pao.pa_wiLog("uncaughtException occured from unhandleredjected",e.stack),t.systemIsShuttingDown?t.pao.pa_wiLog("System is already ShuttingDown"):t.shutDown("uncaughtException",e)})}function ot(e){this.masterWorker(e.app)}function at(e){e.hasOwnProperty("candidate")&&pao.pa_isFunction(e.candidate)&&e.hasOwnProperty("name")&&pao.pa_isString(name)?-1<this.shutDownServices.indexOf(e.name)||(this.shutDownServices.push(e.candidate),this.shutDownOrder.push(e.name)):this.pao.pa_wiLog("Candidate could not be registered for shutdown","warn")}var it=function(){var s,e=(s=regeneratorRuntime.mark(function e(t){var n,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=this).pao,i.pa_getFiles,i.pa_getDirectories,i.pa_getFile,a=i.pa_makeDirs,o=i.pa_getExtension,i=n.path,"".concat(n.systemBase.DOCUMENT_ROOT),"".concat(n.systemBase.DOCUMENT_ROOT).concat(i.sep,"sev.js"),i="".concat(n.systemBase.DOCUMENT_ROOT).concat(i.sep),e.next=13,a(i);case 13:a=e.sent,i=o("sev.js"),n.pao.pa_wiLog(i),n.pao.pa_wiLog(a),n.emit({type:"take-system-base",data:{systemBase:n.systemBase}});case 18:case"end":return e.stop()}},e,this)}),function(){var e=this,r=arguments;return new Promise(function(t,n){var o=s.apply(e,r);function a(e){Xe(o,t,n,a,i,"next",e)}function i(e){Xe(o,t,n,a,i,"throw",e)}a(void 0)})});return function(){return e.apply(this,arguments)}}();function rt(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,rt),this.pao=e,this.context=process,this.env=this.context.env,this.cluster=st,this.os=ct,this.path=ut,this.shutDownServices=[],this.numOfDBSD=3,this.allowedDBSTR=1e4,this.systemIsShuttingDown=!1,this.shutDownOrder=[],this.systemBase={DOCUMENT_ROOT:process.cwd()},this.init=Ze,this.handleConfigureSystem=$e,this.handleRegisterShutDownCandidate=at,this.handleServerAttachWorkers=ot,this.handleDistributeSystemResources=it,this.masterWorker=tt,this.handleShutDowns=nt,this.shutDown=et}var st=n(19),ct=(n(20),n(3)),ut=n(0);function pt(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function lt(o){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(a),!0).forEach(function(e){var t,n;t=o,e=a[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):pt(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})}return o}function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function ft(s){return function(){var e=this,r=arguments;return new Promise(function(t,n){var o=s.apply(e,r);function a(e){ht(o,t,n,a,i,"next",e)}function i(e){ht(o,t,n,a,i,"throw",e)}a(void 0)})}}function gt(e){return function(e){if(Array.isArray(e))return wt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function mt(){this.adLog("Mysql has been initialised"),this.listens({"mysql-data-request":this.handleMysqlDataRequest.bind(this)})}function Et(e){var t=this,n=t.pao;n.pa_contains(e,["conn","table","opi","query","outComehandler"])?n.pa_isObject(e.conn)?n.pa_isString(e.table)?"deletemultiple"===e.opi.trim()||t[e.opi]?(t.pao.pa_wiLog("THE CODE GOES THIS FAR"),"insert"===e.opi?(e.opi="insertOne",t[e.opi](e),t.pao.pa_wiLog("this runs after opi finishes")):"find"===e.opi?t[e.opi](e):"updateOne"===e.opi?(e.opi="updateOne",t[e.opi](e)):"transaction"===e.opi?(e.opi="transaction",t[e.opi](e)):"procedure"===e.opi?(e.opi="procedure",t[e.opi](e)):"join"===e.opi?(e.opi="join",t[e.opi](e)):"search"===e.opi?(e.opi="search",t[e.opi](e)):"remove"===e.opi?(e.opi="remove",t[e.opi](e)):"updateandtake"!==e.opi&&"insertandtake"!==e.opi&&"deleteandtake"!==e.opi&&"deletemultiple"===e.opi?t.deleteandtake(e):t[e.opi](e)):(t.pao.pa_wiLog("DATA.OPI IS NOT CONTAINED AS FUNCTION"),t.pao.pa_wiLog("deletemultiple"!==e.opi.trim()),t.pao.pa_wiLog(e.opi),e.outComehandler({message:"The specified operation is not supported"})):t.pao.pa_wiLog("THE TABLE NAME IS NOT A STRING"):t.pao.pa_wiLog("THE connection is not object"):(t.pao.pa_wiLog("Data request operations failed"),e.outComehandler({message:"Database operation failed"}))}function Lt(o){var a=this;if(a.pao.pa_isObject(o))try{var i=o.outComehandler,e=o.conn,t=o.query;a.pao.pa_wiLog("THE INSERT OBJECT"),a.pao.pa_wiLog(o);var t=[o.table,["id"].concat(gt(t.fields)),[null].concat(gt(t.values))],t=e.format("INSERT INTO ?? (??) VALUES(?)",t);a.pao.pa_wiLog("THE SQL STATEMENT"),a.pao.pa_wiLog(t),e.query(t,function(e,t,n){return a.pao.pa_wiLog("INSERT RESULT"),a.pao.pa_wiLog(t),a.pao.pa_wiLog(e),e?i(e,null):(t.user=o.values,a.pao.pa_wiLog(t.user),void i(null,t))})}catch(e){a.pao.pa_wiLog("CAUTH ERROR"),a.pao.pa_wiLog(e),handler(e,null)}else;}function vt(e){if(this.pao.pa_isObject(data))try{var o="INSERT INTO ?? (?) VALUES(?)",a=[];e.bulk.forEach(function(e,t){var n=[e.table,gt(e.fields),gt(e.values)];o=conn.format(o,n),conn.query(o,e,function(e,t,n){e||a.push(t)})}),this.pao.pa_wiLog("bulk insert completed"),handler(null,a)}catch(e){handler(e,null)}else;}function _t(e){var t=this;t.pao.pa_wiLog("THE UPDATIKS"),t.pao.pa_wiLog(e);var n=t.pao,o=e.conn,a=e.outComehandler,i=lt({table:e.table},e.query);if(n.pa_isObject(e))try{var r=t.queryTemplate(t.queryOptions(i),"update");t.pao.pa_wiLog("THE SQLKIKS OBJECT UPDATE"),t.pao.pa_wiLog(r),s=[r.attribs.from.table],r=r.statement;var s=s;t.pao.pa_wiLog("THE SQL BEFORE FORMAT"),t.pao.pa_wiLog(r),r=o.format(r,s),t.pao.pa_wiLog(r),o.query(r,function(e,t,n){e&&a(e,null),a(null,t)})}catch(e){a(e,null)}else;}function Ot(e){this.pao.pa_wiLog("UPDATE OPTIONS"),this.pao.pa_wiLog(e);var t={};switch(t.attribs={from:e.from,tables:e.tables},e.length){case 2:t.statement="UPDATE ??\n                            JOIN ".concat(e.tables[0],"\n                              ON ").concat(e.joinPoints[0],"\n                            SET ").concat(e.set,"\n                            WHERE ").concat(e.from.condition,"\n                            ");break;case 3:t.statement="UPDATE ??,??,??\n                              JOIN ".concat(e.tables[0],"\n                                ON ").concat(e.conditions[0],"\n                              JOIN ").concat(e.tables[1],"\n                                ON ").concat(e.conditions[1],"\n                              SET ").concat(e.set,"\n                              WHERE ").concat(e.from.condition,"\n                              \n                              ");break;case 4:t.statement="UPDATE ??,??,??,??\n                            JOIN ".concat(e.tables[0],"\n                              ON ").concat(e.conditions[0],"\n                            JOIN ").concat(e.tables[1],"\n                              ON ").concat(e.conditions[1],"\n                            JOIN ").concat(e.tables[2],"\n                            ON ").concat(e.conditions[2],"\n                            SET ").concat(e.set,"\n                            WHERE ").concat(e.from.condition,"\n                            \n                            ");break;default:t.statement="UPDATE ??\n                            SET ".concat(e.set,"\n                            WHERE ").concat(e.from.condition,"\n                            \n                            ")}return t}function bt(i,r){var s=this,c=s.pao.pa_contains;return s.pao.pa_wiLog("THE SEARCH"),s.pao.pa_wiLog(an),new Promise(function(o,a){s.pao.pa_wiLog("Executing the search promise");var e,t=null,n=s.searchStatement(i);s.pao.pa_wiLog("THE SQLKIKS OBJECT"),s.pao.pa_wiLog(n),t=c(n.attribs,"tables")?[n.attribs.from.table].concat(gt(n.attribs.tables)):[n.attribs.from.table],e=n.statement;s.pao.pa_wiLog("THE SQL BEFORE FORMAT::"),s.pao.pa_wiLog(e),e=r.format(e,t),s.pao.pa_wiLog(e),r.query(e,function(e,t,n){e?(s.pao.pa_wiLog("Promise is rejecting search"),s.pao.pa_wiLog(e),a(e)):(s.pao.pa_wiLog("Promise is Resolving search"),s.pao.pa_wiLog(t),s.pao.pa_wiLog(t[0]),o(t))})})}function yt(e){var t=this,n=t.pao,o=n.pa_contains,a=e.conn,i=e.outComehandler;if(n.pa_isObject(e))try{var r=null,s=t.queryTemplate(t.searchOptions(e),"delete");t.pao.pa_wiLog("THE SQLKIKS OBJECT DELETEDANDTAKE[REMOVE]"),t.pao.pa_wiLog(s),r=o(s.attribs,"tables")?[].concat(gt(s.attribs.tables),[s.attribs.from.table]):[s.attribs.from.table],s=s.statement;r=r;t.pao.pa_wiLog("THE SQL BEFORE FORMAT"),t.pao.pa_wiLog(s),s=a.format(s,r),t.pao.pa_wiLog(s),a.query(s,function(e,t,n){return e?i(e,null):void i(null,t)})}catch(e){i(e,null)}else;}function Tt(e){var t=this,n=t.pao,o=e.conn,a=e.outComehandler,i=lt({table:e.table},e.query);if(n.pa_isObject(e))try{var r=t.queryTemplate(t.queryOptions(i),"delete");t.pao.pa_wiLog("THE SQLKIKS OBJECT DELETED[REMOVE]"),t.pao.pa_wiLog(r),s=[r.attribs.from.table],r=r.statement;var s=s;t.pao.pa_wiLog("THE SQL BEFORE FORMAT"),t.pao.pa_wiLog(r),r=o.format(r,s),t.pao.pa_wiLog(r),o.query(r,function(e,t,n){e&&a(e,null),a(null,t)})}catch(e){a(e,null)}else;}function St(e){var t=this;t.pao.pa_wiLog("THE search BATCH ITEM"),t.pao.pa_wiLog(e);var n=t.pao.pa_contains,o={};return e.conditions?o.from={table:e.table,condition:t.searchConditionsFormat(e.conditions)}:o.from={table:e.table},t.pao.pa_wiLog("THE CODE GETS HERE"),t.pao.pa_wiLog(o),n(e,["returnFields","opiks"])?o.fields=t.searchFieldsFormat(e.opiks,e.returnFields):n(e,"opiks")?o.fields=t.searchFieldsFormat(e.opiks):!n(e,"returnFields")||1===e.returnFields.length&&"all"===e.returnFields[0].trim()?o.fields="*":o.fields=e.returnFields,n(e,"take")&&(o.take=e.take),n(e,"range")&&(o.range=e.range),n(e,"sort")&&(o.sort=e.sort),n(e,"set")&&(o.set=t.set(e.set)),n(e,"takeFrom")&&(e.takeFrom.conditions?(o.takeFrom=e.takeFrom,o.takeFrom.condition=t.searchConditionsFormat(e.takeFrom.conditions)):o.takeFrom=e.takeFrom),t.pao.pa_wiLog("THE OPTIONS"),t.pao.pa_wiLog(o),o}function Rt(e,t){var n=this,o=n.pao.pa_contains;if(n.pao.pa_wiLog("THE QUERY TEMPLATE"),n.pao.pa_wiLog(e),"select"===t){var a={};a.attribs={from:e.from};var i=" ",r=e.sort?n.sort(e.sort):" ";return e.take?i=n.limit(e.take,"take"):e.range&&(i=n.limit(e.range,"range")),o(e.from,"condition")?a.statement="SELECT ".concat(e.fields,"\n                              FROM  ??\n                              WHERE ").concat(e.from.condition,"\n                              ").concat(r,"\n                              ").concat(i,"\n\n                              "):a.statement="SELECT ".concat(e.fields,"\n                              FROM  ??\n                              ").concat(r,"\n                              ").concat(i,"\n                              "),a}if("update"===t){a={};return a.attribs={from:e.from},a.statement="UPDATE ??\n                            SET ".concat(e.set,"\n                            WHERE ").concat(e.from.condition,"\n                            "),a}if("delete"===t){if(e.length){var s={};switch(s.attribs={from:e.from,tables:e.tables},e.tables.unshift(e.from.table),n.pao.pa_wiLog("DELETE OPTIONS OBJECT"),n.pao.pa_wiLog(e),n.pao.pa_wiLog(e.tables),n.pao.pa_wiLog(e.length),e.length){case 3:s.statement="DELETE ??,??,??\n                                  FROM ??\n                                  JOIN ".concat(e.tables[1],"\n                                    ON ").concat(e.joinPoints[0],"\n                                  JOIN ").concat(e.tables[2],"\n                                    ON ").concat(e.joinPoints[1],"\n                                  WHERE ").concat(e.from.condition,"\n                                  \n                                  ");break;case 4:s.statement="DELETE ??,??,??,??\n                                FROM ??\n                                JOIN ".concat(e.tables[1],"\n                                  ON ").concat(e.joinPoints[0],"\n                                JOIN ").concat(e.tables[2],"\n                                  ON ").concat(e.joinPoints[1],"\n                                JOIN ").concat(e.tables[3],"\n                                ON ").concat(e.joinPoints[3],"\n                                WHERE ").concat(e.from.condition,"\n                                \n                                ");break;default:s.statement="DELETE ??,??\n                                  FROM ??\n                                  JOIN ".concat(e.tables[1],"\n                                    ON ").concat(e.joinPoints[0],"\n                                  WHERE ").concat(e.from.condition,"\n                                  \n                                  ")}return n.pao.pa_wiLog("SQL ATTRRIBS"),n.pao.pa_wiLog(s),s}s={};return s.attribs={from:e.from},s.statement="DELETE\n                                FROM ??\n                                ",e.from.condition&&(s.statement+=" WHERE ".concat(e.from.condition)),s}}function Nt(e){"function"==typeof e.query?e.query():this.TRANSACTION(e.query,e.conn,e.outComehandler)}function It(e){this.pao.pa_wiLog("THE procedure got a call"),"function"==typeof e.query?e.query():(this.pao.pa_wiLog("INSIDE PROCEDURE"),this.PROCEDURE(e.query,e.conn,e.outComehandler))}function kt(e){this.pao.pa_wiLog("THE procedure got a call"),"function"==typeof e.query?e.query():(this.pao.pa_wiLog("INSIDE JOIN"),this.JOIN(e.query,e.conn,e.outComehandler))}function Ct(e,t,n){for(var o=2<arguments.length&&void 0!==n?n:null,a=this,i=a.pao,r=[],s=!1,c=0;c<e.length;c++){var u=e[c],p=null,l=null,d=null;if(!i.pa_contains(u,"fields")){o("Required collection/table field missing");break}if(i.pa_contains(u.fields,"tables")&&(l=u.fields.tables,d=u.fields.own),l&&(p=a.combineFields(l,d,r)),p&&(u.fields=p),a.insert(u,t).then(function(e){r.push(e)}).catch(function(e){a.rollback(r),o(e,null),s=!0}),s)break;c===e.length-1&&(a.pao.pa_wiLog("Operation completed successfully"),o("Transaction Operation sucessful"))}}function At(i,r){var s=this;return new Promise(function(a,o){s.pao.pa_wiLog("Executing the insert promise");var e=[i.name,i.fields],t=r.format("INSERT INTO ?? SET ?",e);r.query(t,function(e,t,n){e?(s.pao.pa_wiLog("Promise is rejecting"),o(e)):s.findOne({conn:r,table:i.name,query:{user:{id:t.insertId}},outComehandler:function(e,t,n){var o=0<arguments.length&&void 0!==e?e:null,e=1<arguments.length&&void 0!==t?t:null,t=2<arguments.length&&void 0!==n?n:null,n={};o?(s.pao.pa_wiLog("the errorINSERT"),s.pao.pa_wiLog(o),s.pao.pa_wiLog(t),n.error=o,n.lastInsert=t.query.user.id,n.fields=null,n.collection=t.table,s.pao.pa_wiLog("Promise is Resolving with findOne error")):(n.lastInsert=t.query.user.id,n.fields=e,n.collection=t.table,s.pao.pa_wiLog("Promise is Resolving with FindOne SUCCESS")),s.pao.pa_wiLog(n),a(n)}})})})}function Dt(e,n,o){var a=this,i={};return a.pao.pa_wiLog("COMBINE FIELDS GETS A CALL"),e.forEach(function(e,t){for(var n=0;n<o.length;n++){if("break"===function(n){if(o[n].collection===e.name)return e.values.forEach(function(e,t){a.pao.pa_wiLog("THE VV"),a.pao.pa_wiLog(e);e=e.split(".");a.pao.pa_wiLog("FIELD VALUE PAIR"),a.pao.pa_wiLog(e),i[e[1]]=o[n].fields[e[0]]}),"break"}(n))break}}),e=Object.keys(n),a.pao.pa_wiLog("THE KEYS OF OWN"),a.pao.pa_wiLog(e),e.forEach(function(e,t){i[e]=n[e]}),a.pao.pa_wiLog("THE FIELDS"),a.pao.pa_wiLog(i),i}function xt(e){var n=this;e.forEach(function(e,t){n.deleteOne({id:e.lastInsert},conn)})}function Ht(n,i){var r=this;return new Promise(function(o,a){r.pao.pa_wiLog("Executing the JOIN promise");var e={fields:n.returnFields,from:{table:n.tables[0],condition:r.joinConditionsFormat(n.conditions)},joinPoints:r.joinConditionsFormat(n.joinPoints,"ON"),tables:n.tables.splice(1,n.tables.length),type:n.type.toUpperCase(),length:n.joins},t=r.joinStatement(e),e=[e.from.table,e.tables[0]];r.pao.pa_wiLog("THE SQL BEFORE FORMAT"),r.pao.pa_wiLog(t),t=i.format(t,e),r.pao.pa_wiLog(t),i.query(t,function(e,t,n){e?(r.pao.pa_wiLog("Promise is rejecting JOIN"),r.pao.pa_wiLog(e),a(e)):(r.pao.pa_wiLog("Promise is Resolving JOIN"),r.pao.pa_wiLog(t),r.pao.pa_wiLog(t[0]),o(t[0]))})})}function Pt(e,t){var t=1<arguments.length&&void 0!==t?t:null,o=this;if(o.pao.pa_wiLog("CONDITIONS"),o.pao.pa_wiLog(e),t){var n=[];return e.forEach(function(e,t){e=e.trim().split(" ");n.push("".concat(e[0]," ").concat("="," ").concat(e[2]))}),o.pao.pa_wiLog("THE JOIN ON CONDITION"),o.pao.pa_wiLog(n),n}var a="";return e.forEach(function(e,t){o.pao.pa_wiLog("THE con ITEM"),o.pao.pa_wiLog(e);var n=e.trim().split(" ");o.pao.pa_wiLog("THE CONLIST"),o.pao.pa_wiLog(n);e="";switch(n[1]){case"EQUALS":e="=";break;case"ISGREATEROREQUALS":e=">=";break;case"ISLESSOREQUALS":e="<=";break;default:e="="}a+="".concat(n[0]," ").concat(e," '").concat(n[2],"'")}),o.pao.pa_wiLog("THE JOIN FROM CONDITION"),o.pao.pa_wiLog(a),a.trim()}function Ft(e){switch(this.pao.pa_wiLog("THE JOIN OPTIONS"),this.pao.pa_wiLog(e),e.length){case 3:return"SELECT ".concat(e.fields,"\n               FROM ").concat(e.from.table,"\n               JOIN ").concat(e.tables[0],"\n                  ON ").concat(e.conditions[0],"\n               JOIN options.tables[1]\n                  ON ").concat(e.conditions[1],"\n               WHERE ").concat(e.from.condition,"\n               \n               ");case 4:return"SELECT ".concat(e.fields,"\n               FROM ").concat(e.from.table,"\n               JOIN ").concat(e.tables[0],"\n                  ON ").concat(e.conditions[0],"\n               JOIN options.tables[1]\n                  ON ").concat(e.conditions[1],"\n               JOIN options.tables[2]\n                  ON ").concat(e.conditions[2],"\n               WHERE ").concat(e.from.condition,"\n               \n               ");case 5:return"SELECT ".concat(e.fields,"\n               FROM ").concat(e.from.table,"\n               JOIN ").concat(e.tables[0],"\n                  ON ").concat(e.conditions[0],"\n               JOIN options.tables[1]\n                  ON ").concat(e.conditions[1],"\n               JOIN options.tables[2]\n                  ON ").concat(e.conditions[2]," \n               JOIN options.tables[3]\n                  ON ").concat(e.conditions[3],"\n               WHERE ").concat(e.from.condition,"\n               \n               ");default:return"SELECT ".concat(e.fields,"\n               FROM  ??\n               JOIN  ").concat(e.tables[0],"\n                  ON ").concat(e.joinPoints[0],"\n               WHERE ").concat(e.from.condition,"\n               ")}}function jt(i,r){var s=this,c=s.pao.pa_contains;return s.pao.pa_wiLog("THE SEARCH"),s.pao.pa_wiLog(i),new Promise(function(o,a){s.pao.pa_wiLog("Executing the search promise");var e,t=null,n=s.searchStatement(s.searchOptions(i));s.pao.pa_wiLog("THE SQLKIKS OBJECT"),s.pao.pa_wiLog(n),t=c(n.attribs,"tables")?[n.attribs.from.table].concat(gt(n.attribs.tables)):[n.attribs.from.table],e=n.statement;s.pao.pa_wiLog("THE SQL BEFORE FORMAT"),s.pao.pa_wiLog(e),e=r.format(e,t),s.pao.pa_wiLog(e),r.query(e,function(e,t,n){e?(s.pao.pa_wiLog("Promise is rejecting search"),s.pao.pa_wiLog(e),a(e)):(s.pao.pa_wiLog("Promise is Resolving search"),o(t))})})}function qt(e,t){var t=1<arguments.length&&void 0!==t?t:null,n=this;if(n.pao.pa_wiLog("CONDITIONS"),n.pao.pa_wiLog(e),n.pao,t){t=n.parseFormatCondition(e,t);return n.pao.pa_wiLog("THE search ON CONDITION"),n.pao.pa_wiLog(t),t}var o="";return e.forEach(function(e,t){0<=e.indexOf("GROUP::")?(n.pao.pa_wiLog("CONDITION FROM SEARCHCONDITIONFORMAT"),n.pao.pa_wiLog(e),o+=n.parseGroup(e)):o+=n.parseFormatCondition(e)}),n.pao.pa_wiLog("THE search FROM CONDITION"),n.pao.pa_wiLog(o),o.trim()}function Mt(e){var t=this;t.pao.pa_wiLog("THE search OPTIONSSTATEMENT"),t.pao.pa_wiLog(e);var n=t.pao.pa_contains;if(!e)return null;if(n(e,"length")){var o={};o.attribs={from:e.from,tables:e.tables},t.pao.pa_wiLog("THE OPTIONS LENGTH"),t.pao.pa_wiLog(e.length);var a=" ",i=e.sort?t.sort(e.sort):" ";switch(e.take?a=t.limit(e.take,"take"):e.range&&(a=t.limit(e.range,"range")),e.length){case 3:o.statement="SELECT ".concat(e.fields,"\n                FROM ??\n                JOIN ??\n                  ON ").concat(e.joinPoints[0],"\n                JOIN ??\n                  ON ").concat(e.joinPoints[1],"\n                WHERE ").concat(e.from.condition,"\n                ").concat(i,"\n                ").concat(a,"\n                \n                ");break;case 4:o.statement="SELECT ".concat(e.fields,"\n                FROM ").concat(e.from.table,"\n                JOIN ").concat(e.tables[0],"\n                  ON ").concat(e.joinPoints[0],"\n                JOIN ").concat(e.tables[1],"\n                  ON ").concat(e.joinPoints[1],"\n                JOIN ").concat(e.tables[2],"\n                  ON ").concat(e.joinPoints[2],"\n                WHERE ").concat(e.from.condition,"\n                ").concat(i,"\n                ").concat(a,"\n                ");break;case 5:o.statement="SELECT ".concat(e.fields,"\n                FROM ").concat(e.from.table,"\n                JOIN ").concat(e.tables[0],"\n                  ON ").concat(e.joinPoints[0],"\n                JOIN ").concat(e.tables[1],"\n                  ON ").concat(e.joinPoints[1],"\n                JOIN ").concat(e.tables[2],"\n                  ON ").concat(e.joinPoints[2]," \n                JOIN ").concat(e.tables[3],"\n                  ON ").concat(e.joinPoints[3],"\n                WHERE ").concat(e.from.condition,"\n                ").concat(i,"\n                ").concat(a,"\n                ");break;default:o.statement="SELECT ".concat(e.fields,"\n                FROM  ??\n                JOIN  ").concat(e.tables[0],"\n                  ON ").concat(e.joinPoints[0],"\n                WHERE ").concat(e.from.condition,"\n                ").concat(i,"\n                ").concat(a,"\n              ")}return o}return(i={}).attribs={from:e.from},a=" ",o=e.sort?t.sort(e.sort):" ",e.take?a=t.limit(e.take,"take"):e.range&&(a=t.limit(e.range,"range")),n(e.from,"condition")?i.statement="SELECT ".concat(e.fields,"\n              FROM  ??\n              WHERE ").concat(e.from.condition,"\n              ").concat(o,"\n              ").concat(a,"\n              "):i.statement="SELECT ".concat(e.fields,"\n                              FROM  ??\n                              ").concat(o,"\n                              ").concat(a,"\n                              "),i}function Ut(e,t){var n=1<arguments.length&&void 0!==t&&t,o=this,a=o.pao.pa_contains,i=n?gt(e.tables):"";if(o.pao.pa_wiLog("THE search BATCH ITEM"),o.pao.pa_wiLog(e),o.pao.pa_wiLog(e),a(e,["joins","conditions","joinPoints"])){o.pao.pa_wiLog("THE SEARCH ITEM CONTAINS BOTH JOINS,CONDITIONS, AND JOINPOINTS");t={};return t.from={table:e.tables[0],condition:o.searchConditionsFormat(e.conditions)},t.joinPoints=e.joinPoints?o.searchConditionsFormat(e.joinPoints,"ON"):null,t.length=e.tables.length,t.tables=e.tables.splice(1,e.tables.length),a(e,["returnFields","opiks"])?t.fields=o.searchFieldsFormat(e.opiks,e.returnFields):a(e,"opiks")?t.fields=o.searchFieldsFormat(e.opiks):a(e,"returnFields")&&(1===e.returnFields.length&&"all"===e.returnFields[0].trim()?t.fields="*":t.fields=e.returnFields),a(e,"type")&&(t.type=e.type),a(e,"take")&&(t.take=e.take),a(e,"range")&&(t.range=e.range),a(e,"soundex")&&(t.soundex=e.soundex),a(e,"sort")&&(t.sort=e.sort),a(e,"set")&&(t.set=n?o.set(e.set,i):o.set(e.set)),a(e,"takeFrom")&&(e.takeFrom.conditions?(t.takeFrom=e.takeFrom,t.takeFrom.condition=o.searchConditionsFormat(e.takeFrom.conditions)):t.takeFrom=e.takeFrom),t}if(a(e,["conditions"])){var r={};return r.from={table:e.tables[0],condition:o.searchConditionsFormat(e.conditions)},a(e,["returnFields","opiks"])?r.fields=o.searchFieldsFormat(e.opiks,e.returnFields):a(e,"opiks")?r.fields=o.searchFieldsFormat(e.opiks):a(e,"returnFields")&&(1===e.returnFields.length&&"all"===e.returnFields[0].trim()?r.fields="*":r.fields=e.returnFields),a(e,"type")&&(r.type=e.type),a(e,"take")&&(r.take=e.take),a(e,"range")&&(r.range=e.range),a(e,"soundex")&&(r.soundex=e.soundex),a(e,"sort")&&(r.sort=e.sort),a(e,"set")&&(r.set=n?o.set(e.set,i):o.set(e.set)),a(e,"takeFrom")&&(e.takeFrom.conditions?(r.takeFrom=e.takeFrom,r.takeFrom.condition=o.searchConditionsFormat(e.takeFrom.conditions)):r.takeFrom=e.takeFrom),r}if(a(e,"tables")&&e.tables instanceof Array){r={};return r.from={table:e.tables[0]},a(e,["returnFields","opiks"])?r.fields=o.searchFieldsFormat(e.opiks,e.returnFields):a(e,"opiks")?r.fields=o.searchFieldsFormat(e.opiks):a(e,"returnFields")&&(1===e.returnFields.length&&"all"===e.returnFields[0].trim()?r.fields="*":r.fields=e.returnFields),a(e,"type")&&(r.type=e.type),a(e,"take")&&(r.take=e.take),a(e,"range")&&(r.range=e.range),a(e,"soundex")&&(r.soundex=e.soundex),a(e,"sort")&&(r.sort=e.sort),a(e,"set")&&(r.set=n?o.set(e.set,i):o.set(e.set)),a(e,"takeFrom")&&(e.takeFrom.conditions?(r.takeFrom=e.takeFrom,r.takeFrom.condition=o.searchConditionsFormat(e.takeFrom.conditions)):r.takeFrom=e.takeFrom),r}return null}function Bt(e,t){var n=1<arguments.length&&void 0!==t?t:null,o=this;o.pao.pa_wiLog("THE SELECT STATEMENT OPIKS OBJECT"),o.pao.pa_wiLog(e),o.pao.pa_wiLog(n),o.pao.pa_contains;var a=e,i="",r=n?n.join(","):"",e="",s="",c=[],u=0<=r.indexOf("all"),p=!1;o.pao.pa_wiLog("THE OTHER FIELDS"),o.pao.pa_wiLog(r),o.pao.pa_wiLog(0<=r.indexOf("all"));for(var l=0;l<a.length&&((0<=a[l].indexOf("fuxin")||0<=a[l].indexOf("field"))&&c.push(!0),!(1<c.length));l++);return a.forEach(function(e,t){e=o.fieldFormat(e);e instanceof Object?i=e.value.toUpperCase():(o.pao.pa_wiLog("THE FORMATED"),o.pao.pa_wiLog(e),o.pao.pa_wiLog(u),o.pao.pa_wiLog(r),t===a.length-1&&(p=!0),s+=u?c&&t!==a.length-1?"".concat(e,","):e:p&&null===n?"".concat(e):"".concat(e,","))}),!0==u&&(e="*,"),u?"".concat(e," ").concat(i," ").concat(s):"".concat(e," ").concat(i," ").concat(s," ").concat(r)}function Wt(e,t){var n=1<arguments.length&&void 0!==t?t:null,o=this;o.pao.pa_wiLog("THE SELECT STATEMENT OPIKS OBJECT FIELD FORMAT"),o.pao.pa_wiLog(e),o.pao.pa_contains;var a="",t=0<=e.lastIndexOf(".as")?e.lastIndexOf(".as"):e.length;switch(0<=e.indexOf(".options[fuxin")&&(a=e.slice(e.indexOf(".options[fuxin"),t)),o.pao.pa_wiLog("THE NESTEDINTFUXIN"),o.pao.pa_wiLog(a),o.pao.pa_wiLog(e),""!==a.trim()&&(e=e.substr(0,e.indexOf(a))),t=e.trim().split("."),""!==a.trim()&&t.push(a),o.pao.pa_wiLog("THE FIELD LIST"),o.pao.pa_wiLog(t),e=null,a="fuxin"===t[0]&&3<t.length?"AS ".concat(o.options("".concat(t[3]),"as")):" ",o.pao.pa_wiLog("THE as"),o.pao.pa_wiLog(a),t[0]){case"keyword":e=n?t[1].toUpperCase():{statement:"keyword",value:t[1].toUpperCase()};break;case"fuxin":e=" ".concat(t[1].toUpperCase(),"(").concat(o.options("".concat(t[2]),"option"),") ").concat(a," ");break;case"field":3===t.length&&(e="".concat(t[1]," AS ").concat(o.options(t[2],"as")));break;default:e=""}return e.trim()}function Gt(e,t){var n=1<arguments.length&&void 0!==t?t:"";if((t=this).pao.pa_contains,t.pao.pa_wiLog("THE CURRENT OPTION"),t.pao.pa_wiLog(e),"undefined"===e)return t.pao.pa_wiLog("THE OPTION IS UNDEFINED"),t.pao.pa_wiLog(e),"";if(e=e.slice(e.indexOf("[")+1,e.lastIndexOf("]")),t.pao.pa_wiLog("OPTIONS: STRIPEDOPTION"),t.pao.pa_wiLog(e),"as"===n)return"".concat(e);if("option"===n){n=e.split(",");return n instanceof Array&&1<n.length?0<=n[0].indexOf("keyword")?t.fieldFormat(n[0],!0):0<=n[0].indexOf("fuxin")?n[1]?"".concat(t.fieldFormat(n[0]),",").concat(n[1].trim()):t.fieldFormat(n[0]):"".concat(e):n.join(",")}}function Vt(e){this.pao.pa_wiLog("THE SORT GOT A RESPONSE"),this.pao.pa_wiLog(e);var t=e.split("."),n=e.slice(e.indexOf("[")+1,e.lastIndexOf("]")),e="";return 0<=t[0].indexOf("order")?e=1<t.length&&"DESC"===t[1].toUpperCase()?"ORDER BY ".concat(n," DESC"):"ORDER BY ".concat(n):0<=t[0].indexOf("group")&&(e=1<t.length&&"DESC"===t[1].toUpperCase()?"GROUP BY ".concat(n," DESC"):"GROUP BY ".concat(n," ASC")),e}function Jt(e,t){var n=1<arguments.length&&void 0!==t?t:null,t="";return"take"===n?t="LIMIT ".concat(e):"range"===n&&(e=(n=e.split(","))[0],n=n[1],t="LIMIT ".concat(n," OFFSET ").concat(e)),t}function Kt(e,t){var n=1<arguments.length&&void 0!==t?t:1,o=this,a=o.pao.pa_isObject,i="",r="",t=o.conditionsConnector(e);return o.pao.pa_wiLog("THE RES VALUE"),o.pao.pa_wiLog(t),a(t)&&(o.pao.pa_wiLog("THE RES IS AN OBJECT"),o.pao.pa_wiLog(t),e=t.condixion,r=t.connector),0===e.trim().indexOf("GROUP::")&&(o.pao.pa_wiLog("THE GROUP:: string is the first"),a=e.replace("GROUP::","").trim(),e=t="",o.pao.pa_wiLog("THE extracted string"),o.pao.pa_wiLog(a),"number"==typeof parseInt(a[0])&&(o.pao.pa_wiLog("extStr type is a number"),parseInt(a[0]),0!==(t=a.slice(1).trim()).indexOf("START")&&0!==t.indexOf("$")||(e=t.replace("START","").trim(),o.pao.pa_wiLog(t),a="",t=[],o.pao.pa_wiLog("PARSEGROUP EXECUTES THIS FAR"),o.pao.pa_wiLog(e),1===n?(a=e.split(";"),o.pao.pa_wiLog("LEVEL 1 GROUPCONS"),o.pao.pa_wiLog(a),t=a.map(function(e,t){return o.pao.pa_wiLog("THE C CONDITION"),o.pao.pa_wiLog(e),o.pao.pa_wiLog(e.indexOf("GROUP::")),0<=e.indexOf("GROUP::")?o.parseGroup(e,2):o.parseFormatCondition(e)})):2===n?(a=e.split(","),o.pao.pa_wiLog("LEVEL 2 GROUPCONS"),o.pao.pa_wiLog(a),t=a.map(function(e,t){return 0<=e.indexOf("GROUP::")?o.parseGroup(e,3):o.parseFormatCondition(e)})):3===n&&(t=(a=e.split("|")).map(function(e,t){return o.parseFormatCondition(e)})),o.pao.pa_wiLog("GROUPED"),o.pao.pa_wiLog(t),o.pao.pa_wiLog(a),i="".concat(r," (").concat(t.join(" "),")")))),o.pao.pa_wiLog("THE FULL GROUPED CONDITION TO BE RETURNED:"),o.pao.pa_wiLog(i),i}function zt(e,t){var n=1<arguments.length&&void 0!==t?t:null,o=this;if(o.pao,n){var a=[];return e.forEach(function(e,t){e=e.trim().match(/(\[[^\]]+\]|\S+)/g);a.push("".concat(e[0]," ").concat("="," ").concat(e[2]))}),o.pao.pa_wiLog("THE search ON CONDITION"),o.pao.pa_wiLog(a),a}var i="";o.pao.pa_wiLog("THE con ITEM"),o.pao.pa_wiLog(e);var r=e.trim().match(/(\[[^\]]+\]|\S+)/g);o.pao.pa_wiLog("THE CONLIST"),o.pao.pa_wiLog(r);var s="",c="",u=!1,t=!1,n=!1;if("MATCH"===r[0].trim()||"MATCH"===r[1].trim()||"FUXIN"===r[1].trim()||"FUXIN"===r[2].trim())if(0<r.indexOf("AGAINST")&&5<=r.length){var p=r.slice(0);o.pao.pa_wiLog("THE O CON"),o.pao.pa_wiLog(p);var l="",e="",e=(u="MATCH"!==p[0].trim().toUpperCase())?(l=p[2].trim(),p[4].trim()):(l=p[1].trim(),p[3].trim());"["===l[0]&&(l=l.slice(1,l.length-1)),"["===e[0]&&(e=e.slice(1,e.length-1)),o.pao.pa_wiLog("THE MATCH FIELDS"),o.pao.pa_wiLog(l);var d="",s=(u?p[3]:p[2]).trim();switch(u?p[5]:p[4]){case"BOOLEAN":d='AGAINST ("'.concat(e,'"" IN BOOLEAN MODE) ');break;case"QUERY":d='AGAINST ("'.concat(e,'" IN QUERY EXPRESSION MODE) ');break;default:d='AGAINST ("'.concat(e,'" IN NATURAL LANGUAGE MODE) ')}r[0]=(u?"".concat(p[0]," MATCH ("):"MATCH (").concat(l,") ").concat(d),t=!0}else{p=r.slice(0),n=!0;o.pao.pa_wiLog("THE O CON::FUXIN"),o.pao.pa_wiLog(p);l=(u="FUXIN"!==p[1].trim().toUpperCase())?3:2,d=p.splice(l);p.push(d.join(" ")),o.pao.pa_wiLog(l),o.pao.pa_wiLog(p),0<=p[l].indexOf("[")&&(o.pao.pa_wiLog("OTHER CONTENT IS IN THE SQUARE BRACKETS"),f=(f=p[l].slice(1,p[l].length-1)).trim(),o.pao.pa_wiLog("AFTER THE STRIPED HAS BEEN TRIMMED"),o.pao.pa_wiLog(f),h=f.substr(0,f.indexOf(" ")),f=f.substr(f.indexOf(" ")+1),o.pao.pa_wiLog("THE SPLITFUXINCONS"),o.pao.pa_wiLog(h),o.pao.pa_wiLog(f),h=o.getOperand(h),f=o.fieldFormat(f),o.pao.pa_wiLog(h),o.pao.pa_wiLog(f),i=(u?"".concat(p[0]," ").concat(p[1]," "):"".concat(p[0]," ")).concat(h," ").concat(f),o.pao.pa_wiLog("THE CONDITION IN FUXIN TEST"),o.pao.pa_wiLog(i))}else{var h=r.slice(0);o.pao.pa_wiLog("THE O CON"),o.pao.pa_wiLog(h);var f=h[0].trim().toUpperCase(),f=(u="AND"===f||"OR"===f||"NOT"===f)?r[2]:r[1];o.pao.pa_wiLog("THE MULTICON STATUS:::"),o.pao.pa_wiLog(u),o.pao.pa_wiLog(h),s=o.getOperand(f),c="["===(c=u?r[3]:r[2])[0]?"'".concat(c.slice(1,c.length-1),"'"):0<=c.indexOf("KEY::")?"".concat(c.replace("KEY::","").trim()):"'".concat(c,"'"),o.pao.pa_wiLog("THE VALUE OF THE LEFFFFFT OPERAND"),o.pao.pa_wiLog(c),o.pao.pa_wiLog(c.indexOf("KEY::"))}return n||(i+=t?"".concat(r[0]):(u?"".concat(" "," ").concat(r[0]," ").concat(r[1]," "):"".concat(r[0]," ")).concat(s," ").concat(c)),o.pao.pa_wiLog("THE search FROM CONDITION"),o.pao.pa_wiLog(i),i}function Qt(e){var t="";switch(e){case"EQUALS":t="=";break;case"ISGREATEROREQUALS":t=">=";break;case"ISLESSOREQUALS":t="<=";break;case"ISLIKE":t="LIKE";break;case"ISIN":t="IN";break;case"ISREGEX":t="REGEXP";break;case"ISNOT":t="NOT";break;case"ISNOTNULL":t="IS NOT NULL";break;case"ISNULL":t="IS NULL";break;default:t="="}return t}function Yt(e){var t={};return this.pao.pa_wiLog("THE INDEX OF GROUP:: IN CONDITIONS CONNECTOR"),this.pao.pa_wiLog(e.trim().indexOf("GROUP::")),this.pao.pa_wiLog(e),0<e.trim().indexOf("GROUP::")?(this.pao.pa_wiLog("THE INDEX OF GROUP IS AT ONE"),0===e.trim().indexOf("AND")?(t.connector=" AND",t.condixion=e.replace("AND","").trim()):0===e.trim().indexOf("OR")?(t.connector=" OR",t.condixion=e.replace("OR","").trim()):0===e.trim().indexOf("NOT")&&(t.connector=" NOT",t.condixion=e.replace("NOT","").trim()),t):e}function Xt(t,e){var i=1<arguments.length&&void 0!==e&&e,r=this,s=r.pao.pa_objectToArray;r.pao.pa_wiLog("THE SET"),r.pao.pa_wiLog(t),r.pao.pa_wiLog(i);var c="";return t.forEach(function(e,n){var o="",a=s(e,!0);r.pao.pa_wiLog("THE CONVERTED SET OBJECT"),r.pao.pa_wiLog(a),a.forEach(function(e,t){o+=i?t===a.length-1?"".concat(i[n],".").concat(e.key,' = "').concat(e.value,'"'):"".concat(i[n],".").concat(e.key,' = "').concat(e.value,'", '):t===a.length-1?"".concat(e.key,' = "').concat(e.value,'"'):"".concat(e.key,' = "').concat(e.value,'", ')}),c+=n===t.length-1?"".concat(o):"".concat(o,", ")}),r.pao.pa_wiLog("THE SETSTRINGS"),r.pao.pa_wiLog(c),c}var Zt=function(){var e=ft(regeneratorRuntime.mark(function e(p){var l,d,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((d=(l=this).pao).pa_isObject(p)){e.next=6;break}return e.abrupt("return");case 6:return e.delegateYield(regeneratorRuntime.mark(function e(){var i,r,s,c,u,t,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=p.conn,r=p.outComehandler,s=[],u=!(c=[]),"MULTIPLE"===p.table.toUpperCase().trim()?(u=!0,s=p.query):s.push(p.query),t=regeneratorRuntime.mark(function e(o){var t,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,n=lt(u?{table:s[o].table}:{table:p.table},s[o]),e.prev=2,n=l.queryTemplate(l.queryOptions(n),"select"),l.pao.pa_wiLog("THE SQLKIKS OBJECT FIND"),l.pao.pa_wiLog(n),a=[n.attribs.from.table],t=n.statement,a=a,l.pao.pa_wiLog("THE SQL BEFORE FORMAT"),l.pao.pa_wiLog(t),t=i.format(t,a),l.pao.pa_wiLog(t),e.next=17,i.query(t,function(e,t,n){l.pao.pa_wiLog("THE QUERY IS COMPLETED WITH RESULTS"),l.pao.pa_wiLog(e),l.pao.pa_wiLog(t),e&&c.push(e),d.pa_isArray(t)&&0<t.length&&1!==s.length?(t=t[0],c.push(t)):c=t,o===s.length-1&&(l.pao.pa_wiLog("THE LOOP IS COMPLETE WITH DATA:"),l.pao.pa_wiLog(c),r(null,c))});case 17:e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(2),e.abrupt("return",{v:{v:r(e.t0,null)}});case 22:case"end":return e.stop()}},e,null,[[2,19]])}),n=0;case 8:if(n<s.length)return e.delegateYield(t(n),"t0",10);e.next=16;break;case 10:if("object"===dt(o=e.t0))return e.abrupt("return",o.v);e.next=13;break;case 13:n++,e.next=8;break;case 16:case"end":return e.stop()}},e)})(),"t0",7);case 7:if("object"===dt(t=e.t0))return e.abrupt("return",t.v);e.next=10;break;case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),$t=function(){var e=ft(regeneratorRuntime.mark(function e(t){var n,o,a,i,r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this).pao.pa_wiLog("THE UPDATIKANDTAKE"),n.pao.pa_wiLog(t),o=n.pao,a=t.conn,i=t.outComehandler,r=t.query,o.pa_isObject(t)){e.next=10;break}e.next=20;break;case 10:return e.prev=10,e.next=13,n.searchOptions(r,!0);case 13:s=e.sent,n.multiTableUpdate(s,a).then(function(e){0<e.changedRows?n.take(s,a,r.conditions).then(function(e){i(null,{updated:!0,taken:e})}).catch(function(e){i(e,null)}):(n.pao.pa_wiLog("NO CHANGED ROWS IN A MULTIPLE UPDATE"),n.pao.pa_wiLog(s),n.take(s,a,r.conditions).then(function(e){i(null,{updated:!1,taken:e})}).catch(function(e){i(e,null)}))}).catch(function(e){i(e,null)}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),i(e.t0,null);case 20:case"end":return e.stop()}},e,this,[[10,17]])}));return function(){return e.apply(this,arguments)}}(),en=function(){var e=ft(regeneratorRuntime.mark(function e(t){var i,n,r,s,o,c,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=this).pao.pa_wiLog("THE INSERTANDTAKE"),i.pao.pa_wiLog(t),n=i.pao,r=t.conn,s=t.outComehandler,o=t.query.insert,c=t.query.take,n.pa_isObject(t))try{a=function(){var e=ft(regeneratorRuntime.mark(function e(){var t,n,o,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<a.length&&void 0!==a[0]?a[0]:null,n=1<a.length&&void 0!==a[1]?a[1]:null,e.next=4,i.pao.pa_wiLog("THE INSERTED RECORD UPDATE");case 4:return e.next=6,i.pao.pa_wiLog(t);case 6:return e.next=8,i.pao.pa_wiLog(n);case 8:return e.next=10,i.pao.pa_wiLog(i.SEARCH);case 10:return c.conditions||(c.conditions=["id ISEQUAL ".concat(n.insertId)]),e.next=13,i.pao.pa_wiLog(c);case 13:(o={}).conn=r,o.query=c,o.outComehandler=function(){s(null,{inserted:n,taken:1<arguments.length?arguments[1]:void 0})},i.search(o);case 18:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),o.outComehandler=a.bind(i),o.conn=r,i.insertOne(o)}catch(e){s(e,null)}else;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),tn=function(){var e=ft(regeneratorRuntime.mark(function e(t){var i,n,r,s,c,u,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=this).pao.pa_wiLog("THE DELETEANDTAKE"),i.pao.pa_wiLog(t),n=i.pao,r=t.conn,s=t.outComehandler,u=c=null,t.query.remove&&(c=t.query.remove,u=t.query.take),n.pa_isObject(t))try{o=function(){var e=ft(regeneratorRuntime.mark(function e(){var t,n,o,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<a.length&&void 0!==a[0]?a[0]:null,n=1<a.length&&void 0!==a[1]?a[1]:null,e.next=4,i.pao.pa_wiLog("THE deleted RECORD UPDATE");case 4:return e.next=6,i.pao.pa_wiLog(t);case 6:return e.next=8,i.pao.pa_wiLog(n);case 8:if(u){e.next=12;break}s(null,{deleted:n}),e.next=20;break;case 12:return u.conditions||(u.conditions=c.conditions),e.next=15,i.pao.pa_wiLog(u);case 15:(o={}).conn=r,o.query=u,o.outComehandler=function(){var e=1<arguments.length?arguments[1]:void 0;i.pao.pa_wiLog("DELETED AND TAKEN OPERATION"),i.pao.pa_wiLog(n),i.pao.pa_wiLog(e),s(null,{deleted:n,taken:e})},i.search(o);case 20:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),(c=c||t.query).outComehandler=o.bind(i),c.conn=r,i.removeJoin(c)}catch(e){s(e,null)}else;case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),nn=function(){var e=ft(regeneratorRuntime.mark(function e(i,r){var s,t,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(s=this).pao,c=t.pa_contains,e.abrupt("return",new Promise(function(o,a){try{var e,t=null,n=s.updateJoinTemplate(i);s.pao.pa_wiLog("THE SQLKIKS OBJECT"),s.pao.pa_wiLog(n),t=c(n.attribs,"tables")&&n.attribs.tables?[n.attribs.from.table].concat(gt(n.attribs.tables)):[n.attribs.from.table],e=n.statement;t=t;s.pao.pa_wiLog("THE SQL BEFORE FORMAT::MULTIUPDATE"),s.pao.pa_wiLog(e),e=r.format(e,t),s.pao.pa_wiLog(e),r.query(e,function(e,t,n){return e?a(e):void o(t)})}catch(e){a(e)}}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),on=function(){var e=ft(regeneratorRuntime.mark(function e(o,a,i){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=this).pao,r.pao.pa_wiLog("TAKE:::"),r.pao.pa_wiLog(o),e.abrupt("return",new Promise(function(t,n){var e;o.takeFrom?(e=o.takeFrom,r.pao.pa_wiLog("THE TAKEFROM BY TAKEFROM"),r.pao.pa_wiLog(e),e.condition?(r.pao.pa_wiLog("THE TAKEFROM CONDITIION IS SET"),o.from.condition=e.condition,1<e.tables.length&&(o.length=e.tables.length),!o.length||e.joinPoints&&(o.joinPoints=e.joinPoints),r.takeSql(o,a).then(function(e){t(e)}).catch(function(e){n(e)})):(r.pao.pa_wiLog("THE TAKEFROM HAS NO SET CONDITIONS"),r.pao.pa_wiLog(o),delete o.length,o.from.condition=r.searchConditionsFormat([i[0]]),r.takeSql(o,a).then(function(e){t(e)}).catch(function(e){n(e)}))):(r.pao.pa_wiLog("THE TAKEFROM IS NOT DEFINED"),r.takeSql(o,a).then(function(e){t(e)}).catch(function(e){n(e)}))}));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),an=function(e){this.pao.pa_wiLog("THE search got a call"),"function"==typeof e.query?e.query():(this.pao.pa_wiLog("INSIDE SEARCH"),this.SEARCH(e.query,e.conn,e.outComehandler))},rn=function(){var e=ft(regeneratorRuntime.mark(function e(t,n){var o,a,i,r,s,c,u,p,l,d,h=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=2<h.length&&void 0!==h[2]?h[2]:null,i=(a=this).pao,a.pao.pa_wiLog("THE PROCEDURE METHOD"),a.pao.pa_wiLog(t),a.pao.pa_wiLog(o),a.pao.pa_wiLog(n),s=!(r=[]),c=0;case 10:if(!(c<t.length)){e.next=31;break}if(u=t[c],d=l=p=null,i.pa_contains(u,"fields")){e.next=20;break}return o("Required collection/table field missing"),e.abrupt("break",31);case 20:i.pa_contains(u.fields,"tables")&&(a.pao.pa_wiLog("sources will be assigned A VALUE"),l=u.fields.tables,d=u.fields.own);case 21:return l&&(p=a.combineFields(l,d,r)),p&&(u.fields=p),e.next=25,a.insert(u,n).then(function(e){r.push(e)}).catch(function(e){o(e,null),s=!0});case 25:if(s)return e.abrupt("break",31);e.next=27;break;case 27:c===t.length-1&&(a.pao.pa_wiLog("Operation completed successfully"),a.pao.pa_wiLog(r),0<r.length?(a.pao.pa_wiLog("PROCEDURE IS COMPLETED"),a.pao.pa_wiLog(r),o(null,{user:{username:r[0].fields.email}})):o("An insert has went wrong"));case 28:c++,e.next=10;break;case 31:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),sn=function(){var e=ft(regeneratorRuntime.mark(function e(t,n){var o,a,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=2<i.length&&void 0!==i[2]?i[2]:null,(a=this).pao,a.joinExek(t,n).then(function(e){a.pao.pa_wiLog("jOIN is successful, sending results to the requester"),a.pao.pa_wiLog(e),o(null,e)}).catch(function(e){a.pao.pa_wiLog("JOIN FAILED"),a.pao.pa_wiLog(e),o(e,null)});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),cn=function(){var e=ft(regeneratorRuntime.mark(function e(i,r){var s,c,t,n=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=2<n.length&&void 0!==n[2]?n[2]:null,t=(c=this).pao,c.pao.pa_wiLog("THE SEARCH search object contents"),c.pao.pa_wiLog(i),t.pa_contains(i,"batch")){e.next=9;break}c.searchExek(i,r).then(function(e){c.pao.pa_wiLog("search is successful, sending results to the requester"),s(null,e)}).catch(function(e){c.pao.pa_wiLog("search FAILED"),c.pao.pa_wiLog(e),s(e,null)}),e.next=10;break;case 9:return e.delegateYield(regeneratorRuntime.mark(function e(){var n,o,t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],o=i.search,t=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.searchExek(o[t],r).then(function(e){c.pao.pa_wiLog("search is successful, pushing results to the resultSet"),n.push(e),t===o.length-1&&(c.pao.pa_wiLog("Operation completed successfully"),s(null,n))}).catch(function(e){c.pao.pa_wiLog("search FAILED"),c.pao.pa_wiLog(e),n.push({item:t,errorMessage:"Item of ".concat(t," position has failed"),error:e})});case 2:case"end":return e.stop()}},e)}),a=0;case 4:if(a<o.length)return e.delegateYield(t(a),"t0",6);e.next=9;break;case 6:a++,e.next=4;break;case 9:case"end":return e.stop()}},e)})(),"t0",10);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();function un(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,un),this.pao=e,this.init=mt,this.handleMysqlDataRequest=Et,this.insertOne=Lt,this.insertMany=vt,this.find=Zt,this.remove=Tt,this.updateOne=_t,this.set=Xt,this.queryOptions=St,this.queryTemplate=Rt,this.TRANSACTION=Ct,this.PROCEDURE=rn,this.JOIN=sn,this.SEARCH=cn,this.procedure=It,this.transaction=Nt,this.join=kt,this.joinExek=Ht,this.joinStatement=Ft,this.joinConditionsFormat=Pt,this.search=an,this.searchExek=jt,this.searchStatement=Mt,this.searchConditionsFormat=qt,this.searchOptions=Ut,this.combineFields=Dt,this.insert=At,this.rollback=xt,this.searchFieldsFormat=Bt,this.fieldFormat=Wt,this.options=Gt,this.sort=Vt,this.limit=Jt,this.parseGroup=Kt,this.parseFormatCondition=zt,this.getOperand=Qt,this.conditionsConnector=Yt,this.updateandtake=$t,this.insertandtake=en,this.deleteandtake=tn,this.updateJoinTemplate=Ot,this.multiTableUpdate=nn,this.take=on,this.takeSql=bt,this.removeJoin=yt}function pn(){this.adLog("Dao has been initialised"),this.listens({"dao-take-dbs":this.handleDaoTakeDbs.bind(this),"data-hive-request":this.handleDataHiveRequest.bind(this)})}function ln(e){var t=this,n=t.pao;if(t.adLog("DAO"),t.adLog(e),!n.pa_contains(t.DBS,e.model.vendor))throw new Error("Specified database client is unknown");n=e.model,t.emit({type:"".concat(n.vendor,"-data-request"),data:{conn:t.DBS[n.vendor],table:n.table,opi:n.operation,query:e.document,outComehandler:e.handler}})}function dn(e){var t=this;t.pao.pa_wiLog("Handling Hive Request"),null===t.DBS&&(t.DBS={}),t.DBS[e.vendor]=e.conn}function hn(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,hn),this.pao=e,this.DBS=null,this.init=pn,this.handleDataHiveRequest=ln,this.handleDaoTakeDbs=dn}function fn(){this.adLog("Dman has been initialised"),this.listens({"config-dman":this.handleConfigureDBMan.bind(this)})}function gn(e){var n=this,o=n.pao;if(o.pa_isObject(e))if(o.pa_contains(e,"clients"))if(o.pa_isArray(e.clients)){var a=n.supportedClients;try{e.clients.forEach(function(e,t){o.pa_contains(a,e.name)?(n.pao.pa_wiLog("THE SYSTEM IS ABOUT TO CONNECT TO THE THE SERVER"),n.connectToClient(e)):n.throwError('Client: "'.concat(e.name,' is not supported by the system"'))}),0<n.DBS.length&&(n.adLog("Sending databases to the dao"),n.emit({type:"dao-take-dbs",data:{dbs:n.DBS}}))}catch(e){}}else;else n.error("System requires clients property with valid config to interface with database clients");else n.logSync("No database client specified,System will use default","warn")}function wn(e){this.adLog("System is about to connect to client: ".concat(e.name)),this.getClientDriver(e)}function mn(e){var t=this;t.pao.pa_wiLog("System is getting a client driver"),t.pao.pa_wiLog("THE OTHER DETAILS BELOW"),t.pao.pa_wiLog(e.name),t.pao.pa_wiLog("mysql"===e.name);try{"mysql"===e.name&&(t.supportedClients[e.name].driver=n(21)),t.supportedClients[e.name].driver||(t.pao.pa_wiLog("THE DRIVER REQUIREMENT FAILED"),t.throwError("Failed to get client driver module")),t.connect(e)}catch(e){t.pao.pa_wiLog("THE DRIVER CONNECT ERROR"),t.pao.pa_wiLog(e.stack)}}function En(n){var o=this;o.infoSync("System is connecting to client: ".concat(n.name));try{var e=o.supportedClients[n.name],t={host:n.connect.host,user:n.connect.user,password:n.connect.pass,database:n.connect.name},a=e.driver[e.connectMethod](t,function(e,t){e?(o.pao.pa_wiLog("THE ACTUAL CONNECTION ERROR"),o.pao.pa_wiLog(e.stack)):(o.DBS[n.name]=t,o.infoSync("System has successfully connected to client"),o.infoSync("Client ready to serve queries"))});a.connect(function(e){if(e)throw o.pao.pa_wiLog("THE SYSTEM HAS FAILED TO CONNECT TO THE DATABASE, please refer to the error below:"),o.pao.pa_wiLog(e.message),new Error(e);o.DBS[n.name]=a,o.infoSync("System has successfully connected to ".concat(n.name," database client")),o.adLog("System is handing client connection"),o.emit({type:"dao-take-dbs",data:{vendor:n.name,conn:a}}),o.adLog("Client ready to serve queries")})}catch(e){o.pao.pa_wiLog("THE CONNECTION EROR"),o.pao.pa_wiLog(e.stack)}}function Ln(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Ln),this.pao=e,this.DBS=[],this.supportedClients={mysql:{protocol:"",connectMethod:"createConnection"}},this.init=fn,this.handleConfigureDBMan=gn,this.connectToClient=wn,this.getClientDriver=mn,this.connect=En}function vn(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function _n(){this.adLog("View has been initialised"),this.listens({"config-view":this.handleConfigView.bind(this),"do-view-task":this.handleViewTask.bind(this)})}function On(e){var n=this,t=[],o=null;n.pao.pa_wiLog("views data from config"),n.pao.pa_wiLog(e),e instanceof Array?t=e:(t=e.routes,o=e.handlers),t.forEach(function(e){var t;e.view&&(e.viewty?(t="",t=0<=e.viewso.indexOf("/")?e.viewso.split("/")[1]:e.viewso,n.pao.pa_wiLog("THE VIEW HANDLER"),n.pao.pa_wiLog(e.viewso.indexOf("/")),n.pao.pa_wiLog(t),"template"===e.viewty?n.views?n.views.templates?o&&o[t]&&"function"==typeof o[t]?n.views.templates.push({match:e.path,tempPath:e.viewso,title:e.title||"Html page",handler:o[t].bind(n)}):n.views.templates.push({match:e.path,tempPath:e.viewso,title:e.title||"Html page"}):o&&o[t]&&"function"==typeof o[t]?n.views.templates=[{match:e.path,tempPath:e.viewso,title:e.title||"Html page",handler:o[t].bind(n)}]:n.views.templates=[{match:e.path,tempPath:e.viewso,title:e.title||"Html page"}]:o&&o[t]&&"function"==typeof o[t]?n.views={templates:[{match:e.path,tempPath:e.viewso,title:e.title||"Html page",handler:o[t].bind(n)}]}:n.views={templates:[{match:e.path,tempPath:e.viewso,title:e.title||"Html page"}]}:n.views?n.views.modular?n.views.modular.push({match:e.path,vHandler:e.viewso,title:e.title}):n.views.modular=[{match:e.path,vHandler:e.viewso,title:e.title}]:n.views={modular:[{match:e.path,vHandler:e.viewso,title:e.title}]}):n.views?n.views.modular?n.views.modular.push({match:e.path,vHandler:e.viewso,title:e.title}):n.views.modular=[{match:e.path,vHandler:e.viewso,title:e.title}]:n.views={modular:[{match:e.path,vHandler:e.viewso,title:e.title}]})})}function bn(e){var t=this,n=t.views;return t.pao.pa_wiLog("CHECKVIEWTYPE"),t.pao.pa_wiLog(n),n?n.templates&&t.isTemplateView(n.templates,e)?{type:"template"}:n.modular&&t.isModularView(n.modular,e)?{type:"modular"}:null:null}function yn(e,n){return e=e.filter(function(e,t){return e.match===n}),this.pao.pa_wiLog("ISVALID AS FILTERED"),this.pao.pa_wiLog(e),!(!e||1!==e.length)&&(this.validView=e[0],!0)}function Tn(e,n){return!(!(e=e.filter(function(e,t){return e.match===n}))||1!==e.length)&&(this.validView=e[0],!0)}function Sn(e,t){return e=0<arguments.length&&void 0!==e?e:null,t=1<arguments.length&&void 0!==t?t:null,this.pao,e?this.callback({message:"There was an error handling ".concat(this.validView.vHandler," view")},"renderView"):this.callback(null,{data:{type:"modular",view:t}},"renderView")}var Rn=function(){var s,e=(s=regeneratorRuntime.mark(function e(t){var n,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this,o=t.payload,a=o.parsed,i=o.user,a=a.derivedUrl||a.url,n.pao.pa_wiLog("THE VIEW DATA"),n.pao.pa_wiLog(t),n.infoSync("HANDLING VIEW TASK"),n.callback=t.callback,!(a=n.checkViewType(a))){e.next=28;break}if("template"!==a.type){e.next=24;break}if(n.pao.pa_wiLog("about to render template view"),n.validView.handler)return e.next=16,n.validView.handler(i);e.next=21;break;case 16:return(i=e.sent).title=n.validView.title,e.abrupt("return",n.callback(null,{data:{type:"template",view:n.validView.tempPath,viewData:i}},"renderView"));case 21:return e.abrupt("return",n.callback(null,{data:{type:"template",view:n.validView.tempPath,title:n.validView.title}},"renderView"));case 22:e.next=26;break;case 24:if("modular"===a.type)return e.abrupt("return",n.emit({type:"handle-".concat(n.validView.vHandler,"-view"),data:{view:n.validView,payload:o,callback:n.viewHandler.bind(n)}}));e.next=26;break;case 26:e.next=29;break;case 28:return e.abrupt("return",n.callback(null,{method:"renderView",data:!1}));case 29:case"end":return e.stop()}},e,this)}),function(){var e=this,r=arguments;return new Promise(function(t,n){var o=s.apply(e,r);function a(e){vn(o,t,n,a,i,"next",e)}function i(e){vn(o,t,n,a,i,"throw",e)}a(void 0)})});return function(){return e.apply(this,arguments)}}();function Nn(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Nn),this.pao=e,this.views=null,this.init=_n,this.handleConfigView=On,this.handleViewTask=Rn,this.checkViewType=bn,this.isTemplateView=yn,this.isModularView=Tn,this.viewHandler=Sn}function In(){this.adLog("Domain has been initialised"),this.listens({"config-domain":this.handleConfigDomain.bind(this),"take-premier-system-base":this.handleTakeSystemBase.bind(this),"set-domain-defaults":this.handleSetDomainDefaults.bind(this)})}function kn(t){var n=this,e=n.domainCandidates,o=n.path;n.pao.pa_wiLog("SETTING DOMAIN DEFAULTS"),n.pao.pa_wiLog(n.system),e.forEach(function(e){return n.pao.pa_wiLog("THE DOMAIN SETTInGS"),n.pao.pa_wiLog(e),"views"===e.name?t.app.set(e.name,o.join(n.system.DOCUMENT_ROOT,e.set)):"static"===e.name?(n.pao.pa_wiLog("DOMAIN IS STATIC"),n.pao.pa_wiLog(o.join(n.system.DOCUMENT_ROOT,e.set)),t.app.use(t.xpress.static(o.join(n.system.DOCUMENT_ROOT,e.set)))):void t.app.set(e.name,e.set)})}function Cn(e){this.pao.pa_wiLog("Configuring Domain"),this.pao.pa_wiLog(e),this.domainCandidates=e}function An(e){this.pao.pa_wiLog("THE SYSTEMBASE HANDLE"),this.pao.pa_wiLog(e),this.system=e.systemBase}function Dn(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Dn),this.pao=e,this.system=null,this.fs=Fn,this.path=Pn,this.init=In,this.handleSetDomainDefaults=kn,this.handleConfigDomain=Cn,this.handleTakeSystemBase=An}function xn(){this.adLog("Global has been initialised"),this.listens({"request-global-request":this.handleRequestGlobalRequest.bind(this)})}function Hn(e){var t=this;t.pao.pa_wiLog("The Modules: ",t.globals),t.globals&&0<t.globals.length?-1<t.globals.indexOf(e)?t.emit({type:"request-global-request-response",data:!0}):t.emit({type:"request-global-request-response",data:!1}):t.emit({type:"request-global-request-error",data:!1})}var Pn=n(0),Fn=n(1);function jn(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,jn),this.pao=e,this.globals=[],this.init=xn,this.handleRequestGlobalRequest=Hn}function qn(){this.adLog("IO has been initialised"),this.startIOShell()}function Mn(){this.adLog("Starting i/o Shell operations"),this.emit({type:"start-io-operations",data:""})}function Un(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Un),this.pao=e,this.init=qn,this.startIOShell=Mn}function Bn(e){var t=0<arguments.length&&void 0!==e?e:[],a=new this.ANZII.CORE(this.ANZII.PILLAR),i=new this.ANZII.PAO(a),n={Anziiloger:this.ESM.Esm.Anziiloger},o=["System","Middleware","Router","Request","Server","Parsers"],r=this.ESM.Esm.IO?{IO:this.ESM.Esm.IO}:null,e=!0;if(0<=i.PROMPT.indexOf("cli"))for(var s in r&&delete this.ESM.Esm.IO,this.ESM.Esm)0<=o.indexOf(s)&&delete this.ESM.Esm[s];else e=!1,r&&delete this.ESM.Esm.IO,delete r.IO,r=null;delete this.ESM.Esm.Anziiloger,t.unshift(n),t.push(this.ESM.Esm),e&&t.push(r),t.forEach(function(e){for(var t in e){var n=t.toLowerCase(),o=n;a.createModule(new e[t](i.create(n,null,t)),n,o,t),a.startModule(n,o)}})}var Wn=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.Esm={Anziiloger:ze,Mysql:un,System:rt,Middleware:v,Parsers:b,Router:W,Request:ce,View:Nn,Domain:Dn,Dao:hn,Dman:Ln,Server:Oe,Config:De,IO:Un,Global:jn}};o=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.ANZII=l,this.ESM=Wn,this.Activate=Bn},t.default=new o}]);