module.exports=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=5)}([function(module,exports){module.exports=require("path")},function(module,exports){module.exports=require("body-parser")},function(module,exports){module.exports=require("os")},function(module,exports){module.exports=require("jsonfile")},function(module,exports,__webpack_require__){function _createForOfIteratorHelper(o,F){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||F&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var os=__webpack_require__(2),util=__webpack_require__(8),async=__webpack_require__(9),extend=__webpack_require__(10),fs=__webpack_require__(11),path=__webpack_require__(0),uuid=__webpack_require__(12);module.exports={EMAIL:"",PASSWORD:"",PROMPT:process.argv||[],p_o_freeze:function p_o_freeze(o){return o instanceof Object?Object.freeze(o):null},p_clone:function p_clone(o){return o instanceof Object?JSON.parse(JSON.stringify(o)):null},p_deepMerge:function p_deepMerge(from,to){return extend(!0,to,from)},p_ane:function p_ane(obj){if(util.isError(obj))throw obj},p_initArray:function p_initArray(cnt,val){for(var v=[],isFunc=this.p_isFunction(val),i=0;i<cnt;i++)v.push(isFunc?val(i):val);return v},p_escapeRegExp:function p_escapeRegExp(str){return RegExpUtils.escape(str)},p_merge:function p_merge(from,to){return p_forEach(from,function(val,propName){to[propName]=val}),to},p_union:function p_union(a,b){var union={};return p_merge(a,union),p_merge(b,union),union},p_getTasks:function p_getTasks(iterable,getTaskFunction){for(var tasks=[],i=0;i<iterable.length;i++)tasks.push(getTaskFunction(iterable,i));return tasks},p_wrapTask:function p_wrapTask(context,func,argArray){return util.isArray(argArray)||(argArray=[]),function(callback){argArray.push(callback),func.apply(context,argArray)}},p_wrapTimedTask:function p_wrapTimedTask(context,func,name,argArray){p_isString(argArray)&&(name=argArray,argArray=[]);var task=p_wrapTask(context,func,argArray);return function(callback){var start=Date.now();task(function(err,result){callback(err,{result:result,time:Date.now()-start,start:start,name:name})})}},p_forEach:function p_forEach(iterable,handler){var internalHandler,internalIterable;if(util.isArray(iterable))internalHandler=handler,internalIterable=iterable;else{if(!p_isObject(iterable))return!1;internalIterable=Object.getOwnPropertyNames(iterable),internalHandler=function internalHandler(propName,i){handler(iterable[propName],propName,iterable,i)}}internalIterable.forEach(internalHandler)},p_arrayToHash:function p_arrayToHash(array,defaultVal){if(!util.isArray(array))return null;p_isNullOrUndefined(defaultVal)&&(defaultVal=!0);for(var hash={},i=0;i<array.length;i++)this.p_isFunction(defaultVal)?hash[defaultVal(array,i)]=array[i]:hash[array[i]]=defaultVal;return hash},p_unikify:function p_unikify(array){for(var a=array.concat(),i=0;i<a.length;++i)for(var j=i+1;j<a.length;++j)a[i]===a[j]&&a.splice(j--,1);return a},p_arrayToObj:function p_arrayToObj(array,keyFieldOrTransform,valFieldOrTransform){if(!util.isArray(array))return null;var keyIsString=p_isString(keyFieldOrTransform),keyIsFunc=this.p_isFunction(keyFieldOrTransform);if(!keyIsString&&!keyIsFunc)return null;var valIsString=p_isString(valFieldOrTransform),valIsFunc=this.p_isFunction(valFieldOrTransform);valIsString||valIsFunc||(valFieldOrTransform=null);for(var obj={},i=0;i<array.length;i++){var item=array[i],key=keyIsString?item[keyFieldOrTransform]:keyFieldOrTransform(array,i);obj[key]=valIsString?item[valFieldOrTransform]:valIsFunc?valFieldOrTransform(array,i):item}return obj},p_objArrayToHash:function p_objArrayToHash(array,hashProp){if(!util.isArray(array))return null;for(var hash={},i=0;i<array.length;i++)hash[array[i][hashProp]]=array[i];return hash},p_hashToArray:function p_hashToArray(obj,hashKeyProp){if(!p_isObject(obj))return null;var doHashKeyTransform=p_isString(hashKeyProp);return Object.keys(obj).reduce(function(prev,prop){return prev.push(obj[prop]),doHashKeyTransform&&(obj[prop][hashKeyProp]=prop),prev},[])},p_invertHash:function p_invertHash(obj){if(!p_isObject(obj))return null;var prop,new_obj={};for(prop in obj)obj.hasOwnProperty(prop)&&(new_obj[obj[prop]]=prop);return new_obj},p_copyArray:function p_copyArray(array){if(!util.isArray(array))return null;for(var clone=[],i=0;i<array.length;i++)clone.push(array[i]);return clone},p_dedupeArray:function p_dedupeArray(hash){hash=p_arrayToHash(hash);return Object.keys(hash)},p_arrayPushAll:function p_arrayPushAll(from,to){if(!util.isArray(from)||!util.isArray(to))return!1;for(var i=0;i<from.length;i++)to.push(from[i])},p_cb:function p_cb(){},p_generateUniqueID:function p_generateUniqueID(){return uuid.v4()},p_isObject:function p_isObject(value){return!this.p_isNullOrUndefined(value)&&"object"===_typeof(value)},p_isString:function p_isString(value){return!this.p_isNullOrUndefined(value)&&"string"==typeof value},p_isFunction:function p_isFunction(value){return!this.p_isNullOrUndefined(value)&&"function"==typeof value},p_isNullOrUndefined:function p_isNullOrUndefined(value){return null==value},p_isBoolean:function p_isBoolean(value){return!0===value||!1===value},p_getDirectories:function p_getDirectories(dirPath){var that=this;return new Promise(function(resolve,reject){var dirs=[];fs.readdir(dirPath,function(err,tasks){if(util.isError(err))return reject(err);tasks=that.p_getTasks(tasks,function(files,index){return function(callback){var fullPath=path.join(dirPath,files[index]);fs.stat(fullPath,function(err,stat){return util.isError(err)?reject(err):(that.p_isNullOrUndefined(stat)?console.log("WARN: Util: unstatable file encountered: %s",fullPath):stat.isDirectory()&&dirs.push(fullPath),void callback(err))})}});async.parallel(tasks,function(err){resolve(dirs)})})})},p_getFiles:function p_getFiles(dirPath,options,fileName){var that=this;return new Promise(function(resolve,reject){options=options||{recursive:!1,filter:function filter(){return!0}},console.log("The directory path"),console.log(dirPath),console.log(fileName),fs.readdir(dirPath,function(err,q){if(util.isError(err))return reject(err);console.log("The readdir results q"),console.log(q);for(var i=0;i<q.length;i++)console.log(),q[i]=path.join(dirPath,q[i]);var filePaths=[];async.whilst(function(){return 0<q.length},function(callback){var fullPath=q.shift();fs.stat(fullPath,function(meetsCriteria,stat){if(util.isError(meetsCriteria))return callback(meetsCriteria);meetsCriteria=!0;if(that.p_isFunction(options.filter)&&(meetsCriteria=options.filter(fullPath,stat)),meetsCriteria&&filePaths.push(fullPath),!options.recursive||!stat.isDirectory())return callback(null);fs.readdir(fullPath,function(err,childFiles){return util.isError(err)?callback(err):(childFiles.forEach(function(item){q.push(path.join(fullPath,item))}),void callback(null))})})},function(err){console.log("THE FILES ARRay");var filePathCont,file=dirPath+path.sep+fileName;console.log(file),-1!==filePaths.indexOf(file)?(console.log("THE IS A NEED FOR A SPECIFIC FILE"),file=(filePathCont=filePaths[filePaths.indexOf(file)]).substr(file.indexOf(fileName),filePathCont.length-1),console.log(filePathCont),console.log(file),resolve(file)):resolve(filePaths)})})})},p_getFile:function p_getFile(filePath){return new Promise(function(resolve,reject){console.log("The directory path"),console.log(filePath);var s=fs.createReadStream(filePath);s&&resolve(s)})},p_isDirectory:function p_isDirectory(){},p_mkdirs:function p_mkdirs(absoluteDirPath,isFileName){var that=this;return new Promise(function(resolve,reject){if(that.p_isFunction(isFileName)&&(isFileName=!1),!that.p_isString(absoluteDirPath))return reject(new Error("absoluteDirPath must be a valid file path"));var tasks=absoluteDirPath.split(path.sep),curr="",isWindows=-1!==os.type().toLowerCase().indexOf("windows"),tasks=that.p_getTasks(tasks,function(pieces,i){return function(callback){var p=pieces[i];if(0===p.length||isFileName&&i>=pieces.length-1)return callback();curr+=(isWindows&&0===i?"":path.sep)+p,fs.exists(curr,function(exists){return exists?callback():void fs.mkdir(curr,callback)})}});async.series(tasks,function(err){return err?reject(err):void resolve(!0)})})},p_mkdirsSync:function p_mkdirsSync(absoluteDirPath,isFileName){if(!this.p_isString(absoluteDirPath))throw new Error("absoluteDirPath must be a valid file path");var pieces=absoluteDirPath.split(path.sep),curr="",isWindows=-1!==os.type().toLowerCase().indexOf("windows");pieces.forEach(function(p,i){0===p.length||isFileName&&i>=pieces.length-1||(curr+=(isWindows&&0===i?"":path.sep)+p,fs.existsSync(curr)||fs.mkdirSync(curr))})},p_getExtension:function p_getExtension(filePath,options){if(!this.p_isString(filePath)||filePath.length<=0)return null;this.p_isObject(options)||(options={});var index=filePath.lastIndexOf(options.sep||path.sep)||0;-1<index&&(filePath=filePath.substr(index));var ext=null,index=filePath.lastIndexOf(".");return 0<=index&&(ext=filePath.substring(index+1),options.lower&&(ext=ext.toLowerCase())),ext},p_getFileExtensionFilter:function p_getFileExtensionFilter(extension){var ext="."+extension;return function(fullPath){return fullPath.lastIndexOf(ext)===fullPath.length-ext.length}},p_inherits:function p_inherits(Type1,Type2){if(p_isNullOrUndefined(Type1)||p_isNullOrUndefined(Type2))throw new Error("The type parameters must be objects or prototypes");util.inherits(Type1,Type2),p_merge(Type2,Type1)},js_to_json:function js_to_json(jsObject){return JSON.stringify(jsObject)},json_to_js:function json_to_js(jsonString){return JSON.parse(jsonString)},clone:function clone(o){var _this=this;if(o instanceof Array){var newA=[];return o.forEach(function(e){e instanceof Array||e instanceof Object?newA.push(_this.clone(e)):newA.push(e)}),newA}if(o instanceof Object&&"function"!=typeof o){var p,n={};for(p in o)o[p]instanceof Array||o[p]instanceof Object&&"function"!=typeof o[p]?n[p]=this.clone(o[p]):("callback"===p&&console.log("The current property is callback"),n[p]=o[p]);return n}},object_to_array:function object_to_array(castObj,argument_1){if(castObj instanceof Object){if(castObj instanceof Array)return castObj;var arr=[],count=0;if(1<arguments.length&&void 0!==argument_1&&argument_1)for(var key in castObj)arr[count]={key:key,value:castObj[key]},++count;else for(var _key in castObj)arr[count]=castObj[_key],++count;return arr}this.throwErrors("Argument 1 of object_to_array() must be an object")},array_to_object:function array_to_object(castArr){if(castArr instanceof Array){for(var obj={},i=0;i<castArr.length;i++){obj["property_"+(i+1)]=castArr[i]}return obj}this.throwErrors("Argument 1 of array_to_object() must be an array")},string_to_array:function string_to_array(string,sep){if(this.is_string(string))return string.split(sep)},set_deeply:function set_deeply(path,deep,argument_2,argument_3){var value=2<arguments.length&&void 0!==argument_2?argument_2:null,type=3<arguments.length&&void 0!==argument_3?argument_3:null;return 1===path.length?(console.log("ABOUT TO SET DEEPLY NESTED PROP"),console.log("THE DEEP"),console.log(deep),value?deep[path[0]]=value:(console.log("THIS DEEP ARRAY"),console.log(this.js_to_json(deep)),console.log("THE DEEP I,i"),deep.splice(path[0],1),console.log(deep)),console.log(path),console.log(path[0]),console.log(deep[path]),!0):deep[path[0]]?this.set_deeply(path.slice(1),deep[path[0]],value,type):(console.log("THE PROPERTY BELOW DOES NOT EXIST"),console.log(path),console.log(path[0]),!1)},get_deeply:function get_deeply(){},is_function:function is_function(x){return"[object Function]"===Object.prototype.toString.call(x)},is_array:function is_array(x){return"[object Array]"===Object.prototype.toString.call(x)},is_date:function is_date(x){return"[object Date]"===Object.prototype.toString.call(x)},is_object:function is_object(x){return"[object Object]"===Object.prototype.toString.call(x)},is_string:function is_string(x){return"[object String]"===Object.prototype.toString.call(x)},is_value:function is_value(x){return!this.isObject(x)&&!this.isArray(x)},is_not_falsey:function is_not_falsey(x){return!!this.trim_spaces(x)},trim_spaces:function trim_spaces(x){return x instanceof String?x.trim():x},compare_values:function compare_values(value1,value2){value1!==value2&&(this.is_date(value1)&&this.is_date(value2)&&value1.getTime()===value2.getTime()||value1!==value2&&(value1=value2))},is_equal_ab:function is_equal_ab(a,b,argument_2){var bKeys=2<arguments.length&&void 0!==argument_2?argument_2:"values";if(!this.is_object(a)||!this.is_object(b))return!1;if(Object.keys(a).length!==Object.keys(b).length)return!1;if("keys"!==bKeys.trim())return this.js_to_json(a)===this.js_to_json(b);Object.keys(a).sort();bKeys=Object.keys(b).sort();return JSON.stringify(aKeys)===JSON.stringify(bKeys)},is_valid_email:function is_valid_email(){return!0},is_valid_password:function is_valid_password(){return!0},is_same_value:function is_same_value(x,y){return this.isBrowserSupported("Object","is")?Object.is(x,y):this.polyFills().objectIs(x,y)},unlike_props:function unlike_props(a,b){var akeys=Object.keys(a),bkeys=Object.keys(b);if(a.length>b.length){var _unlike=null,_iterator=_createForOfIteratorHelper(akeys);try{for(_iterator.s();!(k=_iterator.n()).done;){var k=k.value;a[k]!==b[k]&&(_unlike?_unlike.a.push(k):_unlike={a:[k]})}}catch(err){_iterator.e(err)}finally{_iterator.f()}return _unlike}var _iterator2=_createForOfIteratorHelper(bkeys);try{for(_iterator2.s();!(_k=_iterator2.n()).done;){var _k=_k.value;b[_k]!==a[_k]&&(unlike?unlike.b.push(_k):unlike={b:[_k]})}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return unlike},throwErrors:function throwErrors(errorMessage){throw new Error(errorMessage)},contains:function contains(o,v){if(this.is_array(o))return-1<o.indexOf(v);if(this.is_object(o)){if(this.is_array(v)){console.log("THE SPECIFED VALUE TO CHECK IS AN ARRAY"),console.log(v);for(var outcome="",i=0;i<v.length;i++){if(!o.hasOwnProperty(v[i])){outcome=!1;break}i===v.length-1&&(outcome=!0)}return console.log("THE OUTCOME"),console.log(outcome),outcome}return!!o.hasOwnProperty(v)}this.throwErrors("Contains() requires either an array pure js object")},for_of:function for_of(x,action,argument_2){var y=2<arguments.length&&void 0!==argument_2?argument_2:null;if(x=this.clone(x),this.is_array(x))x.forEach(action);else if(this.is_object(x)){if(!y){var p,newX={};for(p in x){var prop=action(p,x[p]);newX[prop.p]=prop.v}return newX}for(var _p in x)action(_p,x[_p])}else this.throwErrors("Object of for_of() must be an Array or pure object")},add_values_to:function add_values_to(x,keys,values){if(this.is_array(x))x.forEach(action);else{if(this.is_object(x))return keys.forEach(function(k,i){var vItemKeys=Object.keys(values[k]);x[k]||(x[k]={}),vItemKeys.forEach(function(v){x[k][v]=values[v]})}),x;this.throwErrors("Object of for_of() must be an Array or pure object")}},find_in:function find_in(x,id,f){if(this.is_array(x)){if(this.is_value(x[0]))return-1<x.indexOf(f)&&x[f];if(this.is_object(x[0]))for(var i=0;i<x.length;i++)if(sb.sb_contains(x[i],id)&&x[i][id]===f)return x[i]}}}},function(module,exports,__webpack_require__){__webpack_require__(6),module.exports=__webpack_require__(7)},function(module,exports){module.exports=require("@babel/polyfill")},function(module,exports,__webpack_require__){var Anzii=__webpack_require__(21).default;module.exports=function(){var modules=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;modules?Anzii.Activate([modules]):Anzii.Activate()}},function(module,exports){module.exports=require("util")},function(module,exports){module.exports=require("async")},function(module,exports){module.exports=require("node.extend")},function(module,exports){module.exports=require("fs")},function(module,exports){module.exports=require("uuid")},function(module,exports){module.exports=require("express")},function(module,exports){module.exports=require("config")},function(module,exports){module.exports=require("supports-color")},function(module,exports){module.exports=require("winston")},function(module,exports){module.exports=require("debug")},function(module,exports){module.exports=require("cluster")},function(module,exports){module.exports=require("http")},function(module,exports){module.exports=require("mysql")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var anzii_Anzii=__webpack_require__(4),pillar_default=__webpack_require__.n(anzii_Anzii);function CORE(lib){this.PILLAR=lib,this.modules={},this.globalModules=[],this.PROMPT=this.PILLAR.PROMPT}CORE.prototype.createModule=function(module,moduleId,modInstId){var modules=this.modules;if(this.sanna().runForModules(module),0<Object.keys(modules).length)for(var _mod in modules)_mod===moduleId||(this.modules[moduleId]={}),this.modules[moduleId][modInstId]=module;else this.modules[moduleId]={},this.modules[moduleId][modInstId]=module},CORE.prototype.events=function(){var PILLAR=this.PILLAR;return{addEventHandler:function addEventHandler(el,ev,handler){if("undefined"==typeof window)return PILLAR.ev_addHandler(el,ev,handler);PILLAR.ev_addHandler(el,ev,handler)},removeEventHandler:function removeEventHandler(el,ev,handler){PILLAR.ev_removeHandler(el,ev,handler)},getEvent:function getEvent(ev){return PILLAR.getEvent(ev)},getTarget:function getTarget(ev){return PILLAR.getTarget(ev)},preventNormal:function preventNormal(ev){PILLAR.preventDefault(ev)},stopEventBubble:function stopEventBubble(ev){PILLAR.stopPropagation(ev)}}},CORE.prototype.ajax=function(){var PILLAR=this.PILLAR;return{get:function get(url,data,success,failure,type){PILLAR.ajax_get(url,data,success,failure,type)},post:function post(url,data,success,failure,type){PILLAR.ajax_post(url,data,success,failure,type)}}},CORE.prototype.validators=function(){var PILLAR=this.PILLAR;return{isFunction:function isFunction(x){return PILLAR.is_function(x)},isArray:function isArray(x){return PILLAR.is_array(x)},isDate:function isDate(x){return PILLAR.is_date(x)},isObject:function isObject(x){return PILLAR.is_object(x)},isString:function isString(x){return PILLAR.is_string(x)},isValue:function isValue(x){return PILLAR.is_value(x)},isNotFalsey:function isNotFalsey(x){return PILLAR.is_not_falsey(x)},trimSpaces:function trimSpaces(x){return PILLAR.trim_spaces(x)},isEqualab:function isEqualab(a,b,f){f=2<arguments.length&&void 0!==f?f:null;return PILLAR.is_equal_ab(a,b,f)},isSameValue:function isSameValue(x,y){return PILLAR.is_same_value(x,y)},isValidEmail:function isValidEmail(e){return PILLAR.is_valid_email(e)},isValidPassword:function isValidPassword(p){return PILLAR.is_valid_password(p)},unlikeProps:function unlikeProps(a,b){return PILLAR.unlike_props(a,b)},contains:function contains(o,v){return PILLAR.contains(o,v)},forOf:function forOf(o,action,no){return PILLAR.for_of(o,action,no)},addValuesTo:function addValuesTo(o,k,v){return PILLAR.add_values_to(o,k,v)},findIn:function findIn(x,i,f){return PILLAR.find_in(x,i,f)}}},CORE.prototype.util=function(){var PILLAR=this.PILLAR;return{makeDirs:function makeDirs(p,isFileName,callback){return PILLAR.p_mkdirs(p,isFileName,callback)},mkdirsSync:function mkdirsSync(abs,isFileName,callback){return PILLAR.p_mkdirs(abs,isFileName,callback)},getFiles:function getFiles(p,opts,callback){return PILLAR.p_getFiles(p,opts,callback)},getFile:function getFile(f){return PILLAR.p_getFile(f)},getDirectories:function getDirectories(p){return PILLAR.p_getDirectories(p)},getExtension:function getExtension(f,callback){return PILLAR.p_getExtension(f,callback)},generateUniqueID:function generateUniqueID(){return PILLAR.p_generateUniqueID()},unikify:function unikify(a){return PILLAR.p_unikify(a)}}},CORE.prototype.registerEvents=function(){var evts=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},module_id=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",mod_inst_id=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";evts&&module_id&&mod_inst_id&&this.modules[module_id][mod_inst_id]&&(this.modules[module_id][mod_inst_id].events=evts)},CORE.prototype.triggerEvent=function(evt){if(evt)for(var _moduId in this.modules)if(this.modules.hasOwnProperty(_moduId))for(var modInst in _moduId=this.modules[_moduId])_moduId[modInst].events&&_moduId[modInst].events[evt.type]&&_moduId[modInst].events[evt.type](evt.data)},CORE.prototype.startModule=function(moduleID,modInstId){this.modules[moduleID][modInstId]&&("anziiloger"!==moduleID&&(console.log("not A LOGGER MODULE"),this.modules.anziiloger.anziiloger.setDebugger(this.modules[moduleID][modInstId].constructor.name)),this.modules[moduleID][modInstId].init(),"global"===moduleID&&(console.log("THE GLOBAL MODULES IS ABOUT TO RECEIVE MODULES"),this.modules[moduleID][modInstId].globals=Object.keys(this.modules)))},CORE.prototype.startAllModules=function(){for(var modu in this.modules){var modInstId,modSuper=this.modules[mod];for(modInstId in modSuper)try{this.modules[modSuper][modInstId].init()}catch(e){console.log(e)}}},CORE.prototype.stopModule=function(moduleId,modInstId){this.modules[moduleId][modInstId]&&this.modules[moduleId][modInstId].destroy()},CORE.prototype.stopAllModules=function(){for(var modu in this.modules){var modInstId,modSuper=this.modules[mod];for(modInstId in modSuper)try{this.modules[modSuper][modInstId].destroy()}catch(e){console.log(e)}}},CORE.prototype.converts=function(){var PILLAR=this.PILLAR;return{jsToJson:function jsToJson(jsObject){return PILLAR.js_to_json(jsObject)},jsonToJs:function jsonToJs(json){return PILLAR.json_to_js(json)},clone:function clone(c){return PILLAR.clone(c)},objectToArray:function objectToArray(o,key){o=0<arguments.length&&void 0!==o?o:{},key=1<arguments.length&&void 0!==key&&key;return PILLAR.object_to_array(o,key)},stringToArray:function stringToArray(str,sep){return PILLAR.string_to_array(str,sep)}}},CORE.prototype.sanna=function(){var self=this;return{modules:{validators:{emit:function emit(comp){if(comp.hasOwnProperty("emit")){if("function"!=typeof comp.emit)throw new Error("Emit is a reserved Akii method")}else comp.emit=self.sanna().modules.addiks.emit.bind(comp)},listens:function listens(comp){if(comp.hasOwnProperty("listens")){if("function"!=typeof comp.listens)throw new Error("Listens is a reserved ANZii method")}else comp.listens=self.sanna().modules.addiks.listens.bind(comp)},log:function log(comp){comp.log=self.sanna().modules.addiks.log.bind(comp)},logSync:function logSync(comp){comp.logSync=self.sanna().modules.addiks.log.bind(comp)},query:function query(comp){comp.query=self.sanna().modules.addiks.query.bind(comp)}},addiks:{emit:function emit(data){this.pao.pa_notifyEvent({type:data.type,data:data.data})},listens:function listens(evehandles){var pao=this.pao;this.log("MODULE",this.constructor.name,"listens to event(s):",evehandles);var mId=pao.moduleMeta.moduleId,mInsId=pao.moduleMeta.modInstId;pao.pa_notifyListen(evehandles,mId,mInsId)},log:function log(message,data){message=0<arguments.length&&void 0!==message?message:"No message provided",data=1<arguments.length&&void 0!==data?data:"console",this.pao,data={message:message,type:data};data.source=this.constructor.name,this.emit({type:"anziiloger-log",data:data})},logSync:function logSync(message,data){message=0<arguments.length&&void 0!==message?message:"No message provided",data=1<arguments.length&&void 0!==data?data:"console",this.pao,data={message:message,type:data};data.source=this.constructor.name,data.sync=!0,this.emit({type:"anziiloger-log",data:data})},query:function query(handler,mo,_mo){var model=0<arguments.length&&void 0!==handler?handler:null,document=1<arguments.length&&void 0!==mo?mo:null,handler=2<arguments.length&&void 0!==_mo?_mo:null,mo=this.pao;if(!model||!document)throw new Error("Query method missing required parameters");_mo=mo.pa_isString(model)?mo.pa_stringToArray(model,"."):model;console.log(mo.pa_stringToArray),console.log(_mo),3===_mo.length?(mo={vendor:_mo[0],table:_mo[1],operation:_mo[2]},this.emit({type:"data-hive-request",data:{model:mo,document:document,handler:handler}})):(model[1].trim(),_mo={vendor:_mo[0],table:_mo[1].toLowerCase(),operation:_mo[1].toLowerCase()},this.emit({type:"data-hive-request",data:{model:_mo,document:document,handler:handler}}))}}},runForModules:function runForModules(comp){var v,validators=this.modules.validators;for(v in validators)validators[v](comp)}}};var core=CORE;function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function PAO(appPillar){this.core=appPillar,this.PROMPT=appPillar.PROMPT}PAO.prototype.create=function(moduleID,modInstId){var pa_core=this.core,util=pa_core.validators().forOf(pa_core.util(),function(p,a){return{p:["pa_".concat(p)],v:a}}),converts=pa_core.validators().forOf(pa_core.converts(),function(p,a){return{p:["pa_".concat(p)],v:a}}),validators=pa_core.validators().forOf(pa_core.validators(),function(p,a){return{p:["pa_".concat(p)],v:a}});return _objectSpread(_objectSpread(_objectSpread(_objectSpread({moduleMeta:modInstId?{moduleId:moduleID,modInstId:modInstId}:{moduleId:moduleID,modInstId:moduleID}},util),validators),converts),{},{pa_notifyListen:function pa_notifyListen(evts,moduleID,modInstId){evts=0<arguments.length&&void 0!==evts?evts:{},moduleID=1<arguments.length&&void 0!==moduleID?moduleID:"",modInstId=2<arguments.length&&void 0!==modInstId?modInstId:"";console.log("The notifyListen event has been successfuly invoked"),console.log(evts),console.log(moduleID),console.log(modInstId),pa_core.registerEvents(evts,moduleID,modInstId)},pa_notifyEvent:function pa_notifyEvent(evt){evt=0<arguments.length&&void 0!==evt?evt:{};pa_core.triggerEvent(evt)}})};var base_pao=PAO;var base=new function Base(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Base),this.CORE=core,this.PAO=base_pao,this.PILLAR=pillar_default.a};function methods_ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function methods_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?methods_ownKeys(Object(source),!0).forEach(function(key){!function methods_defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):methods_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function init(){this.log("Middleware has been initialised"),this.listens({"config-middleware":this.handleConfigMiddleware.bind(this),"add-ext-middleware":this.handleAddExternalMiddleware.bind(this),"attach-middleware":this.handleAttachMiddleware.bind(this)})}function handleAttachMiddleware(data){this.attachMiddleware(data)}function handleConfigMiddleware(data){function _loop(p){self.middlewares[p]?middlewares[p].addMiddleware&&middlewares[p].addMiddleware.forEach(function(m,i){self.middlewares[p].push(m)}):middlewares[p].addMiddleware&&(self.middlewares[p]=methods_objectSpread({},middlewares[p].addMiddleware))}var p,self=this,middlewares=data;for(p in middlewares)_loop(p)}function handleAddExternalMiddleware(data){var self=this,len=self.pao;self.log("ADD EXTERNAL MIDDLEWARE EVENT HAS OCCURED"),data.type&&("private"===data.type?"top"===data.level&&(len.pa_isArray(data.middleware.funk)?data.middleware.forEach(function(m,i){self.middleware.unshift({type:"function",value:m.funk,ext:!0})}):(self.log("THE MIDDLEWARES BEFORE"),self.log(self.middlewares),self.middlewares.pprivate&&(len=Object.keys(self.middlewares.pprivate).length,self.middlewares.pprivate[len]={type:"function",value:data.middleware.funk,ext:!0},self.log("Middlewares"),self.log(self.middlewares)))):"public"===data.type||"all"===data.type&&data.level)}function attachMiddleware(data){data.app&&(0<this.all.length&&(console.log("THE Allwares is greater than zero"),data.xpress&&this.allWares(data.app,data.xpress)),this.middlewares.pprivate&&this.middlewares.ppublic?this.emit({type:"router-middleware",data:{middleware:{public:this.middlewares.ppublic,private:this.middlewares.pprivate}}}):this.middlewares.private?this.emit({type:"router-middleware",data:{middleware:{private:this.middlewares.pprivate}}}):this.middlewares.public&&this.emit({type:"router-middleware",data:{middleware:{public:this.middlewares.ppublic}}}),this.middlewares.all&&this.middlewares.all.forEach(function(m,i){"function"===m.type?data.app.use(m.value):m.type}))}function allWares(app,xpress){var self=this,pao=self.pao;self.all.forEach(function(w,i){pao.pa_isObject(w)?(console.log("Executing allwares"),w.use?(console.log("The public:",w.call),app.use(xpress[w.call]("public"))):(console.log("The none-public:",w.call),app.use(xpress[w.call]()))):(self.log("middleware is string"),app.use(xpress[w]()))})}function esm_middleware(pao){!function middleware_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,esm_middleware),this.pao=pao,this.all=[{call:"static",use:"public"},"json"],this.middlewares={all:[{type:"function",value:function value(req,res,next){console.log("I am the zeenith ware"),res.header("Access-Control-Allow-Origin","*"),res.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),next()}}]},this.init=init,this.handleAttachMiddleware=handleAttachMiddleware,this.attachMiddleware=attachMiddleware,this.handleConfigMiddleware=handleConfigMiddleware,this.handleAddExternalMiddleware=handleAddExternalMiddleware,this.allWares=allWares}function methods_init(){this.log("Parsers has been initialised"),this.listens({"share-middleware":this.handleShareMiddleware.bind(this)})}function handleShareMiddleware(){console.log("HANLDE SHARE MIDDLEWARE EVENT HAS OCCURED"),this.emit({type:"add-ext-middleware",data:{type:"all",level:"top",middleware:{funk:[{body:this.dependiks.bodyParser,call:"json"}]}}})}__webpack_require__(1);function esm_parsers(pao){!function parsers_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,esm_parsers),this.pao=pao,this.path=path,this.dependiks={jsonfile:jsonfile,bodyParser:parsers_bodyParser},this.init=methods_init,this.handleShareMiddleware=handleShareMiddleware}var jsonfile=__webpack_require__(3),path=__webpack_require__(0),parsers_bodyParser=__webpack_require__(1);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function router_methods_ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function router_methods_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?router_methods_ownKeys(Object(source),!0).forEach(function(key){!function router_methods_defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):router_methods_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function router_methods_init(){console.log("Router has been initialised"),this.listens({"config-router":this.handleConfigRouter.bind(this),"router-middleware":this.handleRouterMiddleware.bind(this),"attach-routes":this.handleAttachRoutes.bind(this)})}function handleConfigRouter(data){console.log("THE HANDLE CONFIG ROUTER MODULE"),this.routes=data}function handleRouterMiddleware(data){console.log("THE ROUTER MIDDLEWARE"),console.log(data),this.routerMiddleware=data.middleware}function handleAttachRoutes(data){this.attachRoutes(data)}function attachRoutes(data){var aliasList,aliatikHandlers,self=this;data.app&&(aliasList=[],aliatikHandlers=[],data.app.use("/",data.router),self.routes?(self.routes.forEach(function(r,i){r.alias&&(aliasList.push(r.path.split("/")[1]),aliatikHandlers.push(r.alias)),r.router=data.router,self.renderRoute(r)}),0<aliasList.length&&self.emit({type:"router-alias-list",data:{aliasList:aliasList,handlers:aliatikHandlers}})):(self.logSync("Anzii is rendering default routes::"),[{path:"/test",method:"POST",type:"public"},{path:"/test",method:"GET",type:"public"},{path:"/",method:"GET",type:"public"}].forEach(function(r,i){r.alias&&(aliasList.push(r.path.split("/")[1]),aliatikHandlers.push(r.alias)),r.router=data.router,self.renderRoute(r)})))}function renderRoute(r){var pao=this.pao,routy={router:r.router,method:r.method,path:r.path,handOver:this.handOver};r.middlewares?(this.routerMiddleware&&this.routerMiddleware[r.type]?(this.middlewareType(r.type,r.middlewares),this.middlewareType(r.type,pao.pa_objectToArray(this.routerMiddleware[r.type]))):this.middlewareType(r.type,r.middlewares),this.appendRouter(router_methods_objectSpread({middleware:this["filtered".concat(r.type,"Middlewares")]},routy))):this.routerMiddleware&&this.routerMiddleware[r.type]?(this.middlewareType(r.type,pao.pa_objectToArray(this.routerMiddleware[r.type])),this.appendRouter(router_methods_objectSpread({middleware:this["filtered".concat(r.type,"Middlewares")]},routy))):this.appendRouter(routy)}function appendRouter(r){r.middleware?r.router[r.method.toLowerCase()](r.path,r.middleware,r.handOver.bind(this)):r.router[r.method.toLowerCase()](r.path,r.handOver.bind(this))}function middlewareType(type,middlewares){var self=this;middlewares.forEach(function(m,i){"function"===m.type?self["filtered".concat(type,"Middlewares")].push(m.value):"module"===m.type&&self.emit({type:"add-".concat(m.value,"-middleware"),data:{type:type,filterCallback:self.filterCallback.bind(self)}})})}var outOfRouterContext=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(req,res){var self,data;return regeneratorRuntime.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return self=this,_context.next=3,self.log("THE OUTOFROUTERCONTEXT REQUESTS");case 3:return _context.next=5,self.log(req.originalUrl);case 5:return data={error:!0,type:"NotFound",code:404,message:"Resource was not found: OutOfContext"},_context.abrupt("return",self.emit({type:"write-server-request-response",data:{data:data,res:res}}));case 7:case"end":return _context.stop()}},_callee,this)}));return function outOfRouterContext(){return _ref.apply(this,arguments)}}();function handOver(_x3,_x4){return _handOver.apply(this,arguments)}function _handOver(){return(_handOver=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(req,res){var self;return regeneratorRuntime.wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return self=this,_context2.next=3,self.log("THE CAUGHT REQUEST INSIDE ROUTER::END POINT HIT");case 3:return _context2.next=5,self.log(req.originalUrl);case 5:return _context2.next=7,self.log(req.params);case 7:return _context2.next=9,self.log(req.body);case 9:return _context2.abrupt("return",self.emit({type:"request-handover",data:{req:req,res:res}}));case 10:case"end":return _context2.stop()}},_callee2,this)}))).apply(this,arguments)}function filterCallback(filterType,moduleMiddleware){("public"===filterType?this.filteredpublicMiddlewares:this.filteredprivateMiddlewares).push(moduleMiddleware)}function esm_router(pao){!function router_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,esm_router),this.pao=pao,this.routes=null,this.routerMiddleware=null,this.filteredpublicMiddlewares=[],this.filteredprivateMiddlewares=[],this.init=router_methods_init,this.handleConfigRouter=handleConfigRouter,this.handleAttachRoutes=handleAttachRoutes,this.handleRouterMiddleware=handleRouterMiddleware,this.attachRoutes=attachRoutes,this.renderRoute=renderRoute,this.appendRouter=appendRouter,this.middlewareType=middlewareType,this.outOfRouterContext=outOfRouterContext,this.handOver=handOver,this.filterCallback=filterCallback}function request_methods_init(){console.log("Request has been initialised"),this.listens({"config-request":this.handleConfigRequest.bind(this),"request-handover":this.handleRequestHandOver.bind(this),"request-global-request-response":this.handleRequestGlobalResponse.bind(this),"request-global-request-error":this.handleRequestGlobalError.bind(this),"request-handler-error":this.handleHandlerError.bind(this),"router-alias-list":this.handleRouterAliasList.bind(this)})}function handleConfigRequest(data){var self=this;data.forEach(function(route){route.view&&self.views.push(route.path)})}function handleRequestHandOver(data){this.request.res=data.res;var aliasList=this.routesAliasList,aliatikHandlers=this.aliatikHandlers,parsed=this.parseRequest(data.req);console.log("THE ALIATIKS"),console.log(parsed),console.log(aliasList),console.log(aliatikHandlers),data.req.uploads&&(parsed.user?parsed.user.uploads=data.req.uploads:parsed.user={uploads:data.req.uploads});var handler=parsed.handler;return 0<=aliasList.indexOf(handler)&&(handler=aliatikHandlers[aliasList.indexOf(handler)]),(this.handler=handler)&&""!==handler.trim()?(this.requestData={parsed:parsed,user:parsed.user,handler:handler,request:{req:data.req,res:data.res}},this.views&&0!==this.views.length&&this.isView(data.req.originalUrl,parsed.user)?this.emit({type:"do-view-task",data:{payload:this.requestData,callback:this.taskerHandler.bind(this)}}):this.emit({type:"request-global-request",data:handler})):this.views&&0!==this.views.length?(this.requestData={parsed:parsed,user:parsed.user,handler:handler,request:{req:data.req,res:data.res}},this.isView("/home")?this.emit({type:"do-view-task",data:{payload:this.requestData,callback:this.taskerHandler.bind(this)}}):this.handlePathError()):this.handlePathError()}function parseRequest(_pathFrags2){console.log("The req"),console.log(_pathFrags2.body),console.log(_pathFrags2.query),console.log(_pathFrags2.params);var pathFrags,_pathFrags,requiredData={url:_pathFrags2.originalUrl},url=0===requiredData.url.indexOf("/")?requiredData.url.slice(1,requiredData.url.length):requiredData.url,_pathFrags3=0<url.indexOf("/");return _pathFrags2.query&&0<Object.keys(_pathFrags2.query).length?(console.log("THE QUERY"),console.log(_pathFrags2.query),requiredData.user=_pathFrags2.query,_pathFrags=url.split("?"),_pathFrags3?(pathFrags=_pathFrags[0].split("/"),console.log("THE PATH FRAGS"),console.log(pathFrags),requiredData.handler=pathFrags[0]):(console.log("THE REMAINING CONTENT AFTER SPLIT OF ?"),console.log(_pathFrags),requiredData.handler=_pathFrags[0])):_pathFrags2.params&&0<Object.keys(_pathFrags2.params).length?(console.log("THE PARAMS"),console.log(_pathFrags2.params),requiredData.user=_pathFrags2.params,_pathFrags3?(_pathFrags=url.split("/"),console.log("THE PATH FRAGS"),console.log(_pathFrags),requiredData.handler=_pathFrags[0]):requiredData.handler=url):_pathFrags2.body&&0<Object.keys(_pathFrags2.body).length?(console.log("THE REQUEST BODY"),console.log(_pathFrags2.body),requiredData.user=_pathFrags2.body,_pathFrags3?(_pathFrags2=url.split("/"),console.log("THE PATH FRAGS"),console.log(_pathFrags2),requiredData.handler=_pathFrags2[0]):requiredData.handler=url):(requiredData.user={},_pathFrags3?(_pathFrags3=url.split("/"),console.log("THE PATH FRAGS"),console.log(_pathFrags3),requiredData.handler=_pathFrags3[0]):requiredData.handler=url),requiredData}function handleRequestGlobalError(){this.writeResponse({error:!0,type:"serverError",code:502,message:"The server error"})}function handlePathError(){this.writeResponse({error:!0,type:"ServerError",code:502,message:"The requested task[handler] could not be completed"})}function handleRouterAliasList(data){this.log("Router ALIATIKHANDLERS WITH DATA:"),this.log(data),this.routesAliasList=data.aliasList,this.aliatikHandlers=data.handlers}function handleRequestGlobalResponse(data){data?this.emit({type:"handle-".concat(this.requestData.handler,"-task"),data:{payload:this.requestData,callback:this.taskerHandler.bind(this)}}):this.handleByHandlerError()}function isView(path,parasList){var parasList=1<arguments.length&&void 0!==parasList?parasList:null,views=this.views;if(this.logSync("THE VIEW PATH"),this.logSync(path),this.logSync(parasList),this.logSync(views),!parasList)return this.logSync("THE PARSED USsER"),this.logSync(this.requestData),this.requestData.user&&(this.requestData.parsed.derivedUrl="/home"),0<=views.indexOf(path);if(0<=views.indexOf(path))return!0;var parasList=Object.keys(parasList),parasString="";this.logSync("THE PARALIST"),this.logSync(parasList),parasList.forEach(function(para,i){0===i?parasString=":".concat(para):parasString+="/:".concat(para)}),this.logSync("thE PARARSTRING"),this.logSync(parasString);for(var v=0;v<views.length;v++)if(0<views[v].indexOf(parasString)){var viewPath=views[v].substr(0,views[v].indexOf(parasString)),comparePath=viewPath+parasString;return this.logSync("EXTRACTED VIEW PATH"),this.logSync(viewPath),this.logSync(comparePath),this.logSync(path),this.logSync(path.indexOf(viewPath)),0<=path.indexOf(viewPath)&&(this.logSync("Theviewpath matched"),this.requestData.parsed.derivedUrl=comparePath,!0)}return!1}function handleBadRequestError(){this.writeResponse({error:!0,type:"BadRequest",code:400,message:"Bad Request"})}function handleHandlerNotFound(){this.writeResponse({error:!0,type:"NotFound",code:404,message:"The requested task could not be completed"})}function handleByHandlerError(){this.writeResponse({error:!0,type:"notFound",code:404,message:"The requested task could not be completed"})}function handleHandlerError(){this.handleHandlerError()}function writeResponse(data,pao){var method=1<arguments.length&&void 0!==pao?pao:"regular",pao=this.pao;"regular"===method&&(data=pao.pa_isString()?pao.pa_jsToJson({text:data}):pao.pa_jsToJson(data)),this.emit({type:"write-server-request-response",data:{data:data,res:this.request.res,method:method}})}function taskerHandler(fail,success,method){fail=0<arguments.length&&void 0!==fail?fail:null,success=1<arguments.length&&void 0!==success?success:null,method=2<arguments.length&&void 0!==method?method:null,this.pao,console.log("THE TASKER HANDLER"),console.log(fail),console.log(method),fail?this.failureHandle({error:!0,message:fail}):success&&(method?this.successfullHandle(success,method):this.successfullHandle(success))}function successfullHandle(data,method){this.writeResponse(data,method)}function failureHandle(data){this.writeResponse(data)}function esm_request(pao){!function request_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,esm_request),this.pao=pao,this.request={},this.routesAliasList=[],this.aliatikHandlers=[],this.requestData=null,this.views=[],this.init=request_methods_init,this.handleConfigRequest=handleConfigRequest,this.handleRequestHandOver=handleRequestHandOver,this.parseRequest=parseRequest,this.handleRequestGlobalError=handleRequestGlobalError,this.handleRequestGlobalResponse=handleRequestGlobalResponse,this.isView=isView,this.handleBadRequestError=handleBadRequestError,this.handleHandlerNotFound=handleHandlerNotFound,this.handleByHandlerError=handleByHandlerError,this.handleHandlerError=handleHandlerError,this.handlePathError=handlePathError,this.handleRouterAliasList=handleRouterAliasList,this.writeResponse=writeResponse,this.taskerHandler=taskerHandler,this.successfullHandle=successfullHandle,this.failureHandle=failureHandle}function methods_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function methods_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){methods_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){methods_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function server_methods_init(){console.log("Server has been initialised"),this.listens({"config-server":this.handleConfigServer.bind(this),"config-domain-resources":this.handleDomainResources.bind(this),"write-server-request-response":this.handleWriteServerRequestResponse.bind(this)})}function handleConfigServer(){this.emit({type:"attach-middleware",data:{app:this.http,xpress:this.xpress}}),this.emit({type:"attach-routes",data:{app:this.http,router:this.router}}),this.emit({type:"distribute-system-resources",data:""}),this.startServer()}function handleDomainResources(){this.logSync("THE server is emitting system defaults event"),this.emit({type:"set-domain-defaults",data:{app:this.http,xpress:this.xpress}})}function startServer(){this.runServer()}function startPreRoutes(){this.http.use(this.dependiks.bodyParser.json()),this.http.use("*.js",function(req,res,next){return res.set("content-type","text/javascript"),next()}),this.http.use(this.xpress.static("public"))}function startRouting(){this.http.get("/todo",this.renderHtml.bind(this)),this.http.get("/ibr",this.renderHtml.bind(this)),this.http.get("/home",this.renderHtml.bind(this)),this.http.use("/",this.renderHtml.bind(this))}function runServer(){this.emit({type:"attach-workers-to-server",data:{app:this.http}})}function renderHtml(req,res){console.log("A request has been made to one of the routes"),console.log("The html"),console.log("The request URL"),console.log(req.url),this.request={req:req,res:res},this.emit({type:"address-changed",data:{url:req.url}})}function streamResponse(data){var self=this,type=(self.pao,self.mimeTypes[data.data.ext]),rStream=data.data.rStream;rStream.on("open",methods_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return data.res.set("Content-Type",type),data.res.set("Connection","close"),_context2.abrupt("return",rStream.pipe(data.res));case 3:case"end":return _context2.stop()}},_callee2)}))),rStream.on("end",methods_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return data.res.end(),_context3.next=3,self.log("Stream request has been successfully served WITH END");case 3:return _context3.abrupt("return",_context3.sent);case 4:case"end":return _context3.stop()}},_callee3)}))),rStream.on("error",function(){var _ref4=methods_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e){return regeneratorRuntime.wrap(function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return console.log("THE ERROR READSTREAM"),console.log(e),data.res.set("Content-Type","application/json"),data.res.set("Connection","close"),_context4.abrupt("return",data.res.status(404).send({error:!0,message:"Not found"}));case 5:case"end":return _context4.stop()}},_callee4)}));return function(_x2){return _ref4.apply(this,arguments)}}())}function getHtml(res,view){var self=this;return self.pao,self.logSync("THE SET VIEW"),self.logSync(view),new Promise(function(resolve,reject){var viewda=null,viewda=view.viewData?view.viewData:{title:view.title};res.render(view.view,viewda,function(err,html){return err?(self.logSync("THE ERROR BELOW OCCURED TRYING TO RENDER VIEW"),self.logSync(err),void res.render("main/500",{title:"Server error"},function(err,html){return resolve(err?{html:"<hl>The page could not be found</h1>",success:!1}:{html:html,success:!0})})):resolve({html:html,success:!0})})})}var handleWriteServerRequestResponse=function(){var _ref=methods_asyncToGenerator(regeneratorRuntime.mark(function _callee(data){var self,view;return regeneratorRuntime.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if((self=this).logSync("THE DATA TO BE SENT TO CLIENT"),self.logSync(data.method),self.logSync("renderView"===data.method),"stream"===data.method)return _context.abrupt("return",self.streamResponse(data));_context.next=8;break;case 8:if("renderView"!==data.method){_context.next=25;break}if(view=data.data.data,self.logSync("MAKING A VIEW request response"),data.res.set("Connection","close"),"template"===view.type.trim())return self.logSync("Rendering template view"),self.logSync(data.data.view),self.logSync("Rendering inside try"),self.getHtml(data.res,view).then(function(html){html.success?(data.res.status(200).send(html.html),self.logSync("SERVER HAS SENT A SUCCESSFULL RESPONSE BACK TO THE CLIENT::REGULAR")):(data.res.status(200).send(html.html),self.logSync("SERVER HAS SENT A FAILED RESPONSE BACK TO THE CLIENT::REGULAR"))}).catch(function(e){data.res.status(200).send(e.html)}),_context.abrupt("return");_context.next=20;break;case 20:if("modular"===view.type)return self.logSync("rENDEING MODULAR VIEW"),_context.abrupt("return",data.res.status(200).send(view.view));_context.next=23;break;case 23:_context.next=46;break;case 25:return _context.next=27,self.log("SERVER IS ABOUT TO SEND RESPONSE BACK TO CLIENT::REGULAR");case 27:return _context.next=29,self.log(data.data);case 29:return _context.next=31,data.res.set("Connection","close");case 31:if(!data.data.accepts){_context.next=42;break}_context.t0=data.data.accepts,_context.next="json"===_context.t0?35:"html"===_context.t0?37:39;break;case 35:return data.res.status(200).send(data.data),_context.abrupt("break",40);case 37:return self.getHtml(data.res,{view:"main/404",title:"Page could not be found"}).then(function(html){return data.res.status(200).send(html.html)}).catch(function(e){return data.res.status(200).send(e.html)}),_context.abrupt("break",40);case 39:data.res.type("txt").status(200).send("Text not found");case 40:_context.next=43;break;case 42:data.res.status(200).send(data.data);case 43:return _context.next=45,self.log("SERVER HAS SENT A RESPONSE BACK TO THE CLIENT::REGULAR");case 45:return _context.abrupt("return",_context.sent);case 46:case"end":return _context.stop()}},_callee,this)}));return function handleWriteServerRequestResponse(){return _ref.apply(this,arguments)}}();function esm_server(pao){!function server_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,esm_server),this.pao=pao,this.xpress=express,this.http=this.xpress(),this.router=this.xpress.Router(),this.path=server_path,this.html=[],this.request=null,this.componentCount=0,this.componentId=[],this.ssrComponentLen=0,this.componentRefLen=0,this.workers=[],this.fixedCompS={before:[],after:[]},this.compData=[],this.dependiks={jsonfile:server_jsonfile,bodyParser:server_bodyParser},this.mimeTypes={html:"text/html",txt:"text/plain",css:"text/css",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",js:"application/javascript"},this.init=server_methods_init,this.handleConfigServer=handleConfigServer,this.handleDomainResources=handleDomainResources,this.handleWriteServerRequestResponse=handleWriteServerRequestResponse,this.startServer=startServer,this.startPreRoutes=startPreRoutes,this.startRouting=startRouting,this.streamResponse=streamResponse,this.runServer=runServer,this.renderHtml=renderHtml,this.streamResponse=streamResponse,this.getHtml=getHtml}function config_methods_init(){this.log("Config has been initialised"),this.configure()}function configure(){var config=this.config;if(!this.config)return this.emit({type:"config-anziiloger",data:{level:"info"}}),void this.emit({type:"config-server",data:"server"});if(this.config)for(var c in this.config.hasOwnProperty("logger")&&(console.log("THE LOGGER IS THE FIRST MODULE TO GET CONFIG"),this.emit({type:"config-anziiloger",data:this.config.logger})),this.enviroment(),this.config.hasOwnProperty("cluster")&&this.emit({type:"config-system",data:this.config.cluster}),config)console.log("The module in Config"),console.log(c),"router"===c&&(config.views?(this.emit({type:"config-request",data:config[c]}),this.emit({type:"config-view",data:{routes:config[c],handlers:config.views}})):(this.emit({type:"config-request",data:config[c]}),this.emit({type:"config-view",data:config[c]}))),"logger"===c&&"views"===c||(this.emit({type:"config-".concat(c),data:config[c]}),"domain"===c&&this.emit({type:"config-domain-resources",data:""}))}function enviroment(){var envObserver=this.envObserver,envCofig=this.supportsColor;if(console.log("THE CURRENT ENVIROMENT"),envCofig.stdout&&console.log("Terminal stdout supports color"),envCofig.stdout.has256&&console.log("Terminal stdout supports 256 colors"),envCofig.stderr.has16m&&console.log("Terminal stderr supports 16 million colors (truecolor)"),this.envObserver.has("enviroment"))if(this.aliases.hasOwnProperty(envObserver.enviroment)){this.env=this.aliases[envObserver.enviroment];envCofig=envObserver.get(this.env);if(envCofig.hasOwnProperty("database")){var c,clients=[],db=envCofig.database;for(c in console.log("THE DB"),console.log(db),db)console.log("THE VALUE Of C"),console.log(c),console.log(db[c]),clients.push({name:c,connect:db[c].connect});console.log("THE DATABASE CLIENTS"),console.log(clients),this.emit({type:"config-dman",data:{clients:clients}})}envObserver.has("appOrphic")?(console.log("THE JWT appOrphic"),console.log(envObserver),console.log(envObserver.appOrphic),console.log(envObserver.appOrphic.flaDev),this.emit({type:"save-jwt-key",data:{key:envObserver.appOrphic.flaDev}})):this.emit({type:"save-jwt-key",data:{key:"f124sfet48tq3dfmlvoszx1"}})}else this.log("Enviroment config invalid, resorting to default","warn")}var express=__webpack_require__(13),server_jsonfile=__webpack_require__(3),server_path=__webpack_require__(0),server_bodyParser=__webpack_require__(1);var config=null;try{config=__webpack_require__(22).default;console.log("Config file has been successfully required")}catch(error){console.log("No configuration file has been configured"),config=null}console.log("THE CONFIG IN CONFIG"),console.log(config);function esm_config(pao){!function config_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,esm_config),this.pao=pao,this.config=config,this.envObserver=envObserver,this.supportsColor=supportsColor,this.env="development",this.aliases={development:"dev",production:"prod",staging:"stage"},this.init=config_methods_init,this.configure=configure,this.enviroment=enviroment}var envObserver=__webpack_require__(14),supportsColor=__webpack_require__(15);function anziiloger_methods_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function anziiloger_methods_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){anziiloger_methods_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){anziiloger_methods_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function anziiloger_methods_init(){this.setDebugger(this.constructor.name),console.log("Anziiloger has been initialised"),this.listens({"config-anziiloger":this.handleAnziilogerConfig.bind(this),"anziiloger-log":this.handleLogRequest.bind(this)})}function handleLogRequest(data){if(this.logger)switch(data.type){case"info":this.info(data);break;case"warn":this.warn(data);break;case"error":this.error(data);default:this.debug(data)}else console.log(data.source,"logged message: ",data.message," of type ",data.type)}function handleAnziilogerConfig(){this.pao,new Date,this.logger=new this.winlo.createLogger({transports:[new this.winlo.transports.Console({level:"debug",label:"Anzilloger",timestamp:!0,colorize:!0})]})}var info=function(){var _ref=anziiloger_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee(log){var self,pao;return regeneratorRuntime.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(pao=(self=this).pao,(0,pao.pa_contains)(log,"sync"))return _context.next=6,self.logger.info("".concat(log.source,": ").concat(log.message));_context.next=8;break;case 6:_context.next=9;break;case 8:self.logger.info("".concat(log.source,": ").concat(log.message));case 9:case"end":return _context.stop()}},_callee,this)}));return function info(){return _ref.apply(this,arguments)}}(),debug=function(){var _ref2=anziiloger_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee2(log){var self,pao;return regeneratorRuntime.wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(pao=(self=this).pao,!(0,pao.pa_contains)(log,"sync")){_context2.next=13;break}if(self.debugas.hasOwnProperty(log.source.toLowerCase()))return _context2.next=7,self.debugas[log.source.toLowerCase()](log.message);_context2.next=9;break;case 7:_context2.next=11;break;case 9:return _context2.next=11,self.logger.debug("".concat(log.source,": ").concat(log.message));case 11:_context2.next=14;break;case 13:self.debugas.hasOwnProperty(log.source.toLowerCase())?self.debugas[log.source.toLowerCase()](log.message):self.logger.debug("".concat(log.source,": ").concat(log.message));case 14:case"end":return _context2.stop()}},_callee2,this)}));return function debug(){return _ref2.apply(this,arguments)}}(),warn=function(){var _ref3=anziiloger_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee3(log){var self,pao;return regeneratorRuntime.wrap(function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(pao=(self=this).pao,(0,pao.pa_contains)(log,"sync"))return _context3.next=6,self.logger.warn("".concat(log.source,": ").concat(log.message));_context3.next=8;break;case 6:_context3.next=9;break;case 8:self.logger.warn("".concat(log.source,": ").concat(log.message));case 9:case"end":return _context3.stop()}},_callee3,this)}));return function warn(){return _ref3.apply(this,arguments)}}(),error=function(){var _ref4=anziiloger_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee4(log){var self,pao;return regeneratorRuntime.wrap(function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(pao=(self=this).pao,(0,pao.pa_contains)(log,"sync"))return _context4.next=6,self.logger.error("".concat(log.source,": ").concat(log.message));_context4.next=8;break;case 6:_context4.next=9;break;case 8:self.logger.error("".concat(log.source,": ").concat(log.message));case 9:case"end":return _context4.stop()}},_callee4,this)}));return function error(){return _ref4.apply(this,arguments)}}(),setDebugger=function(){var _ref5=anziiloger_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee5(mod){var self,name;return regeneratorRuntime.wrap(function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:self=this,name=mod.toLowerCase(),self.debugas[name]=self.debugr("anzii:".concat(name));case 3:case"end":return _context5.stop()}},_callee5,this)}));return function setDebugger(){return _ref5.apply(this,arguments)}}();function esm_anziiloger(pao){!function anziiloger_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,esm_anziiloger),this.pao=pao,this.winlo=winston,this.debugr=debugr,this.logger=null,this.debugas={},this.defaultTransports=[{trans:"File",level:"info",handleExceptions:!0,json:!0,label:"Anzilloger",maxsize:5242880,maxFiles:5,timestamp:!0,colorize:!1},{trans:"Console",level:"debug",handleExceptions:!0,json:!1,timestamp:!0,colorize:!0}],this.init=anziiloger_methods_init,this.handleLogRequest=handleLogRequest,this.handleAnziilogerConfig=handleAnziilogerConfig,this.info=info,this.warn=warn,this.error=error,this.debug=debug,this.setDebugger=setDebugger}var winston=__webpack_require__(16),debugr=__webpack_require__(17);function system_methods_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function system_methods_init(){this.log("System has been initialised"),this.listens({"config-system":this.handleConfigureSystem.bind(this),"register-shutdown-candidate":this.handleRegisterShutDownCandidate.bind(this),"distribute-system-resources":this.handleDistributeSystemResources.bind(this),"attach-workers-to-server":this.handleServerAttachWorkers.bind(this)})}function handleConfigureSystem(data){this.log("System ENVIROMENT IS: ".concat(this.env)),this.log(this.systemBase.DOCUMENT_ROOT),this.handleShutDowns(),this.clusterCustomConfig=data}function shutDown(type,code){var self=this;self.log("SHUTDOWN TYPE: ".concat(type,",code: ").concat(code)),self.systemIsShuttingDown=!0,0<self.shutDownServices.length&&self.shutDownServices.forEach(function(sd,i){"function"!=typeof sd?self.log("Service: ".concat(self.shutDownOrder[i]," must be a function,shutdown attempt failed"),"warn"):self.log("Service: ".concat(self.shutDownOrder[i]," is shutting down"),"info")}),self.log("System is shutting down through: ".concat(type,",with code: ").concat(code.stack)),"uncaughtException"===type?self.context.kill(1):self.context[type]()}function masterWorker(app){var self=this;if(self.log("THE STATUS OF isMaster: ".concat(self.cluster.isMaster)),self.cluster.isMaster)if(self.log("Master ".concat(self.context.pid," is running")),self.clusterCustomConfig&&self.clusterCustomConfig.spawn){var slaves=self.clusterCustomConfig.workers?self.clusterCustomConfig.workers:"auto";if("auto"===slaves){slaves=self.os.cpus().length;for(;slaves<slaves;0)self.cluster.fork()}else if("number"==typeof slaves)for(var _s=0;_s<slaves;_s++)self.log("Forking slave number: ".concat(_s)),self.cluster.fork();self.cluster.on("fork",function(worker){self.log("cluster forking new worker",worker.id)});var mainWorkerId=null;self.cluster.on("listening",function(worker,address){self.log("cluster listening new worker",worker.id),null===mainWorkerId&&(self.log("Making worker "+worker.id+" to main worker"),mainWorkerId=worker.id,worker.send({singleProcessTasks:"startSingleProcessTasks"}))}),self.cluster.on("exit",function(worker,code,signal){self.log("worker ".concat(worker.process.pid," died")),console.log("FORKING ANOTHER WORK"),console.log("Worker %d died :(",worker.id),worker.id===mainWorkerId&&(console.log("Main Worker is dead..."),mainWorkerId=null),console.trace("I am here"),self.log(worker),self.log(code),self.log(signal),self.cluster.fork()})}else self.logSync("System is running on a single thread/core"),app.listen(self.context.env.PORT||3e3,function(){self.logSync("The Server is listening via workers","info"),self.logSync("THIS WORKER RUNNING IP:")});else console.log("Worker ".concat(process.pid," started")),app.listen(self.context.env.PORT||3e3,function(){self.log("The Server is listening via workers","info"),self.log("THIS WORKER RUNNING IP:")}),process.on("message",function(message){self.log("Worker "+process.pid+" received message from master.",message),"startSingleProcessTasks"==message.singleProcessTasks&&self.emit({type:"start-single-process-tasks",data:""})})}function folkSlaveWorkers(){}function handleShutDowns(){console.log("Shutdowns are being handled");var self=this;self.context.on("INT",function(code){self.systemIsShuttingDown?self.log("System is already ShuttingDown"):self.shutDown("kill",code)}),self.context.on("SIGTEM",function(code){self.systemIsShuttingDown?self.log("System is already ShuttingDown"):self.shutDown("exit",code)}),self.context.on("uncaughtException",function(code){self.systemIsShuttingDown?self.log("System is already ShuttingDown"):self.shutDown("uncaughtException",code)}),self.context.on("unhandledRejection",function(code){console.log("uncaughtException occured from unhandleredjected",code.stack),self.systemIsShuttingDown?self.log("System is already ShuttingDown"):self.shutDown("uncaughtException",code)})}function handleServerAttachWorkers(data){this.masterWorker(data.app)}function handleRegisterShutDownCandidate(data){data.hasOwnProperty("candidate")&&pao.pa_isFunction(data.candidate)&&data.hasOwnProperty("name")&&pao.pa_isString(name)?-1<this.shutDownServices.indexOf(data.name)||(this.shutDownServices.push(data.candidate),this.shutDownOrder.push(data.name)):this.log("Candidate could not be registered for shutdown","warn")}var handleDistributeSystemResources=function(){var _ref=function system_methods_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){system_methods_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){system_methods_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}(regeneratorRuntime.mark(function _callee(data){var self,getExtension,status,ext;return regeneratorRuntime.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return ext=(self=this).pao,ext.pa_getFiles,ext.pa_getDirectories,ext.pa_getFile,status=ext.pa_makeDirs,getExtension=ext.pa_getExtension,ext=self.path,"".concat(self.systemBase.DOCUMENT_ROOT),"".concat(self.systemBase.DOCUMENT_ROOT).concat(ext.sep,"sev.js"),ext="".concat(self.systemBase.DOCUMENT_ROOT).concat(ext.sep),self.log("HandleDistributeSystemResources "),_context.next=14,status(ext);case 14:status=_context.sent,ext=getExtension("sev.js"),console.log("GET FILES CALLBACK GETS A CALL"),console.log(ext),console.log(status),self.emit({type:"take-system-base",data:{systemBase:self.systemBase}});case 20:case"end":return _context.stop()}},_callee,this)}));return function handleDistributeSystemResources(){return _ref.apply(this,arguments)}}();function esm_system(pao){!function system_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,esm_system),this.pao=pao,this.context=process,this.env=this.context.env,this.cluster=cluster,this.os=os,this.path=system_path,this.shutDownServices=[],this.numOfDBSD=3,this.allowedDBSTR=1e4,this.systemIsShuttingDown=!1,this.shutDownOrder=[],this.systemBase={DOCUMENT_ROOT:process.cwd()},this.init=system_methods_init,this.handleConfigureSystem=handleConfigureSystem,this.handleRegisterShutDownCandidate=handleRegisterShutDownCandidate,this.handleServerAttachWorkers=handleServerAttachWorkers,this.handleDistributeSystemResources=handleDistributeSystemResources,this.masterWorker=masterWorker,this.folkSlaveWorkers=folkSlaveWorkers,this.handleShutDowns=handleShutDowns,this.shutDown=shutDown}var cluster=__webpack_require__(18),os=(__webpack_require__(19),__webpack_require__(2)),system_path=__webpack_require__(0);function mysql_methods_ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function mysql_methods_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?mysql_methods_ownKeys(Object(source),!0).forEach(function(key){!function mysql_methods_defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):mysql_methods_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function mysql_methods_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function mysql_methods_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){mysql_methods_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){mysql_methods_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function mysql_methods_init(){console.log("Mysql has been initialised"),this.listens({"mysql-data-request":this.handleMysqlDataRequest.bind(this)})}function handleMysqlDataRequest(data){var pao=this.pao;pao.pa_contains(data,["conn","table","opi","query","outComehandler"])?pao.pa_isObject(data.conn)?pao.pa_isString(data.table)?"deletemultiple"===data.opi.trim()||this[data.opi]?(console.log("THE CODE GOES THIS FAR"),"insert"===data.opi?(data.opi="insertOne",this[data.opi](data),console.log("this runs after opi finishes")):"find"===data.opi?this[data.opi](data):"updateOne"===data.opi?(data.opi="updateOne",this[data.opi](data)):"transaction"===data.opi?(data.opi="transaction",this[data.opi](data)):"procedure"===data.opi?(data.opi="procedure",this[data.opi](data)):"join"===data.opi?(data.opi="join",this[data.opi](data)):"search"===data.opi?(data.opi="search",this[data.opi](data)):"remove"===data.opi?(data.opi="remove",this[data.opi](data)):"updateandtake"!==data.opi&&"insertandtake"!==data.opi&&"deleteandtake"!==data.opi&&"deletemultiple"===data.opi?this.deleteandtake(data):this[data.opi](data)):(this.log("DATA.OPI IS NOT CONTAINED AS FUNCTION"),this.log("deletemultiple"!==data.opi.trim()),this.log(data.opi),data.outComehandler({message:"The specified operation is not supported"})):this.log("THE TABLE NAME IS NOT A STRING"):this.log("THE connection is not object"):(this.log("Data request operations failed"),data.outComehandler({message:"Database operation failed"}))}function insertOne(insert){if(this.pao.pa_isObject(insert))try{var _handler=insert.outComehandler,_conn=insert.conn,sql=insert.query;this.log("THE INSERT OBJECT"),this.log(insert);var sql=[insert.table,["id"].concat(_toConsumableArray(sql.fields)),[null].concat(_toConsumableArray(sql.values))],sql=_conn.format("INSERT INTO ?? (??) VALUES(?)",sql);console.log("THE SQL STATEMENT"),console.log(sql),_conn.query(sql,function(e,r,f){return console.log("INSERT RESULT"),console.log(r),console.log(e),e?_handler(e,null):(r.user=insert.values,console.log(r.user),void _handler(null,r))})}catch(e){console.log("CAUTH ERROR"),console.log(e),handler(e,null)}else;}function insertMany(insert){if(pao.pa_isObject(data))try{var sql="INSERT INTO ?? (?) VALUES(?)",result=[];insert.bulk.forEach(function(insertItem,i){var queryAttributes=[insertItem.table,_toConsumableArray(insertItem.fields),_toConsumableArray(insertItem.values)];sql=conn.format(sql,queryAttributes),conn.query(sql,insertItem,function(e,r,f){e||result.push(r)})}),console.log("bulk insert completed"),handler(null,result)}catch(e){handler(e,null)}else;}function updateOne(updatiks){console.log("THE UPDATIKS"),console.log(updatiks);var pao=this.pao,conn=updatiks.conn,handler=updatiks.outComehandler,update=mysql_methods_objectSpread({table:updatiks.table},updatiks.query);if(pao.pa_isObject(updatiks))try{var sql=this.queryTemplate(this.queryOptions(update),"update");console.log("THE SQLKIKS OBJECT UPDATE"),console.log(sql),queryAttributes=[sql.attribs.from.table],sql=sql.statement;var queryAttributes=queryAttributes;console.log("THE SQL BEFORE FORMAT"),console.log(sql),sql=conn.format(sql,queryAttributes),console.log(sql),conn.query(sql,function(e,r,f){e&&handler(e,null),handler(null,r)})}catch(e){handler(e,null)}else;}function updateJoinTemplate(options){this.log("UPDATE OPTIONS"),this.log(options);var sqlAttribs={};switch(sqlAttribs.attribs={from:options.from,tables:options.tables},options.length){case 2:sqlAttribs.statement="UPDATE ??\n                            JOIN ".concat(options.tables[0],"\n                              ON ").concat(options.joinPoints[0],"\n                            SET ").concat(options.set,"\n                            WHERE ").concat(options.from.condition,"\n                            ");break;case 3:sqlAttribs.statement="UPDATE ??,??,??\n                              JOIN ".concat(options.tables[0],"\n                                ON ").concat(options.conditions[0],"\n                              JOIN ").concat(options.tables[1],"\n                                ON ").concat(options.conditions[1],"\n                              SET ").concat(options.set,"\n                              WHERE ").concat(options.from.condition,"\n                              \n                              ");break;case 4:sqlAttribs.statement="UPDATE ??,??,??,??\n                            JOIN ".concat(options.tables[0],"\n                              ON ").concat(options.conditions[0],"\n                            JOIN ").concat(options.tables[1],"\n                              ON ").concat(options.conditions[1],"\n                            JOIN ").concat(options.tables[2],"\n                            ON ").concat(options.conditions[2],"\n                            SET ").concat(options.set,"\n                            WHERE ").concat(options.from.condition,"\n                            \n                            ");break;default:sqlAttribs.statement="UPDATE ??\n                            SET ".concat(options.set,"\n                            WHERE ").concat(options.from.condition,"\n                            \n                            ")}return sqlAttribs}function takeSql(takeOptions,conn){var self=this,contains=self.pao.pa_contains;return console.log("THE SEARCH"),console.log(search),new Promise(function(resolve,reject){console.log("Executing the search promise");var sql,queryAttributes=null,sqliks=self.searchStatement(takeOptions);console.log("THE SQLKIKS OBJECT"),console.log(sqliks),queryAttributes=contains(sqliks.attribs,"tables")?[sqliks.attribs.from.table].concat(_toConsumableArray(sqliks.attribs.tables)):[sqliks.attribs.from.table],sql=sqliks.statement;console.log("THE SQL BEFORE FORMAT::"),console.log(sql),sql=conn.format(sql,queryAttributes),console.log(sql),conn.query(sql,function(e,r,f){e?(console.log("Promise is rejecting search"),console.log(e),reject(e)):(console.log("Promise is Resolving search"),console.log(r),console.log(r[0]),resolve(r))})})}function removeJoin(removiks){var pao=this.pao,contains=pao.pa_contains,conn=removiks.conn,handler=removiks.outComehandler;if(pao.pa_isObject(removiks))try{var queryAttributes=null,sql=this.queryTemplate(this.searchOptions(removiks),"delete");console.log("THE SQLKIKS OBJECT DELETEDANDTAKE[REMOVE]"),console.log(sql),queryAttributes=contains(sql.attribs,"tables")?[].concat(_toConsumableArray(sql.attribs.tables),[sql.attribs.from.table]):[sql.attribs.from.table],sql=sql.statement;queryAttributes=queryAttributes;console.log("THE SQL BEFORE FORMAT"),console.log(sql),sql=conn.format(sql,queryAttributes),console.log(sql),conn.query(sql,function(e,r,f){return e?handler(e,null):void handler(null,r)})}catch(e){handler(e,null)}else;}function remove(removiks){var pao=this.pao,conn=removiks.conn,handler=removiks.outComehandler;mysql_methods_objectSpread({table:removiks.table},removiks.query);if(pao.pa_isObject(removiks))try{var sql=this.queryTemplate(this.queryOptions(remove),"delete");console.log("THE SQLKIKS OBJECT DELETED[REMOVE]"),console.log(sql),queryAttributes=[sql.attribs.from.table],sql=sql.statement;var queryAttributes=queryAttributes;console.log("THE SQL BEFORE FORMAT"),console.log(sql),sql=conn.format(sql,queryAttributes),console.log(sql),conn.query(sql,function(e,r,f){e&&handler(e,null),handler(null,r)})}catch(e){handler(e,null)}else;}function queryOptions(i){console.log("THE search BATCH ITEM"),console.log(i);var contains=this.pao.pa_contains,options={};return i.conditions?options.from={table:i.table,condition:this.searchConditionsFormat(i.conditions)}:options.from={table:i.table},console.log("THE CODE GETS HERE"),console.log(options),contains(i,["returnFields","opiks"])?options.fields=this.searchFieldsFormat(i.opiks,i.returnFields):contains(i,"opiks")?options.fields=this.searchFieldsFormat(i.opiks):!contains(i,"returnFields")||1===i.returnFields.length&&"all"===i.returnFields[0].trim()?options.fields="*":options.fields=i.returnFields,contains(i,"take")&&(options.take=i.take),contains(i,"range")&&(options.range=i.range),contains(i,"sort")&&(options.sort=i.sort),contains(i,"set")&&(options.set=this.set(i.set)),contains(i,"takeFrom")&&(i.takeFrom.conditions?(options.takeFrom=i.takeFrom,options.takeFrom.condition=this.searchConditionsFormat(i.takeFrom.conditions)):options.takeFrom=i.takeFrom),console.log("THE OPTIONS"),console.log(options),options}function queryTemplate(options,type){var contains=this.pao.pa_contains;if(console.log("THE QUERY TEMPLATE"),console.log(options),"select"===type){var _sqlAttribs={};_sqlAttribs.attribs={from:options.from};var _limit=" ",_sort=options.sort?this.sort(options.sort):" ";return options.take?_limit=this.limit(options.take,"take"):options.range&&(_limit=this.limit(options.range,"range")),contains(options.from,"condition")?_sqlAttribs.statement="SELECT ".concat(options.fields,"\n                              FROM  ??\n                              WHERE ").concat(options.from.condition,"\n                              ").concat(_sort,"\n                              ").concat(_limit,"\n\n                              "):_sqlAttribs.statement="SELECT ".concat(options.fields,"\n                              FROM  ??\n                              ").concat(_sort,"\n                              ").concat(_limit,"\n                              "),_sqlAttribs}if("update"===type){_sqlAttribs={};return _sqlAttribs.attribs={from:options.from},_sqlAttribs.statement="UPDATE ??\n                            SET ".concat(options.set,"\n                            WHERE ").concat(options.from.condition,"\n                            "),_sqlAttribs}if("delete"===type){if(options.length){var _sqlAttribs3={};switch(_sqlAttribs3.attribs={from:options.from,tables:options.tables},options.tables.unshift(options.from.table),console.log("DELETE OPTIONS OBJECT"),console.log(options),console.log(options.tables),console.log(options.length),options.length){case 3:_sqlAttribs3.statement="DELETE ??,??,??\n                                  FROM ??\n                                  JOIN ".concat(options.tables[1],"\n                                    ON ").concat(options.joinPoints[0],"\n                                  JOIN ").concat(options.tables[2],"\n                                    ON ").concat(options.joinPoints[1],"\n                                  WHERE ").concat(options.from.condition,"\n                                  \n                                  ");break;case 4:_sqlAttribs3.statement="DELETE ??,??,??,??\n                                FROM ??\n                                JOIN ".concat(options.tables[1],"\n                                  ON ").concat(options.joinPoints[0],"\n                                JOIN ").concat(options.tables[2],"\n                                  ON ").concat(options.joinPoints[1],"\n                                JOIN ").concat(options.tables[3],"\n                                ON ").concat(options.joinPoints[3],"\n                                WHERE ").concat(options.from.condition,"\n                                \n                                ");break;default:_sqlAttribs3.statement="DELETE ??,??\n                                  FROM ??\n                                  JOIN ".concat(options.tables[1],"\n                                    ON ").concat(options.joinPoints[0],"\n                                  WHERE ").concat(options.from.condition,"\n                                  \n                                  ")}return console.log("SQL ATTRRIBS"),console.log(_sqlAttribs3),_sqlAttribs3}_sqlAttribs3={};return _sqlAttribs3.attribs={from:options.from},_sqlAttribs3.statement="DELETE\n                                FROM ??\n                                ",options.from.condition&&(_sqlAttribs3.statement+=" WHERE ".concat(options.from.condition)),_sqlAttribs3}}function transaction(data){"function"==typeof data.query?data.query():this.TRANSACTION(data.query,data.conn,data.outComehandler)}function procedure(data){console.log("THE procedure got a call"),"function"==typeof data.query?data.query():(console.log("INSIDE PROCEDURE"),this.PROCEDURE(data.query,data.conn,data.outComehandler))}function join(data){console.log("THE procedure got a call"),"function"==typeof data.query?data.query():(console.log("INSIDE JOIN"),this.JOIN(data.query,data.conn,data.outComehandler))}function TRANSACTION(collections,conn,argument_2){for(var handler=2<arguments.length&&void 0!==argument_2?argument_2:null,self=this,pao=self.pao,collectionsIds=[],breakOut=!1,c=0;c<collections.length;c++){var i=collections[c],fields=null,sources=null,own=null;if(!pao.pa_contains(i,"fields")){handler("Required collection/table field missing");break}if(pao.pa_contains(i.fields,"tables")&&(sources=i.fields.tables,own=i.fields.own),sources&&(fields=self.combineFields(sources,own,collectionsIds)),fields&&(i.fields=fields),self.insert(i,conn).then(function(insert){collectionsIds.push(insert)}).catch(function(failedInsert){self.rollback(collectionsIds),handler(failedInsert,null),breakOut=!0}),breakOut)break;c===collections.length-1&&(console.log("Operation completed successfully"),handler("Transaction Operation sucessful"))}}function insert(inset,conn){var self=this;return new Promise(function(resolve,reject){console.log("Executing the insert promise");var queryAttributes=[inset.name,inset.fields],sql=conn.format("INSERT INTO ?? SET ?",queryAttributes);conn.query(sql,function(e,r,f){e?(console.log("Promise is rejecting"),reject(e)):self.findOne({conn:conn,table:inset.name,query:{user:{id:r.insertId}},outComehandler:function outComehandler(r,data,insert){var e=0<arguments.length&&void 0!==r?r:null,r=1<arguments.length&&void 0!==data?data:null,data=2<arguments.length&&void 0!==insert?insert:null,insert={};e?(console.log("the errorINSERT"),console.log(e),console.log(data),insert.error=e,insert.lastInsert=data.query.user.id,insert.fields=null,insert.collection=data.table,console.log("Promise is Resolving with findOne error")):(insert.lastInsert=data.query.user.id,insert.fields=r,insert.collection=data.table,console.log("Promise is Resolving with FindOne SUCCESS")),console.log(insert),resolve(insert)}})})})}function combineFields(keys,own,ids){var fields={};return console.log("COMBINE FIELDS GETS A CALL"),keys.forEach(function(v,i){for(var _loop3=function _loop3(co){if(ids[co].collection===v.name)return v.values.forEach(function(fieldValuePair,ii){console.log("THE VV"),console.log(fieldValuePair);fieldValuePair=fieldValuePair.split(".");console.log("FIELD VALUE PAIR"),console.log(fieldValuePair),fields[fieldValuePair[1]]=ids[co].fields[fieldValuePair[0]]}),"break"},co=0;co<ids.length;co++){if("break"===_loop3(co))break}}),keys=Object.keys(own),console.log("THE KEYS OF OWN"),console.log(keys),keys.forEach(function(k,i){fields[k]=own[k]}),console.log("THE FIELDS"),console.log(fields),fields}function rollback(rolbacks){var self=this;rolbacks.forEach(function(roll,i){self.deleteOne({id:roll.lastInsert},conn)})}function joinExek(join,conn){var self=this;return new Promise(function(resolve,reject){console.log("Executing the JOIN promise");var queryAttributes={fields:join.returnFields,from:{table:join.tables[0],condition:self.joinConditionsFormat(join.conditions)},joinPoints:self.joinConditionsFormat(join.joinPoints,"ON"),tables:join.tables.splice(1,join.tables.length),type:join.type.toUpperCase(),length:join.joins},sql=self.joinStatement(queryAttributes),queryAttributes=[queryAttributes.from.table,queryAttributes.tables[0]];console.log("THE SQL BEFORE FORMAT"),console.log(sql),sql=conn.format(sql,queryAttributes),console.log(sql),conn.query(sql,function(e,r,f){e?(console.log("Promise is rejecting JOIN"),console.log(e),reject(e)):(console.log("Promise is Resolving JOIN"),console.log(r),console.log(r[0]),resolve(r[0]))})})}function joinConditionsFormat(conditions,type){if(type=1<arguments.length&&void 0!==type?type:null,console.log("CONDITIONS"),console.log(conditions),type){var condition=[];return conditions.forEach(function(conList,i){conList=conList.trim().split(" ");condition.push("".concat(conList[0]," ").concat("="," ").concat(conList[2]))}),console.log("THE JOIN ON CONDITION"),console.log(condition),condition}var _condition="";return conditions.forEach(function(operand,i){console.log("THE con ITEM"),console.log(operand);var conList=operand.trim().split(" ");console.log("THE CONLIST"),console.log(conList);operand="";switch(conList[1]){case"EQUALS":operand="=";break;case"ISGREATEROREQUALS":operand=">=";break;case"ISLESSOREQUALS":operand="<=";break;default:operand="="}_condition+="".concat(conList[0]," ").concat(operand," '").concat(conList[2],"'")}),console.log("THE JOIN FROM CONDITION"),console.log(_condition),_condition.trim()}function joinStatement(options){switch(console.log("THE JOIN OPTIONS"),console.log(options),options.length){case 3:return"SELECT ".concat(options.fields,"\n               FROM ").concat(options.from.table,"\n               JOIN ").concat(options.tables[0],"\n                  ON ").concat(options.conditions[0],"\n               JOIN options.tables[1]\n                  ON ").concat(options.conditions[1],"\n               WHERE ").concat(options.from.condition,"\n               \n               ");case 4:return"SELECT ".concat(options.fields,"\n               FROM ").concat(options.from.table,"\n               JOIN ").concat(options.tables[0],"\n                  ON ").concat(options.conditions[0],"\n               JOIN options.tables[1]\n                  ON ").concat(options.conditions[1],"\n               JOIN options.tables[2]\n                  ON ").concat(options.conditions[2],"\n               WHERE ").concat(options.from.condition,"\n               \n               ");case 5:return"SELECT ".concat(options.fields,"\n               FROM ").concat(options.from.table,"\n               JOIN ").concat(options.tables[0],"\n                  ON ").concat(options.conditions[0],"\n               JOIN options.tables[1]\n                  ON ").concat(options.conditions[1],"\n               JOIN options.tables[2]\n                  ON ").concat(options.conditions[2]," \n               JOIN options.tables[3]\n                  ON ").concat(options.conditions[3],"\n               WHERE ").concat(options.from.condition,"\n               \n               ");default:return"SELECT ".concat(options.fields,"\n               FROM  ??\n               JOIN  ").concat(options.tables[0],"\n                  ON ").concat(options.joinPoints[0],"\n               WHERE ").concat(options.from.condition,"\n               ")}}function searchExek(search,conn){var self=this,contains=self.pao.pa_contains;return console.log("THE SEARCH"),console.log(search),new Promise(function(resolve,reject){console.log("Executing the search promise");var sql,queryAttributes=null,sqliks=self.searchStatement(self.searchOptions(search));console.log("THE SQLKIKS OBJECT"),console.log(sqliks),queryAttributes=contains(sqliks.attribs,"tables")?[sqliks.attribs.from.table].concat(_toConsumableArray(sqliks.attribs.tables)):[sqliks.attribs.from.table],sql=sqliks.statement;console.log("THE SQL BEFORE FORMAT"),console.log(sql),sql=conn.format(sql,queryAttributes),console.log(sql),conn.query(sql,function(e,r,f){e?(console.log("Promise is rejecting search"),console.log(e),reject(e)):(console.log("Promise is Resolving search"),resolve(r))})})}function searchConditionsFormat(conditions,condition){condition=1<arguments.length&&void 0!==condition?condition:null,console.log("CONDITIONS"),console.log(conditions);var self=this;if(self.pao,condition){condition=self.parseFormatCondition(conditions,condition);return console.log("THE search ON CONDITION"),console.log(condition),condition}var _condition2="";return conditions.forEach(function(con,i){0<=con.indexOf("GROUP::")?(console.log("CONDITION FROM SEARCHCONDITIONFORMAT"),console.log(con),_condition2+=self.parseGroup(con)):_condition2+=self.parseFormatCondition(con)}),console.log("THE search FROM CONDITION"),console.log(_condition2),_condition2.trim()}function searchStatement(options){console.log("THE search OPTIONSSTATEMENT"),console.log(options);var contains=this.pao.pa_contains;if(!options)return null;if(contains(options,"length")){var _sort3={};_sort3.attribs={from:options.from,tables:options.tables},console.log("THE OPTIONS LENGTH"),console.log(options.length);var _limit3=" ",_sqlAttribs4=options.sort?this.sort(options.sort):" ";switch(options.take?_limit3=this.limit(options.take,"take"):options.range&&(_limit3=this.limit(options.range,"range")),options.length){case 3:_sort3.statement="SELECT ".concat(options.fields,"\n                FROM ??\n                JOIN ??\n                  ON ").concat(options.joinPoints[0],"\n                JOIN ??\n                  ON ").concat(options.joinPoints[1],"\n                WHERE ").concat(options.from.condition,"\n                ").concat(_sqlAttribs4,"\n                ").concat(_limit3,"\n                \n                ");break;case 4:_sort3.statement="SELECT ".concat(options.fields,"\n                FROM ").concat(options.from.table,"\n                JOIN ").concat(options.tables[0],"\n                  ON ").concat(options.joinPoints[0],"\n                JOIN ").concat(options.tables[1],"\n                  ON ").concat(options.joinPoints[1],"\n                JOIN ").concat(options.tables[2],"\n                  ON ").concat(options.joinPoints[2],"\n                WHERE ").concat(options.from.condition,"\n                ").concat(_sqlAttribs4,"\n                ").concat(_limit3,"\n                ");break;case 5:_sort3.statement="SELECT ".concat(options.fields,"\n                FROM ").concat(options.from.table,"\n                JOIN ").concat(options.tables[0],"\n                  ON ").concat(options.joinPoints[0],"\n                JOIN ").concat(options.tables[1],"\n                  ON ").concat(options.joinPoints[1],"\n                JOIN ").concat(options.tables[2],"\n                  ON ").concat(options.joinPoints[2]," \n                JOIN ").concat(options.tables[3],"\n                  ON ").concat(options.joinPoints[3],"\n                WHERE ").concat(options.from.condition,"\n                ").concat(_sqlAttribs4,"\n                ").concat(_limit3,"\n                ");break;default:_sort3.statement="SELECT ".concat(options.fields,"\n                FROM  ??\n                JOIN  ").concat(options.tables[0],"\n                  ON ").concat(options.joinPoints[0],"\n                WHERE ").concat(options.from.condition,"\n                ").concat(_sqlAttribs4,"\n                ").concat(_limit3,"\n              ")}return _sort3}return(_sqlAttribs4={}).attribs={from:options.from},_limit3=" ",_sort3=options.sort?this.sort(options.sort):" ",options.take?_limit3=this.limit(options.take,"take"):options.range&&(_limit3=this.limit(options.range,"range")),contains(options.from,"condition")?_sqlAttribs4.statement="SELECT ".concat(options.fields,"\n              FROM  ??\n              WHERE ").concat(options.from.condition,"\n              ").concat(_sort3,"\n              ").concat(_limit3,"\n              "):_sqlAttribs4.statement="SELECT ".concat(options.fields,"\n                              FROM  ??\n                              ").concat(_sort3,"\n                              ").concat(_limit3,"\n                              "),_sqlAttribs4}function searchOptions(i,_options2){var multiSet=1<arguments.length&&void 0!==_options2&&_options2,contains=this.pao.pa_contains,setTables=multiSet?_toConsumableArray(i.tables):"";if(this.log("THE search BATCH ITEM"),this.log(i),console.log(i),contains(i,["joins","conditions","joinPoints"])){console.log("THE SEARCH ITEM CONTAINS BOTH JOINS,CONDITIONS, AND JOINPOINTS");_options2={};return _options2.from={table:i.tables[0],condition:this.searchConditionsFormat(i.conditions)},_options2.joinPoints=i.joinPoints?this.searchConditionsFormat(i.joinPoints,"ON"):null,_options2.length=i.tables.length,_options2.tables=i.tables.splice(1,i.tables.length),contains(i,["returnFields","opiks"])?_options2.fields=this.searchFieldsFormat(i.opiks,i.returnFields):contains(i,"opiks")?_options2.fields=this.searchFieldsFormat(i.opiks):contains(i,"returnFields")&&(1===i.returnFields.length&&"all"===i.returnFields[0].trim()?_options2.fields="*":_options2.fields=i.returnFields),contains(i,"type")&&(_options2.type=i.type),contains(i,"take")&&(_options2.take=i.take),contains(i,"range")&&(_options2.range=i.range),contains(i,"soundex")&&(_options2.soundex=i.soundex),contains(i,"sort")&&(_options2.sort=i.sort),contains(i,"set")&&(_options2.set=multiSet?this.set(i.set,setTables):this.set(i.set)),contains(i,"takeFrom")&&(i.takeFrom.conditions?(_options2.takeFrom=i.takeFrom,_options2.takeFrom.condition=this.searchConditionsFormat(i.takeFrom.conditions)):_options2.takeFrom=i.takeFrom),_options2}if(contains(i,["conditions"])){var _options4={};return _options4.from={table:i.tables[0],condition:this.searchConditionsFormat(i.conditions)},contains(i,["returnFields","opiks"])?_options4.fields=this.searchFieldsFormat(i.opiks,i.returnFields):contains(i,"opiks")?_options4.fields=this.searchFieldsFormat(i.opiks):contains(i,"returnFields")&&(1===i.returnFields.length&&"all"===i.returnFields[0].trim()?_options4.fields="*":_options4.fields=i.returnFields),contains(i,"type")&&(_options4.type=i.type),contains(i,"take")&&(_options4.take=i.take),contains(i,"range")&&(_options4.range=i.range),contains(i,"soundex")&&(_options4.soundex=i.soundex),contains(i,"sort")&&(_options4.sort=i.sort),contains(i,"set")&&(_options4.set=multiSet?this.set(i.set,setTables):this.set(i.set)),contains(i,"takeFrom")&&(i.takeFrom.conditions?(_options4.takeFrom=i.takeFrom,_options4.takeFrom.condition=this.searchConditionsFormat(i.takeFrom.conditions)):_options4.takeFrom=i.takeFrom),_options4}if(contains(i,"tables")&&i.tables instanceof Array){_options4={};return _options4.from={table:i.tables[0]},contains(i,["returnFields","opiks"])?_options4.fields=this.searchFieldsFormat(i.opiks,i.returnFields):contains(i,"opiks")?_options4.fields=this.searchFieldsFormat(i.opiks):contains(i,"returnFields")&&(1===i.returnFields.length&&"all"===i.returnFields[0].trim()?_options4.fields="*":_options4.fields=i.returnFields),contains(i,"type")&&(_options4.type=i.type),contains(i,"take")&&(_options4.take=i.take),contains(i,"range")&&(_options4.range=i.range),contains(i,"soundex")&&(_options4.soundex=i.soundex),contains(i,"sort")&&(_options4.sort=i.sort),contains(i,"set")&&(_options4.set=multiSet?this.set(i.set,setTables):this.set(i.set)),contains(i,"takeFrom")&&(i.takeFrom.conditions?(_options4.takeFrom=i.takeFrom,_options4.takeFrom.condition=this.searchConditionsFormat(i.takeFrom.conditions)):_options4.takeFrom=i.takeFrom),_options4}return null}function searchFieldsFormat(all,argument_1){var rFields=1<arguments.length&&void 0!==argument_1?argument_1:null;console.log("THE SELECT STATEMENT OPIKS OBJECT"),console.log(all),console.log(rFields);var self=this,fis=(self.pao.pa_contains,all),keyword="",otherFields=rFields?rFields.join(","):"",all="",fieldstatement="",multiFields=[],allFields=0<=otherFields.indexOf("all"),lastCondition=!1;console.log("THE OTHER FIELDS"),console.log(otherFields),console.log(0<=otherFields.indexOf("all"));for(var fi=0;fi<fis.length&&((0<=fis[fi].indexOf("fuxin")||0<=fis[fi].indexOf("field"))&&multiFields.push(!0),!(1<multiFields.length));fi++);return fis.forEach(function(formated,i){formated=self.fieldFormat(formated);formated instanceof Object?keyword=formated.value.toUpperCase():(console.log("THE FORMATED"),console.log(formated),console.log(allFields),console.log(otherFields),i===fis.length-1&&(lastCondition=!0),fieldstatement+=allFields?multiFields&&i!==fis.length-1?"".concat(formated,","):formated:lastCondition&&null===rFields?"".concat(formated):"".concat(formated,","))}),!0==allFields&&(all="*,"),allFields?"".concat(all," ").concat(keyword," ").concat(fieldstatement):"".concat(all," ").concat(keyword," ").concat(fieldstatement," ").concat(otherFields)}function fieldFormat(fieldstatement,fieldList){var from=1<arguments.length&&void 0!==fieldList?fieldList:null;console.log("THE SELECT STATEMENT OPIKS OBJECT FIELD FORMAT"),console.log(fieldstatement),this.pao.pa_contains;var as="",fieldList=0<=fieldstatement.lastIndexOf(".as")?fieldstatement.lastIndexOf(".as"):fieldstatement.length;switch(0<=fieldstatement.indexOf(".options[fuxin")&&(as=fieldstatement.slice(fieldstatement.indexOf(".options[fuxin"),fieldList)),console.log("THE NESTEDINTFUXIN"),console.log(as),console.log(fieldstatement),""!==as.trim()&&(fieldstatement=fieldstatement.substr(0,fieldstatement.indexOf(as))),fieldList=fieldstatement.trim().split("."),""!==as.trim()&&fieldList.push(as),console.log("THE FIELD LIST"),console.log(fieldList),fieldstatement=null,as="fuxin"===fieldList[0]&&3<fieldList.length?"AS ".concat(this.options("".concat(fieldList[3]),"as")):" ",console.log("THE as"),console.log(as),fieldList[0]){case"keyword":fieldstatement=from?fieldList[1].toUpperCase():{statement:"keyword",value:fieldList[1].toUpperCase()};break;case"fuxin":fieldstatement=" ".concat(fieldList[1].toUpperCase(),"(").concat(this.options("".concat(fieldList[2]),"option"),") ").concat(as," ");break;case"field":3===fieldList.length&&(fieldstatement="".concat(fieldList[1]," AS ").concat(this.options(fieldList[2],"as")));break;default:fieldstatement=""}return fieldstatement.trim()}function options(stripedOption,args){if(args=1<arguments.length&&void 0!==args?args:"",this.pao.pa_contains,console.log("THE CURRENT OPTION"),console.log(stripedOption),"undefined"===stripedOption)return console.log("THE OPTION IS UNDEFINED"),console.log(stripedOption),"";if(stripedOption=stripedOption.slice(stripedOption.indexOf("[")+1,stripedOption.lastIndexOf("]")),console.log("OPTIONS: STRIPEDOPTION"),console.log(stripedOption),"as"===args)return"".concat(stripedOption);if("option"===args){args=stripedOption.split(",");return args instanceof Array&&1<args.length?0<=args[0].indexOf("keyword")?this.fieldFormat(args[0],!0):0<=args[0].indexOf("fuxin")?args[1]?"".concat(this.fieldFormat(args[0]),",").concat(args[1].trim()):this.fieldFormat(args[0]):"".concat(stripedOption):args.join(",")}}function sort(sortStatement){console.log("THE SORT GOT A RESPONSE"),console.log(sortStatement);var sortArgs=sortStatement.split("."),sortFields=sortStatement.slice(sortStatement.indexOf("[")+1,sortStatement.lastIndexOf("]")),sortStatement="";return 0<=sortArgs[0].indexOf("order")?sortStatement=1<sortArgs.length&&"DESC"===sortArgs[1].toUpperCase()?"ORDER BY ".concat(sortFields," DESC"):"ORDER BY ".concat(sortFields):0<=sortArgs[0].indexOf("group")&&(sortStatement=1<sortArgs.length&&"DESC"===sortArgs[1].toUpperCase()?"GROUP BY ".concat(sortFields," DESC"):"GROUP BY ".concat(sortFields," ASC")),sortStatement}function limit(offset,limitStatement){var count=1<arguments.length&&void 0!==limitStatement?limitStatement:null,limitStatement="";return"take"===count?limitStatement="LIMIT ".concat(offset):"range"===count&&(offset=(count=offset.split(","))[0],count=count[1],limitStatement="LIMIT ".concat(count," OFFSET ").concat(offset)),limitStatement}function parseGroup(conStr,grouped){var level=1<arguments.length&&void 0!==grouped?grouped:1,self=this,groupCons=self.pao.pa_isObject,fullCon="",connector="",grouped=self.conditionsConnector(conStr);return console.log("THE RES VALUE"),console.log(grouped),groupCons(grouped)&&(console.log("THE RES IS AN OBJECT"),console.log(grouped),conStr=grouped.condixion,connector=grouped.connector),0===conStr.trim().indexOf("GROUP::")&&(console.log("THE GROUP:: string is the first"),groupCons=conStr.replace("GROUP::","").trim(),conStr=grouped="",console.log("THE extracted string"),console.log(groupCons),"number"==typeof parseInt(groupCons[0])&&(console.log("extStr type is a number"),parseInt(groupCons[0]),0!==(grouped=groupCons.slice(1).trim()).indexOf("START")&&0!==grouped.indexOf("$")||(conStr=grouped.replace("START","").trim(),console.log(grouped),groupCons="",grouped=[],console.log("PARSEGROUP EXECUTES THIS FAR"),console.log(conStr),1===level?(groupCons=conStr.split(";"),console.log("LEVEL 1 GROUPCONS"),console.log(groupCons),grouped=groupCons.map(function(c,i){return console.log("THE C CONDITION"),console.log(c),console.log(c.indexOf("GROUP::")),0<=c.indexOf("GROUP::")?self.parseGroup(c,2):self.parseFormatCondition(c)})):2===level?(groupCons=conStr.split(","),console.log("LEVEL 2 GROUPCONS"),console.log(groupCons),grouped=groupCons.map(function(c,i){return 0<=c.indexOf("GROUP::")?self.parseGroup(c,3):self.parseFormatCondition(c)})):3===level&&(grouped=(groupCons=conStr.split("|")).map(function(c,i){return self.parseFormatCondition(c)})),console.log("GROUPED"),console.log(grouped),console.log(groupCons),fullCon="".concat(connector," (").concat(grouped.join(" "),")")))),console.log("THE FULL GROUPED CONDITION TO BE RETURNED:"),console.log(fullCon),fullCon}function parseFormatCondition(matchKeys,match){var conFuxin=1<arguments.length&&void 0!==match?match:null;if(this.pao,conFuxin){var condition=[];return matchKeys.forEach(function(conList,i){conList=conList.trim().match(/(\[[^\]]+\]|\S+)/g);condition.push("".concat(conList[0]," ").concat("="," ").concat(conList[2]))}),console.log("THE search ON CONDITION"),console.log(condition),condition}var _condition3="";console.log("THE con ITEM"),console.log(matchKeys);var conList=matchKeys.trim().match(/(\[[^\]]+\]|\S+)/g);console.log("THE CONLIST"),console.log(conList);var operand="",leftoperand="",multiCon=!1,match=!1,conFuxin=!1;if("MATCH"===conList[0].trim()||"MATCH"===conList[1].trim()||"FUXIN"===conList[1].trim()||"FUXIN"===conList[2].trim())if(0<conList.indexOf("AGAINST")&&5<=conList.length){var _oCon=conList.slice(0);console.log("THE O CON"),console.log(_oCon);var fuxinIndex="",matchKeys="",matchKeys=(multiCon="MATCH"!==_oCon[0].trim().toUpperCase())?(fuxinIndex=_oCon[2].trim(),_oCon[4].trim()):(fuxinIndex=_oCon[1].trim(),_oCon[3].trim());"["===fuxinIndex[0]&&(fuxinIndex=fuxinIndex.slice(1,fuxinIndex.length-1)),"["===matchKeys[0]&&(matchKeys=matchKeys.slice(1,matchKeys.length-1)),console.log("THE MATCH FIELDS"),console.log(fuxinIndex);var splicedFuxinArr="",operand=(multiCon?_oCon[3]:_oCon[2]).trim();switch(multiCon?_oCon[5]:_oCon[4]){case"BOOLEAN":splicedFuxinArr='AGAINST ("'.concat(matchKeys,'"" IN BOOLEAN MODE) ');break;case"QUERY":splicedFuxinArr='AGAINST ("'.concat(matchKeys,'" IN QUERY EXPRESSION MODE) ');break;default:splicedFuxinArr='AGAINST ("'.concat(matchKeys,'" IN NATURAL LANGUAGE MODE) ')}conList[0]=(multiCon?"".concat(_oCon[0]," MATCH ("):"MATCH (").concat(fuxinIndex,") ").concat(splicedFuxinArr),match=!0}else{_oCon=conList.slice(0),conFuxin=!0;console.log("THE O CON::FUXIN"),console.log(_oCon);fuxinIndex=(multiCon="FUXIN"!==_oCon[1].trim().toUpperCase())?3:2,splicedFuxinArr=_oCon.splice(fuxinIndex);_oCon.push(splicedFuxinArr.join(" ")),console.log(fuxinIndex),console.log(_oCon),0<=_oCon[fuxinIndex].indexOf("[")&&(console.log("OTHER CONTENT IS IN THE SQUARE BRACKETS"),_operator=(_operator=_oCon[fuxinIndex].slice(1,_oCon[fuxinIndex].length-1)).trim(),console.log("AFTER THE STRIPED HAS BEEN TRIMMED"),console.log(_operator),_oCon2=_operator.substr(0,_operator.indexOf(" ")),_operator=_operator.substr(_operator.indexOf(" ")+1),console.log("THE SPLITFUXINCONS"),console.log(_oCon2),console.log(_operator),_oCon2=this.getOperand(_oCon2),_operator=this.fieldFormat(_operator),console.log(_oCon2),console.log(_operator),_condition3=(multiCon?"".concat(_oCon[0]," ").concat(_oCon[1]," "):"".concat(_oCon[0]," ")).concat(_oCon2," ").concat(_operator),console.log("THE CONDITION IN FUXIN TEST"),console.log(_condition3))}else{var _oCon2=conList.slice(0);console.log("THE O CON"),console.log(_oCon2);var _operator=_oCon2[0].trim().toUpperCase(),_operator=(multiCon="AND"===_operator||"OR"===_operator||"NOT"===_operator)?conList[2]:conList[1];console.log("THE MULTICON STATUS:::"),console.log(multiCon),console.log(_oCon2),operand=this.getOperand(_operator),leftoperand="["===(leftoperand=multiCon?conList[3]:conList[2])[0]?"'".concat(leftoperand.slice(1,leftoperand.length-1),"'"):0<=leftoperand.indexOf("KEY::")?"".concat(leftoperand.replace("KEY::","").trim()):"'".concat(leftoperand,"'"),console.log("THE VALUE OF THE LEFFFFFT OPERAND"),console.log(leftoperand),console.log(leftoperand.indexOf("KEY::"))}return conFuxin||(_condition3+=match?"".concat(conList[0]):(multiCon?"".concat(" "," ").concat(conList[0]," ").concat(conList[1]," "):"".concat(conList[0]," ")).concat(operand," ").concat(leftoperand)),console.log("THE search FROM CONDITION"),console.log(_condition3),_condition3}function getOperand(operator){var operand="";switch(operator){case"EQUALS":operand="=";break;case"ISGREATEROREQUALS":operand=">=";break;case"ISLESSOREQUALS":operand="<=";break;case"ISLIKE":operand="LIKE";break;case"ISIN":operand="IN";break;case"ISREGEX":operand="REGEXP";break;case"ISNOT":operand="NOT";break;case"ISNOTNULL":operand="IS NOT NULL";break;case"ISNULL":operand="IS NULL";break;default:operand="="}return operand}function conditionsConnector(c){var connector={};return console.log("THE INDEX OF GROUP:: IN CONDITIONS CONNECTOR"),console.log(c.trim().indexOf("GROUP::")),console.log(c),0<c.trim().indexOf("GROUP::")?(console.log("THE INDEX OF GROUP IS AT ONE"),0===c.trim().indexOf("AND")?(connector.connector=" AND",connector.condixion=c.replace("AND","").trim()):0===c.trim().indexOf("OR")?(connector.connector=" OR",connector.condixion=c.replace("OR","").trim()):0===c.trim().indexOf("NOT")&&(connector.connector=" NOT",connector.condixion=c.replace("NOT","").trim()),connector):c}function set(_set,argument_1){var multiSets=1<arguments.length&&void 0!==argument_1&&argument_1,objectToArray=this.pao.pa_objectToArray;this.log("THE SET"),this.log(_set),this.log(multiSets);var setStrings="";return _set.forEach(function(s,i){var setString="",modSet=objectToArray(s,!0);console.log("THE CONVERTED SET OBJECT"),console.log(modSet),modSet.forEach(function(col,pos){setString+=multiSets?pos===modSet.length-1?"".concat(multiSets[i],".").concat(col.key,' = "').concat(col.value,'"'):"".concat(multiSets[i],".").concat(col.key,' = "').concat(col.value,'", '):pos===modSet.length-1?"".concat(col.key,' = "').concat(col.value,'"'):"".concat(col.key,' = "').concat(col.value,'", ')}),setStrings+=i===_set.length-1?"".concat(setString):"".concat(setString,", ")}),console.log("THE SETSTRINGS"),console.log(setStrings),setStrings}var find=function(){var _ref=mysql_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee2(findiks){var self,pao,_ret;return regeneratorRuntime.wrap(function _callee2$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if((pao=(self=this).pao).pa_isObject(findiks)){_context3.next=6;break}return _context3.abrupt("return");case 6:return _context3.delegateYield(regeneratorRuntime.mark(function _callee(){var conn,handler,query,result,multiple,_loop,q,_ret2;return regeneratorRuntime.wrap(function _callee$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:conn=findiks.conn,handler=findiks.outComehandler,query=[],multiple=!(result=[]),"MULTIPLE"===findiks.table.toUpperCase().trim()?(multiple=!0,query=findiks.query):query.push(findiks.query),_loop=regeneratorRuntime.mark(function _loop(q){var sql,sqliks,queryAttributes;return regeneratorRuntime.wrap(function _loop$(_context){for(;;)switch(_context.prev=_context.next){case 0:return sqliks=null,sqliks=mysql_methods_objectSpread(multiple?{table:query[q].table}:{table:findiks.table},query[q]),_context.prev=2,sqliks=self.queryTemplate(self.queryOptions(sqliks),"select"),console.log("THE SQLKIKS OBJECT FIND"),console.log(sqliks),queryAttributes=[sqliks.attribs.from.table],sql=sqliks.statement,queryAttributes=queryAttributes,console.log("THE SQL BEFORE FORMAT"),console.log(sql),sql=conn.format(sql,queryAttributes),console.log(sql),_context.next=17,conn.query(sql,function(e,r,f){console.log("THE QUERY IS COMPLETED WITH RESULTS"),console.log(e),console.log(r),e&&result.push(e),pao.pa_isArray(r)&&0<r.length&&1!==query.length?(r=r[0],result.push(r)):result=r,q===query.length-1&&(console.log("THE LOOP IS COMPLETE WITH DATA:"),console.log(result),handler(null,result))});case 17:_context.next=22;break;case 19:return _context.prev=19,_context.t0=_context.catch(2),_context.abrupt("return",{v:{v:handler(_context.t0,null)}});case 22:case"end":return _context.stop()}},_loop,null,[[2,19]])}),q=0;case 8:if(q<query.length)return _context2.delegateYield(_loop(q),"t0",10);_context2.next=16;break;case 10:if("object"===_typeof(_ret2=_context2.t0))return _context2.abrupt("return",_ret2.v);_context2.next=13;break;case 13:q++,_context2.next=8;break;case 16:case"end":return _context2.stop()}},_callee)})(),"t0",7);case 7:if("object"===_typeof(_ret=_context3.t0))return _context3.abrupt("return",_ret.v);_context3.next=10;break;case 10:case"end":return _context3.stop()}},_callee2,this)}));return function find(){return _ref.apply(this,arguments)}}(),updateandtake=function(){var _ref2=mysql_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee3(updateAndTake){var self,pao,conn,handler,updateTake,_options;return regeneratorRuntime.wrap(function _callee3$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(console.log("THE UPDATIKANDTAKE"),console.log(updateAndTake),pao=(self=this).pao,conn=updateAndTake.conn,handler=updateAndTake.outComehandler,updateTake=updateAndTake.query,pao.pa_isObject(updateAndTake)){_context4.next=10;break}_context4.next=20;break;case 10:return _context4.prev=10,_context4.next=13,self.searchOptions(updateTake,!0);case 13:_options=_context4.sent,self.multiTableUpdate(_options,conn).then(function(updated){0<updated.changedRows?self.take(_options,conn,updateTake.conditions).then(function(taken){handler(null,{updated:!0,taken:taken})}).catch(function(e){handler(e,null)}):(console.log("NO CHANGED ROWS IN A MULTIPLE UPDATE"),console.log(_options),self.take(_options,conn,updateTake.conditions).then(function(taken){handler(null,{updated:!1,taken:taken})}).catch(function(e){handler(e,null)}))}).catch(function(e){handler(e,null)}),_context4.next=20;break;case 17:_context4.prev=17,_context4.t0=_context4.catch(10),handler(_context4.t0,null);case 20:case"end":return _context4.stop()}},_callee3,this,[[10,17]])}));return function updateandtake(){return _ref2.apply(this,arguments)}}(),insertandtake=function(){var _ref3=mysql_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee5(insertAndTake){var self,pao,conn,handler,insert,takeQuery,insertTakeHandle;return regeneratorRuntime.wrap(function _callee5$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(console.log("THE INSERTANDTAKE"),console.log(insertAndTake),pao=(self=this).pao,conn=insertAndTake.conn,handler=insertAndTake.outComehandler,insert=insertAndTake.query.insert,takeQuery=insertAndTake.query.take,pao.pa_isObject(insertAndTake))try{insertTakeHandle=function(){var _ref4=mysql_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var error,inserted,take,_args5=arguments;return regeneratorRuntime.wrap(function _callee4$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return error=0<_args5.length&&void 0!==_args5[0]?_args5[0]:null,inserted=1<_args5.length&&void 0!==_args5[1]?_args5[1]:null,_context5.next=4,self.log("THE INSERTED RECORD UPDATE");case 4:return _context5.next=6,self.log(error);case 6:return _context5.next=8,self.log(inserted);case 8:return _context5.next=10,self.log(self.SEARCH);case 10:return takeQuery.conditions||(takeQuery.conditions=["id ISEQUAL ".concat(inserted.insertId)]),_context5.next=13,self.log(takeQuery);case 13:(take={}).conn=conn,take.query=takeQuery,take.outComehandler=function(){handler(null,{inserted:inserted,taken:1<arguments.length?arguments[1]:void 0})},self.search(take);case 18:case"end":return _context5.stop()}},_callee4)}));return function insertTakeHandle(){return _ref4.apply(this,arguments)}}(),insert.outComehandler=insertTakeHandle.bind(self),insert.conn=conn,self.insertOne(insert)}catch(e){handler(e,null)}else;case 9:case"end":return _context6.stop()}},_callee5,this)}));return function insertandtake(){return _ref3.apply(this,arguments)}}(),deleteandtake=function(){var _ref5=mysql_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee7(deleteAndTake){var self,pao,conn,handler,remove,takeQuery,deleteTakeHandle;return regeneratorRuntime.wrap(function _callee7$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(console.log("THE DELETEANDTAKE"),console.log(deleteAndTake),pao=(self=this).pao,conn=deleteAndTake.conn,handler=deleteAndTake.outComehandler,takeQuery=remove=null,deleteAndTake.query.remove&&(remove=deleteAndTake.query.remove,takeQuery=deleteAndTake.query.take),pao.pa_isObject(deleteAndTake))try{deleteTakeHandle=function(){var _ref6=mysql_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var error,deleted,_take,_args7=arguments;return regeneratorRuntime.wrap(function _callee6$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return error=0<_args7.length&&void 0!==_args7[0]?_args7[0]:null,deleted=1<_args7.length&&void 0!==_args7[1]?_args7[1]:null,_context7.next=4,self.log("THE deleted RECORD UPDATE");case 4:return _context7.next=6,self.log(error);case 6:return _context7.next=8,self.log(deleted);case 8:if(takeQuery){_context7.next=12;break}handler(null,{deleted:deleted}),_context7.next=20;break;case 12:return takeQuery.conditions||(takeQuery.conditions=remove.conditions),_context7.next=15,self.log(takeQuery);case 15:(_take={}).conn=conn,_take.query=takeQuery,_take.outComehandler=function(){var taken=1<arguments.length?arguments[1]:void 0;console.log("DELETED AND TAKEN OPERATION"),console.log(deleted),console.log(taken),handler(null,{deleted:deleted,taken:taken})},self.search(_take);case 20:case"end":return _context7.stop()}},_callee6)}));return function deleteTakeHandle(){return _ref6.apply(this,arguments)}}(),(remove=remove||deleteAndTake.query).outComehandler=deleteTakeHandle.bind(self),remove.conn=conn,self.removeJoin(remove)}catch(e){handler(e,null)}else;case 10:case"end":return _context8.stop()}},_callee7,this)}));return function deleteandtake(){return _ref5.apply(this,arguments)}}(),multiTableUpdate=function(){var _ref7=mysql_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee8(options,conn){var self,pao,contains;return regeneratorRuntime.wrap(function _callee8$(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return pao=(self=this).pao,contains=pao.pa_contains,_context9.abrupt("return",new Promise(function(resolve,reject){try{var sql,queryAttributes=null,sqliks=self.updateJoinTemplate(options);console.log("THE SQLKIKS OBJECT"),console.log(sqliks),queryAttributes=contains(sqliks.attribs,"tables")&&sqliks.attribs.tables?[sqliks.attribs.from.table].concat(_toConsumableArray(sqliks.attribs.tables)):[sqliks.attribs.from.table],sql=sqliks.statement;queryAttributes=queryAttributes;console.log("THE SQL BEFORE FORMAT::MULTIUPDATE"),console.log(sql),sql=conn.format(sql,queryAttributes),console.log(sql),conn.query(sql,function(e,r,f){return e?reject(e):void resolve(r)})}catch(e){reject(e)}}));case 4:case"end":return _context9.stop()}},_callee8,this)}));return function multiTableUpdate(){return _ref7.apply(this,arguments)}}(),take=function(){var _ref8=mysql_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee9(options,conn,conditions){var self;return regeneratorRuntime.wrap(function _callee9$(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return(self=this).pao,console.log("TAKE:::"),console.log(options),_context10.abrupt("return",new Promise(function(resolve,reject){var takeFrom;options.takeFrom?(takeFrom=options.takeFrom,console.log("THE TAKEFROM BY TAKEFROM"),console.log(takeFrom),takeFrom.condition?(self.log("THE TAKEFROM CONDITIION IS SET"),options.from.condition=takeFrom.condition,1<takeFrom.tables.length&&(options.length=takeFrom.tables.length),!options.length||takeFrom.joinPoints&&(options.joinPoints=takeFrom.joinPoints)):(self.log("THE TAKEFROM HAS NO SET CONDITIONS"),self.log(options),delete options.length,options.from.condition=self.searchConditionsFormat([conditions[0]]))):self.log("THE TAKEFROM IS NOT DEFINED"),self.takeSql(options,conn).then(function(resultset){resolve(resultset)}).catch(function(e){reject(e)})}));case 5:case"end":return _context10.stop()}},_callee9,this)}));return function take(){return _ref8.apply(this,arguments)}}(),search=function search(data){console.log("THE search got a call");"function"==typeof data.query?data.query():(console.log("INSIDE SEARCH"),this.SEARCH(data.query,data.conn,data.outComehandler))},PROCEDURE=function(){var _ref9=mysql_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee10(collections,conn){var handler,self,pao,collectionsIds,breakOut,c,i,fields,sources,own,_args11=arguments;return regeneratorRuntime.wrap(function _callee10$(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:handler=2<_args11.length&&void 0!==_args11[2]?_args11[2]:null,pao=(self=this).pao,self.log("THE PROCEDURE METHOD"),self.log(collections),self.log(handler),self.log(conn),breakOut=!(collectionsIds=[]),c=0;case 10:if(!(c<collections.length)){_context11.next=31;break}if(i=collections[c],own=sources=fields=null,pao.pa_contains(i,"fields")){_context11.next=20;break}return handler("Required collection/table field missing"),_context11.abrupt("break",31);case 20:pao.pa_contains(i.fields,"tables")&&(console.log("sources will be assigned A VALUE"),sources=i.fields.tables,own=i.fields.own);case 21:return sources&&(fields=self.combineFields(sources,own,collectionsIds)),fields&&(i.fields=fields),_context11.next=25,self.insert(i,conn).then(function(insert){collectionsIds.push(insert)}).catch(function(failedInsert){handler(failedInsert,null),breakOut=!0});case 25:if(breakOut)return _context11.abrupt("break",31);_context11.next=27;break;case 27:c===collections.length-1&&(console.log("Operation completed successfully"),console.log(collectionsIds),0<collectionsIds.length?(console.log("PROCEDURE IS COMPLETED"),console.log(collectionsIds),handler(null,{user:{username:collectionsIds[0].fields.email}})):handler("An insert has went wrong"));case 28:c++,_context11.next=10;break;case 31:case"end":return _context11.stop()}},_callee10,this)}));return function PROCEDURE(){return _ref9.apply(this,arguments)}}(),JOIN=function(){var _ref10=mysql_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee11(join,conn){var handler,self,_args12=arguments;return regeneratorRuntime.wrap(function _callee11$(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:handler=2<_args12.length&&void 0!==_args12[2]?_args12[2]:null,(self=this).pao,self.joinExek(join,conn).then(function(result){console.log("jOIN is successful, sending results to the requester"),console.log(result),handler(null,result)}).catch(function(failedRequest){console.log("JOIN FAILED"),console.log(failedRequest),handler(failedRequest,null)});case 4:case"end":return _context12.stop()}},_callee11,this)}));return function JOIN(){return _ref10.apply(this,arguments)}}(),SEARCH=function(){var _ref11=mysql_methods_asyncToGenerator(regeneratorRuntime.mark(function _callee13(search,conn){var handler,self,pao,_args15=arguments;return regeneratorRuntime.wrap(function _callee13$(_context15){for(;;)switch(_context15.prev=_context15.next){case 0:if(handler=2<_args15.length&&void 0!==_args15[2]?_args15[2]:null,pao=(self=this).pao,console.log("THE SEARCH search object contents"),console.log(search),pao.pa_contains(search,"batch")){_context15.next=9;break}self.searchExek(search,conn).then(function(result){console.log("search is successful, sending results to the requester"),handler(null,result)}).catch(function(failedRequest){console.log("search FAILED"),console.log(failedRequest),handler(failedRequest,null)}),_context15.next=10;break;case 9:return _context15.delegateYield(regeneratorRuntime.mark(function _callee12(){var resultSet,batch,_loop2,s;return regeneratorRuntime.wrap(function _callee12$(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:resultSet=[],batch=search.search,_loop2=regeneratorRuntime.mark(function _loop2(s){return regeneratorRuntime.wrap(function _loop2$(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return _context13.next=2,self.searchExek(batch[s],conn).then(function(result){console.log("search is successful, pushing results to the resultSet"),resultSet.push(result),s===batch.length-1&&(console.log("Operation completed successfully"),handler(null,resultSet))}).catch(function(failedRequest){console.log("search FAILED"),console.log(failedRequest),resultSet.push({item:s,errorMessage:"Item of ".concat(s," position has failed"),error:failedRequest})});case 2:case"end":return _context13.stop()}},_loop2)}),s=0;case 4:if(s<batch.length)return _context14.delegateYield(_loop2(s),"t0",6);_context14.next=9;break;case 6:s++,_context14.next=4;break;case 9:case"end":return _context14.stop()}},_callee12)})(),"t0",10);case 10:case"end":return _context15.stop()}},_callee13,this)}));return function SEARCH(){return _ref11.apply(this,arguments)}}();function esm_mysql(pao){!function mysql_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,esm_mysql),this.pao=pao,this.init=mysql_methods_init,this.handleMysqlDataRequest=handleMysqlDataRequest,this.insertOne=insertOne,this.insertMany=insertMany,this.find=find,this.remove=remove,this.updateOne=updateOne,this.set=set,this.queryOptions=queryOptions,this.queryTemplate=queryTemplate,this.TRANSACTION=TRANSACTION,this.PROCEDURE=PROCEDURE,this.JOIN=JOIN,this.SEARCH=SEARCH,this.procedure=procedure,this.transaction=transaction,this.join=join,this.joinExek=joinExek,this.joinStatement=joinStatement,this.joinConditionsFormat=joinConditionsFormat,this.search=search,this.searchExek=searchExek,this.searchStatement=searchStatement,this.searchConditionsFormat=searchConditionsFormat,this.searchOptions=searchOptions,this.combineFields=combineFields,this.insert=insert,this.rollback=rollback,this.searchFieldsFormat=searchFieldsFormat,this.fieldFormat=fieldFormat,this.options=options,this.sort=sort,this.limit=limit,this.parseGroup=parseGroup,this.parseFormatCondition=parseFormatCondition,this.getOperand=getOperand,this.conditionsConnector=conditionsConnector,this.updateandtake=updateandtake,this.insertandtake=insertandtake,this.deleteandtake=deleteandtake,this.updateJoinTemplate=updateJoinTemplate,this.multiTableUpdate=multiTableUpdate,this.take=take,this.takeSql=takeSql,this.removeJoin=removeJoin}function dao_methods_init(){console.log("Dao has been initialised"),this.listens({"dao-take-dbs":this.handleDaoTakeDbs.bind(this),"data-hive-request":this.handleDataHiveRequest.bind(this)})}function handleDataHiveRequest(data){var model=this.pao;if(console.log("DAO"),console.log(data),!model.pa_contains(this.DBS,data.model.vendor))throw new Error("Specified database client is unknown");model=data.model,this.emit({type:"".concat(model.vendor,"-data-request"),data:{conn:this.DBS[model.vendor],table:model.table,opi:model.operation,query:data.document,outComehandler:data.handler}})}function handleDaoTakeDbs(data){this.log("Handling Hive Request"),null===this.DBS&&(this.DBS={}),this.DBS[data.vendor]=data.conn}function esm_dao(pao){!function dao_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,esm_dao),this.pao=pao,this.DBS=null,this.init=dao_methods_init,this.handleDataHiveRequest=handleDataHiveRequest,this.handleDaoTakeDbs=handleDaoTakeDbs}function dman_methods_init(){this.log("Dman has been initialised"),this.listens({"config-dman":this.handleConfigureDBMan.bind(this)})}function handleConfigureDBMan(data){var self=this,pao=self.pao;if(pao.pa_isObject(data))if(pao.pa_contains(data,"clients"))if(pao.pa_isArray(data.clients)){var supported=self.supportedClients;try{data.clients.forEach(function(c,i){pao.pa_contains(supported,c.name)?(console.log("THE SYSTEM IS ABOUT TO CONNECT TO THE THE SERVER"),self.connectToClient(c)):self.throwError('Client: "'.concat(c.name,' is not supported by the system"'))}),0<self.DBS.length&&(self.log("Sending databases to the dao"),self.emit({type:"dao-take-dbs",data:{dbs:self.DBS}}))}catch(e){}}else;else self.error("System requires clients property with valid config to interface with database clients");else self.log("No Client database client specified,System will use default","warn")}function connectToClient(client){this.log("System is about to connect to client: ".concat(client.name)),this.getClientDriver(client)}function getClientDriver(client){console.log("System is getting a client driver"),console.log("THE OTHER DETAILS BELOW"),console.log(client.name),console.log("mysql"===client.name);try{"mysql"===client.name&&(this.supportedClients[client.name].driver=__webpack_require__(20)),this.supportedClients[client.name].driver||(console.log("THE DRIVER REQUIREMENT FAILED"),this.throwError("Failed to get client driver module")),this.connect(client)}catch(e){console.log("THE DRIVER CONNECT ERROR"),console.log(e.stack)}}function connect(client){var self=this;self.logSync("System is connecting to client: ".concat(client.name));try{var sclient=self.supportedClients[client.name],opts={host:client.connect.host,user:client.connect.user,password:client.connect.pass,database:client.connect.name},res=sclient.driver[sclient.connectMethod](opts,function(err,res){err?(console.log("THE ACTUAL CONNECTION ERROR"),console.log(err.stack)):(self.DBS[client.name]=res,self.log("System has successfully connected to client"),self.log("Client ready to serve queries"))});res.connect(function(e){if(e)throw self.logSync("THE SYSTEM HAS FAILED TO CONNECT TO THE DATABASE, please refer to the error below:"),self.logSync(e.message),new Error(e);self.DBS[client.name]=res,self.log("System has successfully connected to client"),self.log("System is handing client connection"),self.emit({type:"dao-take-dbs",data:{vendor:client.name,conn:res}}),self.log("Client ready to serve queries")})}catch(e){console.log("THE CONNECTION EROR"),console.log(e.stack)}}function esm_dman(pao){!function dman_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,esm_dman),this.pao=pao,this.DBS=[],this.supportedClients={mysql:{protocol:"",connectMethod:"createConnection"}},this.init=dman_methods_init,this.handleConfigureDBMan=handleConfigureDBMan,this.connectToClient=connectToClient,this.getClientDriver=getClientDriver,this.connect=connect}function global_methods_init(){console.log("Global has been initialised"),this.listens({"request-global-request":this.handleRequestGlobalRequest.bind(this)})}function handleRequestGlobalRequest(data){this.log("The Modules: ",this.globals),this.globals&&0<this.globals.length?-1<this.globals.indexOf(data)?this.emit({type:"request-global-request-response",data:!0}):this.emit({type:"request-global-request-response",data:!1}):this.emit({type:"request-global-request-error",data:!1})}function esm_global(pao){!function global_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,esm_global),this.pao=pao,this.globals=[],this.init=global_methods_init,this.handleRequestGlobalRequest=handleRequestGlobalRequest}function Activate(anziiloger){var libs=0<arguments.length&&void 0!==anziiloger?anziiloger:[],core=new this.ANZII.CORE(this.ANZII.PILLAR),pao=new this.ANZII.PAO(core),anziiloger={Anziiloger:this.ESM.Esm.Anziiloger};delete this.ESM.Esm.Anziiloger,libs.unshift(anziiloger),libs.push(this.ESM.Esm),libs.forEach(function(lib){for(var moco in lib){var moduId=moco.toLowerCase(),modInstId=moduId;core.createModule(new lib[moco](pao.create(moduId,null)),moduId,modInstId),core.startModule(moduId,modInstId)}})}var esm=new function Esm(){!function esm_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Esm),this.Esm={Anziiloger:esm_anziiloger,Mysql:esm_mysql,System:esm_system,Middleware:esm_middleware,Parsers:esm_parsers,Router:esm_router,Request:esm_request,Dao:esm_dao,Dman:esm_dman,Server:esm_server,Config:esm_config,Global:esm_global}};anzii_Anzii=function Anzii(){!function anzii_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Anzii);this.ANZII=base,this.ESM=esm,this.Activate=Activate},__webpack_exports__.default=new anzii_Anzii},function(module,__webpack_exports__,globals_all){"use strict";globals_all.r(__webpack_exports__);var tasks=[{taskRule:{dayOfWeek:0,hour:17,minute:19},taskHandler:function sendJobAlerts(){this.emit({type:"get-new-jobs",data:""})}}],ppublic=[{type:"function",value:function value(req,res,next){console.log("This is the public middleware"),next()}},{type:"function",value:function value(req,res,next){console.log("THE originalUrl: public 2"),console.log(req.originalUrl),next()}}],pprivate=[{type:"function",value:function value(req,res,next){console.log("This is the PRIVATE middleware"),next()}},{type:"function",value:function value(req,res,next){console.log("THE originalUrl: ANOTHER PRIVATE"),console.log(req.originalUrl),next()}}],globals_all=[{type:"function",value:function value(req,res,next){console.log("I AM THE MIDDLEWARE THAT RUNS ON EVERY REQUEST"),res.header("Access-Control-Allow-Origin","*"),res.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),next()}}];__webpack_exports__.default={middleware:{ppublic:{addMiddleware:ppublic},pprivate:{addMiddleware:pprivate},all:{addMiddleware:globals_all}},router:[{path:"/test",method:"POST",type:"public"},{path:"/test",method:"GET",type:"public"},{path:"/",method:"GET",type:"public"}],kronjo:tasks,logger:{level:"info",trans:["file",{path:"http://www.iiprodakts/logger"}]},cluster:{workers:3,spawn:!0},server:"server"}}]);